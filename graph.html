<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<script src="data:application/x-javascript;base64,KGZ1bmN0aW9uKCkgewogIC8vIElmIHdpbmRvdy5IVE1MV2lkZ2V0cyBpcyBhbHJlYWR5IGRlZmluZWQsIHRoZW4gdXNlIGl0OyBvdGhlcndpc2UgY3JlYXRlIGEKICAvLyBuZXcgb2JqZWN0LiBUaGlzIGFsbG93cyBwcmVjZWRpbmcgY29kZSB0byBzZXQgb3B0aW9ucyB0aGF0IGFmZmVjdCB0aGUKICAvLyBpbml0aWFsaXphdGlvbiBwcm9jZXNzICh0aG91Z2ggbm9uZSBjdXJyZW50bHkgZXhpc3QpLgogIHdpbmRvdy5IVE1MV2lkZ2V0cyA9IHdpbmRvdy5IVE1MV2lkZ2V0cyB8fCB7fTsKCiAgLy8gU2VlIGlmIHdlJ3JlIHJ1bm5pbmcgaW4gYSB2aWV3ZXIgcGFuZS4gSWYgbm90LCB3ZSdyZSBpbiBhIHdlYiBicm93c2VyLgogIHZhciB2aWV3ZXJNb2RlID0gd2luZG93LkhUTUxXaWRnZXRzLnZpZXdlck1vZGUgPQogICAgICAvXGJ2aWV3ZXJfcGFuZT0xXGIvLnRlc3Qod2luZG93LmxvY2F0aW9uKTsKCiAgLy8gU2VlIGlmIHdlJ3JlIHJ1bm5pbmcgaW4gU2hpbnkgbW9kZS4gSWYgbm90LCBpdCdzIGEgc3RhdGljIGRvY3VtZW50LgogIC8vIE5vdGUgdGhhdCBzdGF0aWMgd2lkZ2V0cyBjYW4gYXBwZWFyIGluIGJvdGggU2hpbnkgYW5kIHN0YXRpYyBtb2RlcywgYnV0CiAgLy8gb2J2aW91c2x5LCBTaGlueSB3aWRnZXRzIGNhbiBvbmx5IGFwcGVhciBpbiBTaGlueSBhcHBzL2RvY3VtZW50cy4KICB2YXIgc2hpbnlNb2RlID0gd2luZG93LkhUTUxXaWRnZXRzLnNoaW55TW9kZSA9CiAgICAgIHR5cGVvZih3aW5kb3cuU2hpbnkpICE9PSAidW5kZWZpbmVkIiAmJiAhIXdpbmRvdy5TaGlueS5vdXRwdXRCaW5kaW5nczsKCiAgLy8gV2UgY2FuJ3QgY291bnQgb24galF1ZXJ5IGJlaW5nIGF2YWlsYWJsZSwgc28gd2UgaW1wbGVtZW50IG91ciBvd24KICAvLyB2ZXJzaW9uIGlmIG5lY2Vzc2FyeS4KICBmdW5jdGlvbiBxdWVyeVNlbGVjdG9yQWxsKHNjb3BlLCBzZWxlY3RvcikgewogICAgaWYgKHR5cGVvZihqUXVlcnkpICE9PSAidW5kZWZpbmVkIiAmJiBzY29wZSBpbnN0YW5jZW9mIGpRdWVyeSkgewogICAgICByZXR1cm4gc2NvcGUuZmluZChzZWxlY3Rvcik7CiAgICB9CiAgICBpZiAoc2NvcGUucXVlcnlTZWxlY3RvckFsbCkgewogICAgICByZXR1cm4gc2NvcGUucXVlcnlTZWxlY3RvckFsbChzZWxlY3Rvcik7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBhc0FycmF5KHZhbHVlKSB7CiAgICBpZiAodmFsdWUgPT09IG51bGwpCiAgICAgIHJldHVybiBbXTsKICAgIGlmICgkLmlzQXJyYXkodmFsdWUpKQogICAgICByZXR1cm4gdmFsdWU7CiAgICByZXR1cm4gW3ZhbHVlXTsKICB9CgogIC8vIEltcGxlbWVudCBqUXVlcnkncyBleHRlbmQKICBmdW5jdGlvbiBleHRlbmQodGFyZ2V0IC8qLCAuLi4gKi8pIHsKICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09IDEpIHsKICAgICAgcmV0dXJuIHRhcmdldDsKICAgIH0KICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7CiAgICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07CiAgICAgIGZvciAodmFyIHByb3AgaW4gc291cmNlKSB7CiAgICAgICAgaWYgKHNvdXJjZS5oYXNPd25Qcm9wZXJ0eShwcm9wKSkgewogICAgICAgICAgdGFyZ2V0W3Byb3BdID0gc291cmNlW3Byb3BdOwogICAgICAgIH0KICAgICAgfQogICAgfQogICAgcmV0dXJuIHRhcmdldDsKICB9CgogIC8vIElFOCBkb2Vzbid0IHN1cHBvcnQgQXJyYXkuZm9yRWFjaC4KICBmdW5jdGlvbiBmb3JFYWNoKHZhbHVlcywgY2FsbGJhY2ssIHRoaXNBcmcpIHsKICAgIGlmICh2YWx1ZXMuZm9yRWFjaCkgewogICAgICB2YWx1ZXMuZm9yRWFjaChjYWxsYmFjaywgdGhpc0FyZyk7CiAgICB9IGVsc2UgewogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZhbHVlcy5sZW5ndGg7IGkrKykgewogICAgICAgIGNhbGxiYWNrLmNhbGwodGhpc0FyZywgdmFsdWVzW2ldLCBpLCB2YWx1ZXMpOwogICAgICB9CiAgICB9CiAgfQoKICAvLyBSZXBsYWNlcyB0aGUgc3BlY2lmaWVkIG1ldGhvZCB3aXRoIHRoZSByZXR1cm4gdmFsdWUgb2YgZnVuY1NvdXJjZS4KICAvLwogIC8vIE5vdGUgdGhhdCBmdW5jU291cmNlIHNob3VsZCBub3QgQkUgdGhlIG5ldyBtZXRob2QsIGl0IHNob3VsZCBiZSBhIGZ1bmN0aW9uCiAgLy8gdGhhdCBSRVRVUk5TIHRoZSBuZXcgbWV0aG9kLiBmdW5jU291cmNlIHJlY2VpdmVzIGEgc2luZ2xlIGFyZ3VtZW50IHRoYXQgaXMKICAvLyB0aGUgb3ZlcnJpZGRlbiBtZXRob2QsIGl0IGNhbiBiZSBjYWxsZWQgZnJvbSB0aGUgbmV3IG1ldGhvZC4gVGhlIG92ZXJyaWRkZW4KICAvLyBtZXRob2QgY2FuIGJlIGNhbGxlZCBsaWtlIGEgcmVndWxhciBmdW5jdGlvbiwgaXQgaGFzIHRoZSB0YXJnZXQgcGVybWFuZW50bHkKICAvLyBib3VuZCB0byBpdCBzbyAidGhpcyIgd2lsbCB3b3JrIGNvcnJlY3RseS4KICBmdW5jdGlvbiBvdmVycmlkZU1ldGhvZCh0YXJnZXQsIG1ldGhvZE5hbWUsIGZ1bmNTb3VyY2UpIHsKICAgIHZhciBzdXBlckZ1bmMgPSB0YXJnZXRbbWV0aG9kTmFtZV0gfHwgZnVuY3Rpb24oKSB7fTsKICAgIHZhciBzdXBlckZ1bmNCb3VuZCA9IGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gc3VwZXJGdW5jLmFwcGx5KHRhcmdldCwgYXJndW1lbnRzKTsKICAgIH07CiAgICB0YXJnZXRbbWV0aG9kTmFtZV0gPSBmdW5jU291cmNlKHN1cGVyRnVuY0JvdW5kKTsKICB9CgogIC8vIEFkZCBhIG1ldGhvZCB0byBkZWxlZ2F0b3IgdGhhdCwgd2hlbiBpbnZva2VkLCBjYWxscwogIC8vIGRlbGVnYXRlZS5tZXRob2ROYW1lLiBJZiB0aGVyZSBpcyBubyBzdWNoIG1ldGhvZCBvbgogIC8vIHRoZSBkZWxlZ2F0ZWUsIGJ1dCB0aGVyZSB3YXMgb25lIG9uIGRlbGVnYXRvciBiZWZvcmUKICAvLyBkZWxlZ2F0ZU1ldGhvZCB3YXMgY2FsbGVkLCB0aGVuIHRoZSBvcmlnaW5hbCB2ZXJzaW9uCiAgLy8gaXMgaW52b2tlZCBpbnN0ZWFkLgogIC8vIEZvciBleGFtcGxlOgogIC8vCiAgLy8gdmFyIGEgPSB7CiAgLy8gICBtZXRob2QxOiBmdW5jdGlvbigpIHsgY29uc29sZS5sb2coJ2ExJyk7IH0KICAvLyAgIG1ldGhvZDI6IGZ1bmN0aW9uKCkgeyBjb25zb2xlLmxvZygnYTInKTsgfQogIC8vIH07CiAgLy8gdmFyIGIgPSB7CiAgLy8gICBtZXRob2QxOiBmdW5jdGlvbigpIHsgY29uc29sZS5sb2coJ2IxJyk7IH0KICAvLyB9OwogIC8vIGRlbGVnYXRlTWV0aG9kKGEsIGIsICJtZXRob2QxIik7CiAgLy8gZGVsZWdhdGVNZXRob2QoYSwgYiwgIm1ldGhvZDIiKTsKICAvLyBhLm1ldGhvZDEoKTsKICAvLyBhLm1ldGhvZDIoKTsKICAvLwogIC8vIFRoZSBvdXRwdXQgd291bGQgYmUgImIxIiwgImEyIi4KICBmdW5jdGlvbiBkZWxlZ2F0ZU1ldGhvZChkZWxlZ2F0b3IsIGRlbGVnYXRlZSwgbWV0aG9kTmFtZSkgewogICAgdmFyIGluaGVyaXRlZCA9IGRlbGVnYXRvclttZXRob2ROYW1lXTsKICAgIGRlbGVnYXRvclttZXRob2ROYW1lXSA9IGZ1bmN0aW9uKCkgewogICAgICB2YXIgdGFyZ2V0ID0gZGVsZWdhdGVlOwogICAgICB2YXIgbWV0aG9kID0gZGVsZWdhdGVlW21ldGhvZE5hbWVdOwoKICAgICAgLy8gVGhlIG1ldGhvZCBkb2Vzbid0IGV4aXN0IG9uIHRoZSBkZWxlZ2F0ZWUuIEluc3RlYWQsCiAgICAgIC8vIGNhbGwgdGhlIG1ldGhvZCBvbiB0aGUgZGVsZWdhdG9yLCBpZiBpdCBleGlzdHMuCiAgICAgIGlmICghbWV0aG9kKSB7CiAgICAgICAgdGFyZ2V0ID0gZGVsZWdhdG9yOwogICAgICAgIG1ldGhvZCA9IGluaGVyaXRlZDsKICAgICAgfQoKICAgICAgaWYgKG1ldGhvZCkgewogICAgICAgIHJldHVybiBtZXRob2QuYXBwbHkodGFyZ2V0LCBhcmd1bWVudHMpOwogICAgICB9CiAgICB9OwogIH0KCiAgLy8gSW1wbGVtZW50IGEgdmFndWUgZmFjc2ltaWxpZSBvZiBqUXVlcnkncyBkYXRhIG1ldGhvZAogIGZ1bmN0aW9uIGVsZW1lbnREYXRhKGVsLCBuYW1lLCB2YWx1ZSkgewogICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT0gMikgewogICAgICByZXR1cm4gZWxbImh0bWx3aWRnZXRfZGF0YV8iICsgbmFtZV07CiAgICB9IGVsc2UgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT0gMykgewogICAgICBlbFsiaHRtbHdpZGdldF9kYXRhXyIgKyBuYW1lXSA9IHZhbHVlOwogICAgICByZXR1cm4gZWw7CiAgICB9IGVsc2UgewogICAgICB0aHJvdyBuZXcgRXJyb3IoIldyb25nIG51bWJlciBvZiBhcmd1bWVudHMgZm9yIGVsZW1lbnREYXRhOiAiICsKICAgICAgICBhcmd1bWVudHMubGVuZ3RoKTsKICAgIH0KICB9CgogIC8vIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMzQ0NjE3MC9lc2NhcGUtc3RyaW5nLWZvci11c2UtaW4tamF2YXNjcmlwdC1yZWdleAogIGZ1bmN0aW9uIGVzY2FwZVJlZ0V4cChzdHIpIHsKICAgIHJldHVybiBzdHIucmVwbGFjZSgvW1wtXFtcXVwvXHtcfVwoXClcKlwrXD9cLlxcXF5cJFx8XS9nLCAiXFwkJiIpOwogIH0KCiAgZnVuY3Rpb24gaGFzQ2xhc3MoZWwsIGNsYXNzTmFtZSkgewogICAgdmFyIHJlID0gbmV3IFJlZ0V4cCgiXFxiIiArIGVzY2FwZVJlZ0V4cChjbGFzc05hbWUpICsgIlxcYiIpOwogICAgcmV0dXJuIHJlLnRlc3QoZWwuY2xhc3NOYW1lKTsKICB9CgogIC8vIGVsZW1lbnRzIC0gYXJyYXkgKG9yIGFycmF5LWxpa2Ugb2JqZWN0KSBvZiBIVE1MIGVsZW1lbnRzCiAgLy8gY2xhc3NOYW1lIC0gY2xhc3MgbmFtZSB0byB0ZXN0IGZvcgogIC8vIGluY2x1ZGUgLSBpZiB0cnVlLCBvbmx5IHJldHVybiBlbGVtZW50cyB3aXRoIGdpdmVuIGNsYXNzTmFtZTsKICAvLyAgIGlmIGZhbHNlLCBvbmx5IHJldHVybiBlbGVtZW50cyAqd2l0aG91dCogZ2l2ZW4gY2xhc3NOYW1lCiAgZnVuY3Rpb24gZmlsdGVyQnlDbGFzcyhlbGVtZW50cywgY2xhc3NOYW1lLCBpbmNsdWRlKSB7CiAgICB2YXIgcmVzdWx0cyA9IFtdOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlbGVtZW50cy5sZW5ndGg7IGkrKykgewogICAgICBpZiAoaGFzQ2xhc3MoZWxlbWVudHNbaV0sIGNsYXNzTmFtZSkgPT0gaW5jbHVkZSkKICAgICAgICByZXN1bHRzLnB1c2goZWxlbWVudHNbaV0pOwogICAgfQogICAgcmV0dXJuIHJlc3VsdHM7CiAgfQoKICBmdW5jdGlvbiBvbihvYmosIGV2ZW50TmFtZSwgZnVuYykgewogICAgaWYgKG9iai5hZGRFdmVudExpc3RlbmVyKSB7CiAgICAgIG9iai5hZGRFdmVudExpc3RlbmVyKGV2ZW50TmFtZSwgZnVuYywgZmFsc2UpOwogICAgfSBlbHNlIGlmIChvYmouYXR0YWNoRXZlbnQpIHsKICAgICAgb2JqLmF0dGFjaEV2ZW50KGV2ZW50TmFtZSwgZnVuYyk7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBvZmYob2JqLCBldmVudE5hbWUsIGZ1bmMpIHsKICAgIGlmIChvYmoucmVtb3ZlRXZlbnRMaXN0ZW5lcikKICAgICAgb2JqLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCBmdW5jLCBmYWxzZSk7CiAgICBlbHNlIGlmIChvYmouZGV0YWNoRXZlbnQpIHsKICAgICAgb2JqLmRldGFjaEV2ZW50KGV2ZW50TmFtZSwgZnVuYyk7CiAgICB9CiAgfQoKICAvLyBUcmFuc2xhdGUgYXJyYXkgb2YgdmFsdWVzIHRvIHRvcC9yaWdodC9ib3R0b20vbGVmdCwgYXMgdXN1YWwgd2l0aAogIC8vIHRoZSAicGFkZGluZyIgQ1NTIHByb3BlcnR5CiAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQ1NTL3BhZGRpbmcKICBmdW5jdGlvbiB1bnBhY2tQYWRkaW5nKHZhbHVlKSB7CiAgICBpZiAodHlwZW9mKHZhbHVlKSA9PT0gIm51bWJlciIpCiAgICAgIHZhbHVlID0gW3ZhbHVlXTsKICAgIGlmICh2YWx1ZS5sZW5ndGggPT09IDEpIHsKICAgICAgcmV0dXJuIHt0b3A6IHZhbHVlWzBdLCByaWdodDogdmFsdWVbMF0sIGJvdHRvbTogdmFsdWVbMF0sIGxlZnQ6IHZhbHVlWzBdfTsKICAgIH0KICAgIGlmICh2YWx1ZS5sZW5ndGggPT09IDIpIHsKICAgICAgcmV0dXJuIHt0b3A6IHZhbHVlWzBdLCByaWdodDogdmFsdWVbMV0sIGJvdHRvbTogdmFsdWVbMF0sIGxlZnQ6IHZhbHVlWzFdfTsKICAgIH0KICAgIGlmICh2YWx1ZS5sZW5ndGggPT09IDMpIHsKICAgICAgcmV0dXJuIHt0b3A6IHZhbHVlWzBdLCByaWdodDogdmFsdWVbMV0sIGJvdHRvbTogdmFsdWVbMl0sIGxlZnQ6IHZhbHVlWzFdfTsKICAgIH0KICAgIGlmICh2YWx1ZS5sZW5ndGggPT09IDQpIHsKICAgICAgcmV0dXJuIHt0b3A6IHZhbHVlWzBdLCByaWdodDogdmFsdWVbMV0sIGJvdHRvbTogdmFsdWVbMl0sIGxlZnQ6IHZhbHVlWzNdfTsKICAgIH0KICB9CgogIC8vIENvbnZlcnQgYW4gdW5wYWNrZWQgcGFkZGluZyBvYmplY3QgdG8gYSBDU1MgdmFsdWUKICBmdW5jdGlvbiBwYWRkaW5nVG9Dc3MocGFkZGluZ09iaikgewogICAgcmV0dXJuIHBhZGRpbmdPYmoudG9wICsgInB4ICIgKyBwYWRkaW5nT2JqLnJpZ2h0ICsgInB4ICIgKyBwYWRkaW5nT2JqLmJvdHRvbSArICJweCAiICsgcGFkZGluZ09iai5sZWZ0ICsgInB4IjsKICB9CgogIC8vIE1ha2VzIGEgbnVtYmVyIHN1aXRhYmxlIGZvciBDU1MKICBmdW5jdGlvbiBweCh4KSB7CiAgICBpZiAodHlwZW9mKHgpID09PSAibnVtYmVyIikKICAgICAgcmV0dXJuIHggKyAicHgiOwogICAgZWxzZQogICAgICByZXR1cm4geDsKICB9CgogIC8vIFJldHJpZXZlcyBydW50aW1lIHdpZGdldCBzaXppbmcgaW5mb3JtYXRpb24gZm9yIGFuIGVsZW1lbnQuCiAgLy8gVGhlIHJldHVybiB2YWx1ZSBpcyBlaXRoZXIgbnVsbCwgb3IgYW4gb2JqZWN0IHdpdGggZmlsbCwgcGFkZGluZywKICAvLyBkZWZhdWx0V2lkdGgsIGRlZmF1bHRIZWlnaHQgZmllbGRzLgogIGZ1bmN0aW9uIHNpemluZ1BvbGljeShlbCkgewogICAgdmFyIHNpemluZ0VsID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcigic2NyaXB0W2RhdGEtZm9yPSciICsgZWwuaWQgKyAiJ11bdHlwZT0nYXBwbGljYXRpb24vaHRtbHdpZGdldC1zaXppbmcnXSIpOwogICAgaWYgKCFzaXppbmdFbCkKICAgICAgcmV0dXJuIG51bGw7CiAgICB2YXIgc3AgPSBKU09OLnBhcnNlKHNpemluZ0VsLnRleHRDb250ZW50IHx8IHNpemluZ0VsLnRleHQgfHwgInt9Iik7CiAgICBpZiAodmlld2VyTW9kZSkgewogICAgICByZXR1cm4gc3Audmlld2VyOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIHNwLmJyb3dzZXI7CiAgICB9CiAgfQoKICAvLyBAcGFyYW0gdGFza3MgQXJyYXkgb2Ygc3RyaW5ncyAob3IgZmFsc3kgdmFsdWUsIGluIHdoaWNoIGNhc2Ugbm8tb3ApLgogIC8vICAgRWFjaCBlbGVtZW50IG11c3QgYmUgYSB2YWxpZCBKYXZhU2NyaXB0IGV4cHJlc3Npb24gdGhhdCB5aWVsZHMgYQogIC8vICAgZnVuY3Rpb24uCiAgLy8gQHBhcmFtIHRhcmdldCBUaGUgb2JqZWN0IHRoYXQgd2lsbCBiZSAidGhpcyIgZm9yIGVhY2ggZnVuY3Rpb24KICAvLyAgIGV4ZWN1dGlvbi4KICAvLyBAcGFyYW0gYXJncyBBcnJheSBvZiBhcmd1bWVudHMgdG8gYmUgcGFzc2VkIHRvIHRoZSBmdW5jdGlvbnMuIChUaGUKICAvLyAgIHNhbWUgYXJndW1lbnRzIHdpbGwgYmUgcGFzc2VkIHRvIGFsbCBmdW5jdGlvbnMuKQogIGZ1bmN0aW9uIGV2YWxBbmRSdW4odGFza3MsIHRhcmdldCwgYXJncykgewogICAgaWYgKHRhc2tzKSB7CiAgICAgIGZvckVhY2godGFza3MsIGZ1bmN0aW9uKHRhc2spIHsKICAgICAgICB2YXIgdGFza0Z1bmMgPSBldmFsKCIoIiArIHRhc2sgKyAiKSIpOwogICAgICAgIGlmICh0eXBlb2YodGFza0Z1bmMpICE9PSAiZnVuY3Rpb24iKSB7CiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIlRhc2sgbXVzdCBiZSBhIGZ1bmN0aW9uISBTb3VyY2U6XG4iICsgdGFzayk7CiAgICAgICAgfQogICAgICAgIHRhc2tGdW5jLmFwcGx5KHRhcmdldCwgYXJncyk7CiAgICAgIH0pOwogICAgfQogIH0KCiAgZnVuY3Rpb24gaW5pdFNpemluZyhlbCkgewogICAgdmFyIHNpemluZyA9IHNpemluZ1BvbGljeShlbCk7CiAgICBpZiAoIXNpemluZykKICAgICAgcmV0dXJuOwoKICAgIHZhciBjZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiaHRtbHdpZGdldF9jb250YWluZXIiKTsKICAgIGlmICghY2VsKQogICAgICByZXR1cm47CgogICAgaWYgKHR5cGVvZihzaXppbmcucGFkZGluZykgIT09ICJ1bmRlZmluZWQiKSB7CiAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUubWFyZ2luID0gIjAiOwogICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLnBhZGRpbmcgPSBwYWRkaW5nVG9Dc3ModW5wYWNrUGFkZGluZyhzaXppbmcucGFkZGluZykpOwogICAgfQoKICAgIGlmIChzaXppbmcuZmlsbCkgewogICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93ID0gImhpZGRlbiI7CiAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUud2lkdGggPSAiMTAwJSI7CiAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUuaGVpZ2h0ID0gIjEwMCUiOwogICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGUud2lkdGggPSAiMTAwJSI7CiAgICAgIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZS5oZWlnaHQgPSAiMTAwJSI7CiAgICAgIGlmIChjZWwpIHsKICAgICAgICBjZWwuc3R5bGUucG9zaXRpb24gPSAiYWJzb2x1dGUiOwogICAgICAgIHZhciBwYWQgPSB1bnBhY2tQYWRkaW5nKHNpemluZy5wYWRkaW5nKTsKICAgICAgICBjZWwuc3R5bGUudG9wID0gcGFkLnRvcCArICJweCI7CiAgICAgICAgY2VsLnN0eWxlLnJpZ2h0ID0gcGFkLnJpZ2h0ICsgInB4IjsKICAgICAgICBjZWwuc3R5bGUuYm90dG9tID0gcGFkLmJvdHRvbSArICJweCI7CiAgICAgICAgY2VsLnN0eWxlLmxlZnQgPSBwYWQubGVmdCArICJweCI7CiAgICAgICAgZWwuc3R5bGUud2lkdGggPSAiMTAwJSI7CiAgICAgICAgZWwuc3R5bGUuaGVpZ2h0ID0gIjEwMCUiOwogICAgICB9CgogICAgICByZXR1cm4gewogICAgICAgIGdldFdpZHRoOiBmdW5jdGlvbigpIHsgcmV0dXJuIGNlbC5vZmZzZXRXaWR0aDsgfSwKICAgICAgICBnZXRIZWlnaHQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gY2VsLm9mZnNldEhlaWdodDsgfQogICAgICB9OwoKICAgIH0gZWxzZSB7CiAgICAgIGVsLnN0eWxlLndpZHRoID0gcHgoc2l6aW5nLndpZHRoKTsKICAgICAgZWwuc3R5bGUuaGVpZ2h0ID0gcHgoc2l6aW5nLmhlaWdodCk7CgogICAgICByZXR1cm4gewogICAgICAgIGdldFdpZHRoOiBmdW5jdGlvbigpIHsgcmV0dXJuIGVsLm9mZnNldFdpZHRoOyB9LAogICAgICAgIGdldEhlaWdodDogZnVuY3Rpb24oKSB7IHJldHVybiBlbC5vZmZzZXRIZWlnaHQ7IH0KICAgICAgfTsKICAgIH0KICB9CgogIC8vIERlZmF1bHQgaW1wbGVtZW50YXRpb25zIGZvciBtZXRob2RzCiAgdmFyIGRlZmF1bHRzID0gewogICAgZmluZDogZnVuY3Rpb24oc2NvcGUpIHsKICAgICAgcmV0dXJuIHF1ZXJ5U2VsZWN0b3JBbGwoc2NvcGUsICIuIiArIHRoaXMubmFtZSk7CiAgICB9LAogICAgcmVuZGVyRXJyb3I6IGZ1bmN0aW9uKGVsLCBlcnIpIHsKICAgICAgdmFyICRlbCA9ICQoZWwpOwoKICAgICAgdGhpcy5jbGVhckVycm9yKGVsKTsKCiAgICAgIC8vIEFkZCBhbGwgdGhlc2UgZXJyb3IgY2xhc3NlcywgYXMgU2hpbnkgZG9lcwogICAgICB2YXIgZXJyQ2xhc3MgPSAic2hpbnktb3V0cHV0LWVycm9yIjsKICAgICAgaWYgKGVyci50eXBlICE9PSBudWxsKSB7CiAgICAgICAgLy8gdXNlIHRoZSBjbGFzc2VzIG9mIHRoZSBlcnJvciBjb25kaXRpb24gYXMgQ1NTIGNsYXNzIG5hbWVzCiAgICAgICAgZXJyQ2xhc3MgPSBlcnJDbGFzcyArICIgIiArICQubWFwKGFzQXJyYXkoZXJyLnR5cGUpLCBmdW5jdGlvbih0eXBlKSB7CiAgICAgICAgICByZXR1cm4gZXJyQ2xhc3MgKyAiLSIgKyB0eXBlOwogICAgICAgIH0pLmpvaW4oIiAiKTsKICAgICAgfQogICAgICBlcnJDbGFzcyA9IGVyckNsYXNzICsgIiBodG1sd2lkZ2V0cy1lcnJvciI7CgogICAgICAvLyBJcyBlbCBpbmxpbmUgb3IgYmxvY2s/IElmIGlubGluZSBvciBpbmxpbmUtYmxvY2ssIGp1c3QgZGlzcGxheTpub25lIGl0CiAgICAgIC8vIGFuZCBhZGQgYW4gaW5saW5lIGVycm9yLgogICAgICB2YXIgZGlzcGxheSA9ICRlbC5jc3MoImRpc3BsYXkiKTsKICAgICAgJGVsLmRhdGEoInJlc3RvcmUtZGlzcGxheS1tb2RlIiwgZGlzcGxheSk7CgogICAgICBpZiAoZGlzcGxheSA9PT0gImlubGluZSIgfHwgZGlzcGxheSA9PT0gImlubGluZS1ibG9jayIpIHsKICAgICAgICAkZWwuaGlkZSgpOwogICAgICAgIGlmIChlcnIubWVzc2FnZSAhPT0gIiIpIHsKICAgICAgICAgIHZhciBlcnJvclNwYW4gPSAkKCI8c3Bhbj4iKS5hZGRDbGFzcyhlcnJDbGFzcyk7CiAgICAgICAgICBlcnJvclNwYW4udGV4dChlcnIubWVzc2FnZSk7CiAgICAgICAgICAkZWwuYWZ0ZXIoZXJyb3JTcGFuKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAoZGlzcGxheSA9PT0gImJsb2NrIikgewogICAgICAgIC8vIElmIGJsb2NrLCBhZGQgYW4gZXJyb3IganVzdCBhZnRlciB0aGUgZWwsIHNldCB2aXNpYmlsaXR5Om5vbmUgb24gdGhlCiAgICAgICAgLy8gZWwsIGFuZCBwb3NpdGlvbiB0aGUgZXJyb3IgdG8gYmUgb24gdG9wIG9mIHRoZSBlbC4KICAgICAgICAvLyBNYXJrIGl0IHdpdGggYSB1bmlxdWUgSUQgYW5kIENTUyBjbGFzcyBzbyB3ZSBjYW4gcmVtb3ZlIGl0IGxhdGVyLgogICAgICAgICRlbC5jc3MoInZpc2liaWxpdHkiLCAiaGlkZGVuIik7CiAgICAgICAgaWYgKGVyci5tZXNzYWdlICE9PSAiIikgewogICAgICAgICAgdmFyIGVycm9yRGl2ID0gJCgiPGRpdj4iKS5hZGRDbGFzcyhlcnJDbGFzcykuY3NzKCJwb3NpdGlvbiIsICJhYnNvbHV0ZSIpCiAgICAgICAgICAgIC5jc3MoInRvcCIsIGVsLm9mZnNldFRvcCkKICAgICAgICAgICAgLmNzcygibGVmdCIsIGVsLm9mZnNldExlZnQpCiAgICAgICAgICAgIC8vIHNldHRpbmcgd2lkdGggY2FuIHB1c2ggb3V0IHRoZSBwYWdlIHNpemUsIGZvcmNpbmcgb3RoZXJ3aXNlCiAgICAgICAgICAgIC8vIHVubmVjZXNzYXJ5IHNjcm9sbGJhcnMgdG8gYXBwZWFyIGFuZCBtYWtpbmcgaXQgaW1wb3NzaWJsZSBmb3IKICAgICAgICAgICAgLy8gdGhlIGVsZW1lbnQgdG8gc2hyaW5rOyBzbyB1c2UgbWF4LXdpZHRoIGluc3RlYWQKICAgICAgICAgICAgLmNzcygibWF4V2lkdGgiLCBlbC5vZmZzZXRXaWR0aCkKICAgICAgICAgICAgLmNzcygiaGVpZ2h0IiwgZWwub2Zmc2V0SGVpZ2h0KTsKICAgICAgICAgIGVycm9yRGl2LnRleHQoZXJyLm1lc3NhZ2UpOwogICAgICAgICAgJGVsLmFmdGVyKGVycm9yRGl2KTsKCiAgICAgICAgICAvLyBSZWFsbHkgZHVtYiB3YXkgdG8ga2VlcCB0aGUgc2l6ZS9wb3NpdGlvbiBvZiB0aGUgZXJyb3IgaW4gc3luYyB3aXRoCiAgICAgICAgICAvLyB0aGUgcGFyZW50IGVsZW1lbnQgYXMgdGhlIHdpbmRvdyBpcyByZXNpemVkIG9yIHdoYXRldmVyLgogICAgICAgICAgdmFyIGludElkID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIGlmICghZXJyb3JEaXZbMF0ucGFyZW50RWxlbWVudCkgewogICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoaW50SWQpOwogICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgICBlcnJvckRpdgogICAgICAgICAgICAgIC5jc3MoInRvcCIsIGVsLm9mZnNldFRvcCkKICAgICAgICAgICAgICAuY3NzKCJsZWZ0IiwgZWwub2Zmc2V0TGVmdCkKICAgICAgICAgICAgICAuY3NzKCJtYXhXaWR0aCIsIGVsLm9mZnNldFdpZHRoKQogICAgICAgICAgICAgIC5jc3MoImhlaWdodCIsIGVsLm9mZnNldEhlaWdodCk7CiAgICAgICAgICB9LCA1MDApOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIGNsZWFyRXJyb3I6IGZ1bmN0aW9uKGVsKSB7CiAgICAgIHZhciAkZWwgPSAkKGVsKTsKICAgICAgdmFyIGRpc3BsYXkgPSAkZWwuZGF0YSgicmVzdG9yZS1kaXNwbGF5LW1vZGUiKTsKICAgICAgJGVsLmRhdGEoInJlc3RvcmUtZGlzcGxheS1tb2RlIiwgbnVsbCk7CgogICAgICBpZiAoZGlzcGxheSA9PT0gImlubGluZSIgfHwgZGlzcGxheSA9PT0gImlubGluZS1ibG9jayIpIHsKICAgICAgICBpZiAoZGlzcGxheSkKICAgICAgICAgICRlbC5jc3MoImRpc3BsYXkiLCBkaXNwbGF5KTsKICAgICAgICAkKGVsLm5leHRTaWJsaW5nKS5maWx0ZXIoIi5odG1sd2lkZ2V0cy1lcnJvciIpLnJlbW92ZSgpOwogICAgICB9IGVsc2UgaWYgKGRpc3BsYXkgPT09ICJibG9jayIpewogICAgICAgICRlbC5jc3MoInZpc2liaWxpdHkiLCAiaW5oZXJpdCIpOwogICAgICAgICQoZWwubmV4dFNpYmxpbmcpLmZpbHRlcigiLmh0bWx3aWRnZXRzLWVycm9yIikucmVtb3ZlKCk7CiAgICAgIH0KICAgIH0sCiAgICBzaXppbmc6IHt9CiAgfTsKCiAgLy8gQ2FsbGVkIGJ5IHdpZGdldCBiaW5kaW5ncyB0byByZWdpc3RlciBhIG5ldyB0eXBlIG9mIHdpZGdldC4gVGhlIGRlZmluaXRpb24KICAvLyBvYmplY3QgY2FuIGNvbnRhaW4gdGhlIGZvbGxvd2luZyBwcm9wZXJ0aWVzOgogIC8vIC0gbmFtZSAocmVxdWlyZWQpIC0gQSBzdHJpbmcgaW5kaWNhdGluZyB0aGUgYmluZGluZyBuYW1lLCB3aGljaCB3aWxsIGJlCiAgLy8gICB1c2VkIGJ5IGRlZmF1bHQgYXMgdGhlIENTUyBjbGFzc25hbWUgdG8gbG9vayBmb3IuCiAgLy8gLSBpbml0aWFsaXplIChvcHRpb25hbCkgLSBBIGZ1bmN0aW9uKGVsKSB0aGF0IHdpbGwgYmUgY2FsbGVkIG9uY2UgcGVyCiAgLy8gICB3aWRnZXQgZWxlbWVudDsgaWYgYSB2YWx1ZSBpcyByZXR1cm5lZCwgaXQgd2lsbCBiZSBwYXNzZWQgYXMgdGhlIHRoaXJkCiAgLy8gICB2YWx1ZSB0byByZW5kZXJWYWx1ZS4KICAvLyAtIHJlbmRlclZhbHVlIChyZXF1aXJlZCkgLSBBIGZ1bmN0aW9uKGVsLCBkYXRhLCBpbml0VmFsdWUpIHRoYXQgd2lsbCBiZQogIC8vICAgY2FsbGVkIHdpdGggZGF0YS4gU3RhdGljIGNvbnRleHRzIHdpbGwgY2F1c2UgdGhpcyB0byBiZSBjYWxsZWQgb25jZSBwZXIKICAvLyAgIGVsZW1lbnQ7IFNoaW55IGFwcHMgd2lsbCBjYXVzZSB0aGlzIHRvIGJlIGNhbGxlZCBtdWx0aXBsZSB0aW1lcyBwZXIKICAvLyAgIGVsZW1lbnQsIGFzIHRoZSBkYXRhIGNoYW5nZXMuCiAgd2luZG93LkhUTUxXaWRnZXRzLndpZGdldCA9IGZ1bmN0aW9uKGRlZmluaXRpb24pIHsKICAgIGlmICghZGVmaW5pdGlvbi5uYW1lKSB7CiAgICAgIHRocm93IG5ldyBFcnJvcigiV2lkZ2V0IG11c3QgaGF2ZSBhIG5hbWUiKTsKICAgIH0KICAgIGlmICghZGVmaW5pdGlvbi50eXBlKSB7CiAgICAgIHRocm93IG5ldyBFcnJvcigiV2lkZ2V0IG11c3QgaGF2ZSBhIHR5cGUiKTsKICAgIH0KICAgIC8vIEN1cnJlbnRseSB3ZSBvbmx5IHN1cHBvcnQgb3V0cHV0IHdpZGdldHMKICAgIGlmIChkZWZpbml0aW9uLnR5cGUgIT09ICJvdXRwdXQiKSB7CiAgICAgIHRocm93IG5ldyBFcnJvcigiVW5yZWNvZ25pemVkIHdpZGdldCB0eXBlICciICsgZGVmaW5pdGlvbi50eXBlICsgIiciKTsKICAgIH0KICAgIC8vIFRPRE86IFZlcmlmeSB0aGF0IC5uYW1lIGlzIGEgdmFsaWQgQ1NTIGNsYXNzbmFtZQoKICAgIC8vIFN1cHBvcnQgbmV3LXN0eWxlIGluc3RhbmNlLWJvdW5kIGRlZmluaXRpb25zLiBPbGQtc3R5bGUgY2xhc3MtYm91bmQKICAgIC8vIGRlZmluaXRpb25zIGhhdmUgb25lIHdpZGdldCAib2JqZWN0IiBwZXIgd2lkZ2V0IHBlciB0eXBlL2NsYXNzIG9mCiAgICAvLyB3aWRnZXQ7IHRoZSByZW5kZXJWYWx1ZSBhbmQgcmVzaXplIG1ldGhvZHMgb24gc3VjaCB3aWRnZXQgb2JqZWN0cwogICAgLy8gdGFrZSBlbCBhbmQgaW5zdGFuY2UgYXJndW1lbnRzLCBiZWNhdXNlIHRoZSB3aWRnZXQgb2JqZWN0IGNhbid0CiAgICAvLyBzdG9yZSB0aGVtLiBOZXctc3R5bGUgaW5zdGFuY2UtYm91bmQgZGVmaW5pdGlvbnMgaGF2ZSBvbmUgd2lkZ2V0CiAgICAvLyBvYmplY3QgcGVyIHdpZGdldCBpbnN0YW5jZTsgdGhlIGRlZmluaXRpb24gdGhhdCdzIHBhc3NlZCBpbiBkb2Vzbid0CiAgICAvLyBwcm92aWRlIHJlbmRlclZhbHVlIG9yIHJlc2l6ZSBtZXRob2RzIGF0IGFsbCwganVzdCB0aGUgc2luZ2xlIG1ldGhvZAogICAgLy8gICBmYWN0b3J5KGVsLCB3aWR0aCwgaGVpZ2h0KQogICAgLy8gd2hpY2ggcmV0dXJucyBhbiBvYmplY3QgdGhhdCBoYXMgcmVuZGVyVmFsdWUoeCkgYW5kIHJlc2l6ZSh3LCBoKS4KICAgIC8vIFRoaXMgZW5hYmxlcyBhIGZhciBtb3JlIG5hdHVyYWwgcHJvZ3JhbW1pbmcgc3R5bGUgZm9yIHRoZSB3aWRnZXQKICAgIC8vIGF1dGhvciwgd2hvIGNhbiBzdG9yZSBwZXItaW5zdGFuY2Ugc3RhdGUgdXNpbmcgZWl0aGVyIE9PLXN0eWxlCiAgICAvLyBpbnN0YW5jZSBmaWVsZHMgb3IgZnVuY3Rpb25hbC1zdHlsZSBjbG9zdXJlIHZhcmlhYmxlcyAoSSBndWVzcyB0aGlzCiAgICAvLyBpcyBpbiBjb250cmFzdCB0byB3aGF0IGNhbiBvbmx5IGJlIGNhbGxlZCBDLXN0eWxlIHBzZXVkby1PTyB3aGljaCBpcwogICAgLy8gd2hhdCB3ZSByZXF1aXJlZCBiZWZvcmUpLgogICAgaWYgKGRlZmluaXRpb24uZmFjdG9yeSkgewogICAgICBkZWZpbml0aW9uID0gY3JlYXRlTGVnYWN5RGVmaW5pdGlvbkFkYXB0ZXIoZGVmaW5pdGlvbik7CiAgICB9CgogICAgaWYgKCFkZWZpbml0aW9uLnJlbmRlclZhbHVlKSB7CiAgICAgIHRocm93IG5ldyBFcnJvcigiV2lkZ2V0IG11c3QgaGF2ZSBhIHJlbmRlclZhbHVlIGZ1bmN0aW9uIik7CiAgICB9CgogICAgLy8gRm9yIHN0YXRpYyByZW5kZXJpbmcgKG5vbi1TaGlueSksIHVzZSBhIHNpbXBsZSB3aWRnZXQgcmVnaXN0cmF0aW9uCiAgICAvLyBzY2hlbWUuIFdlIGFsc28gdXNlIHRoaXMgc2NoZW1lIGZvciBTaGlueSBhcHBzL2RvY3VtZW50cyB0aGF0IGFsc28KICAgIC8vIGNvbnRhaW4gc3RhdGljIHdpZGdldHMuCiAgICB3aW5kb3cuSFRNTFdpZGdldHMud2lkZ2V0cyA9IHdpbmRvdy5IVE1MV2lkZ2V0cy53aWRnZXRzIHx8IFtdOwogICAgLy8gTWVyZ2UgZGVmYXVsdHMgaW50byB0aGUgZGVmaW5pdGlvbjsgZG9uJ3QgbXV0YXRlIHRoZSBvcmlnaW5hbCBkZWZpbml0aW9uLgogICAgdmFyIHN0YXRpY0JpbmRpbmcgPSBleHRlbmQoe30sIGRlZmF1bHRzLCBkZWZpbml0aW9uKTsKICAgIG92ZXJyaWRlTWV0aG9kKHN0YXRpY0JpbmRpbmcsICJmaW5kIiwgZnVuY3Rpb24oc3VwZXJmdW5jKSB7CiAgICAgIHJldHVybiBmdW5jdGlvbihzY29wZSkgewogICAgICAgIHZhciByZXN1bHRzID0gc3VwZXJmdW5jKHNjb3BlKTsKICAgICAgICAvLyBGaWx0ZXIgb3V0IFNoaW55IG91dHB1dHMsIHdlIG9ubHkgd2FudCB0aGUgc3RhdGljIGtpbmQKICAgICAgICByZXR1cm4gZmlsdGVyQnlDbGFzcyhyZXN1bHRzLCAiaHRtbC13aWRnZXQtb3V0cHV0IiwgZmFsc2UpOwogICAgICB9OwogICAgfSk7CiAgICB3aW5kb3cuSFRNTFdpZGdldHMud2lkZ2V0cy5wdXNoKHN0YXRpY0JpbmRpbmcpOwoKICAgIGlmIChzaGlueU1vZGUpIHsKICAgICAgLy8gU2hpbnkgaXMgcnVubmluZy4gUmVnaXN0ZXIgdGhlIGRlZmluaXRpb24gd2l0aCBhbiBvdXRwdXQgYmluZGluZy4KICAgICAgLy8gVGhlIGRlZmluaXRpb24gaXRzZWxmIHdpbGwgbm90IGJlIHRoZSBvdXRwdXQgYmluZGluZywgaW5zdGVhZAogICAgICAvLyB3ZSB3aWxsIG1ha2UgYW4gb3V0cHV0IGJpbmRpbmcgb2JqZWN0IHRoYXQgZGVsZWdhdGVzIHRvIHRoZQogICAgICAvLyBkZWZpbml0aW9uLiBUaGlzIGlzIGJlY2F1c2Ugd2UgZm9vbGlzaGx5IHVzZWQgdGhlIHNhbWUgbWV0aG9kCiAgICAgIC8vIG5hbWUgKHJlbmRlclZhbHVlKSBmb3IgaHRtbHdpZGdldHMgZGVmaW5pdGlvbiBhbmQgU2hpbnkgYmluZGluZ3MKICAgICAgLy8gYnV0IHRoZXkgYWN0dWFsbHkgaGF2ZSBxdWl0ZSBkaWZmZXJlbnQgc2VtYW50aWNzICh0aGUgU2hpbnkKICAgICAgLy8gYmluZGluZ3MgcmVjZWl2ZSBkYXRhIHRoYXQgaW5jbHVkZXMgbG90cyBvZiBtZXRhZGF0YSB0aGF0IGl0CiAgICAgIC8vIHN0cmlwcyBvZmYgYmVmb3JlIGNhbGxpbmcgaHRtbHdpZGdldHMgcmVuZGVyVmFsdWUpLiBXZSBjYW4ndAogICAgICAvLyBqdXN0IGlnbm9yZSB0aGUgZGlmZmVyZW5jZSBiZWNhdXNlIGluIHNvbWUgd2lkZ2V0cyBpdCdzIGhlbHBmdWwKICAgICAgLy8gdG8gY2FsbCB0aGlzLnJlbmRlclZhbHVlKCkgZnJvbSBpbnNpZGUgb2YgcmVzaXplKCksIGFuZCBpZgogICAgICAvLyB3ZSdyZSBub3QgZGVsZWdhdGluZywgdGhlbiB0aGF0IGNhbGwgd2lsbCBnbyB0byB0aGUgU2hpbnkKICAgICAgLy8gdmVyc2lvbiBpbnN0ZWFkIG9mIHRoZSBodG1sd2lkZ2V0cyB2ZXJzaW9uLgoKICAgICAgLy8gTWVyZ2UgZGVmYXVsdHMgd2l0aCBkZWZpbml0aW9uLCB3aXRob3V0IG11dGF0aW5nIGVpdGhlci4KICAgICAgdmFyIGJpbmRpbmdEZWYgPSBleHRlbmQoe30sIGRlZmF1bHRzLCBkZWZpbml0aW9uKTsKCiAgICAgIC8vIFRoaXMgb2JqZWN0IHdpbGwgYmUgb3VyIGFjdHVhbCBTaGlueSBiaW5kaW5nLgogICAgICB2YXIgc2hpbnlCaW5kaW5nID0gbmV3IFNoaW55Lk91dHB1dEJpbmRpbmcoKTsKCiAgICAgIC8vIFdpdGggYSBmZXcgZXhjZXB0aW9ucywgd2UnbGwgd2FudCB0byBzaW1wbHkgdXNlIHRoZSBiaW5kaW5nRGVmJ3MKICAgICAgLy8gdmVyc2lvbiBvZiBtZXRob2RzIGlmIHRoZXkgYXJlIGF2YWlsYWJsZSwgb3RoZXJ3aXNlIGZhbGwgYmFjayB0bwogICAgICAvLyBTaGlueSdzIGRlZmF1bHRzLiBOT1RFOiBJZiBTaGlueSdzIG91dHB1dCBiaW5kaW5ncyBnYWluIGFkZGl0aW9uYWwKICAgICAgLy8gbWV0aG9kcyBpbiB0aGUgZnV0dXJlLCBhbmQgd2Ugd2FudCB0aGVtIHRvIGJlIG92ZXJyaWRlYWJsZSBieQogICAgICAvLyBIVE1MV2lkZ2V0IGJpbmRpbmcgZGVmaW5pdGlvbnMsIHRoZW4gd2UnbGwgbmVlZCB0byBhZGQgdGhlbSB0byB0aGlzCiAgICAgIC8vIGxpc3QuCiAgICAgIGRlbGVnYXRlTWV0aG9kKHNoaW55QmluZGluZywgYmluZGluZ0RlZiwgImdldElkIik7CiAgICAgIGRlbGVnYXRlTWV0aG9kKHNoaW55QmluZGluZywgYmluZGluZ0RlZiwgIm9uVmFsdWVDaGFuZ2UiKTsKICAgICAgZGVsZWdhdGVNZXRob2Qoc2hpbnlCaW5kaW5nLCBiaW5kaW5nRGVmLCAib25WYWx1ZUVycm9yIik7CiAgICAgIGRlbGVnYXRlTWV0aG9kKHNoaW55QmluZGluZywgYmluZGluZ0RlZiwgInJlbmRlckVycm9yIik7CiAgICAgIGRlbGVnYXRlTWV0aG9kKHNoaW55QmluZGluZywgYmluZGluZ0RlZiwgImNsZWFyRXJyb3IiKTsKICAgICAgZGVsZWdhdGVNZXRob2Qoc2hpbnlCaW5kaW5nLCBiaW5kaW5nRGVmLCAic2hvd1Byb2dyZXNzIik7CgogICAgICAvLyBUaGUgZmluZCwgcmVuZGVyVmFsdWUsIGFuZCByZXNpemUgYXJlIGhhbmRsZWQgZGlmZmVyZW50bHksIGJlY2F1c2Ugd2UKICAgICAgLy8gd2FudCB0byBhY3R1YWxseSBkZWNvcmF0ZSB0aGUgYmVoYXZpb3Igb2YgdGhlIGJpbmRpbmdEZWYgbWV0aG9kcy4KCiAgICAgIHNoaW55QmluZGluZy5maW5kID0gZnVuY3Rpb24oc2NvcGUpIHsKICAgICAgICB2YXIgcmVzdWx0cyA9IGJpbmRpbmdEZWYuZmluZChzY29wZSk7CgogICAgICAgIC8vIE9ubHkgcmV0dXJuIGVsZW1lbnRzIHRoYXQgYXJlIFNoaW55IG91dHB1dHMsIG5vdCBzdGF0aWMgb25lcwogICAgICAgIHZhciBkeW5hbWljUmVzdWx0cyA9IHJlc3VsdHMuZmlsdGVyKCIuaHRtbC13aWRnZXQtb3V0cHV0Iik7CgogICAgICAgIC8vIEl0J3MgcG9zc2libGUgdGhhdCB3aGF0ZXZlciBjYXVzZWQgU2hpbnkgdG8gdGhpbmsgdGhlcmUgbWlnaHQgYmUKICAgICAgICAvLyBuZXcgZHluYW1pYyBvdXRwdXRzLCBhbHNvIGNhdXNlZCB0aGVyZSB0byBiZSBuZXcgc3RhdGljIG91dHB1dHMuCiAgICAgICAgLy8gU2luY2UgdGhlcmUgbWlnaHQgYmUgbG90cyBvZiBkaWZmZXJlbnQgaHRtbHdpZGdldHMgYmluZGluZ3MsIHdlCiAgICAgICAgLy8gc2NoZWR1bGUgZXhlY3V0aW9uIGZvciBsYXRlci0tbm8gbmVlZCB0byBzdGF0aWNSZW5kZXIgbXVsdGlwbGUKICAgICAgICAvLyB0aW1lcy4KICAgICAgICBpZiAocmVzdWx0cy5sZW5ndGggIT09IGR5bmFtaWNSZXN1bHRzLmxlbmd0aCkKICAgICAgICAgIHNjaGVkdWxlU3RhdGljUmVuZGVyKCk7CgogICAgICAgIHJldHVybiBkeW5hbWljUmVzdWx0czsKICAgICAgfTsKCiAgICAgIC8vIFdyYXAgcmVuZGVyVmFsdWUgdG8gaGFuZGxlIGluaXRpYWxpemF0aW9uLCB3aGljaCB1bmZvcnR1bmF0ZWx5IGlzbid0CiAgICAgIC8vIHN1cHBvcnRlZCBuYXRpdmVseSBieSBTaGlueSBhdCB0aGUgdGltZSBvZiB0aGlzIHdyaXRpbmcuCgogICAgICBzaGlueUJpbmRpbmcucmVuZGVyVmFsdWUgPSBmdW5jdGlvbihlbCwgZGF0YSkgewogICAgICAgIC8vIFJlc29sdmUgc3RyaW5ncyBtYXJrZWQgYXMgamF2YXNjcmlwdCBsaXRlcmFscyB0byBvYmplY3RzCiAgICAgICAgaWYgKCEoZGF0YS5ldmFscyBpbnN0YW5jZW9mIEFycmF5KSkgZGF0YS5ldmFscyA9IFtkYXRhLmV2YWxzXTsKICAgICAgICBmb3IgKHZhciBpID0gMDsgZGF0YS5ldmFscyAmJiBpIDwgZGF0YS5ldmFscy5sZW5ndGg7IGkrKykgewogICAgICAgICAgd2luZG93LkhUTUxXaWRnZXRzLmV2YWx1YXRlU3RyaW5nTWVtYmVyKGRhdGEueCwgZGF0YS5ldmFsc1tpXSk7CiAgICAgICAgfQogICAgICAgIGlmICghYmluZGluZ0RlZi5yZW5kZXJPbk51bGxWYWx1ZSkgewogICAgICAgICAgaWYgKGRhdGEueCA9PT0gbnVsbCkgewogICAgICAgICAgICBlbC5zdHlsZS52aXNpYmlsaXR5ID0gImhpZGRlbiI7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGVsLnN0eWxlLnZpc2liaWxpdHkgPSAiaW5oZXJpdCI7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmICghZWxlbWVudERhdGEoZWwsICJpbml0aWFsaXplZCIpKSB7CiAgICAgICAgICBpbml0U2l6aW5nKGVsKTsKCiAgICAgICAgICBlbGVtZW50RGF0YShlbCwgImluaXRpYWxpemVkIiwgdHJ1ZSk7CiAgICAgICAgICBpZiAoYmluZGluZ0RlZi5pbml0aWFsaXplKSB7CiAgICAgICAgICAgIHZhciByZXN1bHQgPSBiaW5kaW5nRGVmLmluaXRpYWxpemUoZWwsIGVsLm9mZnNldFdpZHRoLAogICAgICAgICAgICAgIGVsLm9mZnNldEhlaWdodCk7CiAgICAgICAgICAgIGVsZW1lbnREYXRhKGVsLCAiaW5pdF9yZXN1bHQiLCByZXN1bHQpOwogICAgICAgICAgfQogICAgICAgICAgZXZhbEFuZFJ1bihkYXRhLmpzSG9va3MucmVuZGVyLCBlbGVtZW50RGF0YShlbCwgImluaXRfcmVzdWx0IiksIFtlbCwgZGF0YS54XSk7CiAgICAgICAgfQogICAgICAgIFNoaW55LnJlbmRlckRlcGVuZGVuY2llcyhkYXRhLmRlcHMpOwogICAgICAgIGJpbmRpbmdEZWYucmVuZGVyVmFsdWUoZWwsIGRhdGEueCwgZWxlbWVudERhdGEoZWwsICJpbml0X3Jlc3VsdCIpKTsKICAgICAgfTsKCiAgICAgIC8vIE9ubHkgb3ZlcnJpZGUgcmVzaXplIGlmIGJpbmRpbmdEZWYgaW1wbGVtZW50cyBpdAogICAgICBpZiAoYmluZGluZ0RlZi5yZXNpemUpIHsKICAgICAgICBzaGlueUJpbmRpbmcucmVzaXplID0gZnVuY3Rpb24oZWwsIHdpZHRoLCBoZWlnaHQpIHsKICAgICAgICAgIC8vIFNoaW55IGNhbiBjYWxsIHJlc2l6ZSBiZWZvcmUgaW5pdGlhbGl6ZS9yZW5kZXJWYWx1ZSBoYXZlIGJlZW4KICAgICAgICAgIC8vIGNhbGxlZCwgd2hpY2ggZG9lc24ndCBtYWtlIHNlbnNlIGZvciB3aWRnZXRzLgogICAgICAgICAgaWYgKGVsZW1lbnREYXRhKGVsLCAiaW5pdGlhbGl6ZWQiKSkgewogICAgICAgICAgICBiaW5kaW5nRGVmLnJlc2l6ZShlbCwgd2lkdGgsIGhlaWdodCwgZWxlbWVudERhdGEoZWwsICJpbml0X3Jlc3VsdCIpKTsKICAgICAgICAgIH0KICAgICAgICB9OwogICAgICB9CgogICAgICBTaGlueS5vdXRwdXRCaW5kaW5ncy5yZWdpc3RlcihzaGlueUJpbmRpbmcsIGJpbmRpbmdEZWYubmFtZSk7CiAgICB9CiAgfTsKCiAgdmFyIHNjaGVkdWxlU3RhdGljUmVuZGVyVGltZXJJZCA9IG51bGw7CiAgZnVuY3Rpb24gc2NoZWR1bGVTdGF0aWNSZW5kZXIoKSB7CiAgICBpZiAoIXNjaGVkdWxlU3RhdGljUmVuZGVyVGltZXJJZCkgewogICAgICBzY2hlZHVsZVN0YXRpY1JlbmRlclRpbWVySWQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgewogICAgICAgIHNjaGVkdWxlU3RhdGljUmVuZGVyVGltZXJJZCA9IG51bGw7CiAgICAgICAgd2luZG93LkhUTUxXaWRnZXRzLnN0YXRpY1JlbmRlcigpOwogICAgICB9LCAxKTsKICAgIH0KICB9CgogIC8vIFJlbmRlciBzdGF0aWMgd2lkZ2V0cyBhZnRlciB0aGUgZG9jdW1lbnQgZmluaXNoZXMgbG9hZGluZwogIC8vIFN0YXRpY2FsbHkgcmVuZGVyIGFsbCBlbGVtZW50cyB0aGF0IGFyZSBvZiB0aGlzIHdpZGdldCdzIGNsYXNzCiAgd2luZG93LkhUTUxXaWRnZXRzLnN0YXRpY1JlbmRlciA9IGZ1bmN0aW9uKCkgewogICAgdmFyIGJpbmRpbmdzID0gd2luZG93LkhUTUxXaWRnZXRzLndpZGdldHMgfHwgW107CiAgICBmb3JFYWNoKGJpbmRpbmdzLCBmdW5jdGlvbihiaW5kaW5nKSB7CiAgICAgIHZhciBtYXRjaGVzID0gYmluZGluZy5maW5kKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCk7CiAgICAgIGZvckVhY2gobWF0Y2hlcywgZnVuY3Rpb24oZWwpIHsKICAgICAgICB2YXIgc2l6ZU9iaiA9IGluaXRTaXppbmcoZWwsIGJpbmRpbmcpOwoKICAgICAgICBpZiAoaGFzQ2xhc3MoZWwsICJodG1sLXdpZGdldC1zdGF0aWMtYm91bmQiKSkKICAgICAgICAgIHJldHVybjsKICAgICAgICBlbC5jbGFzc05hbWUgPSBlbC5jbGFzc05hbWUgKyAiIGh0bWwtd2lkZ2V0LXN0YXRpYy1ib3VuZCI7CgogICAgICAgIHZhciBpbml0UmVzdWx0OwogICAgICAgIGlmIChiaW5kaW5nLmluaXRpYWxpemUpIHsKICAgICAgICAgIGluaXRSZXN1bHQgPSBiaW5kaW5nLmluaXRpYWxpemUoZWwsCiAgICAgICAgICAgIHNpemVPYmogPyBzaXplT2JqLmdldFdpZHRoKCkgOiBlbC5vZmZzZXRXaWR0aCwKICAgICAgICAgICAgc2l6ZU9iaiA/IHNpemVPYmouZ2V0SGVpZ2h0KCkgOiBlbC5vZmZzZXRIZWlnaHQKICAgICAgICAgICk7CiAgICAgICAgICBlbGVtZW50RGF0YShlbCwgImluaXRfcmVzdWx0IiwgaW5pdFJlc3VsdCk7CiAgICAgICAgfQoKICAgICAgICBpZiAoYmluZGluZy5yZXNpemUpIHsKICAgICAgICAgIHZhciBsYXN0U2l6ZSA9IHt9OwogICAgICAgICAgdmFyIHJlc2l6ZUhhbmRsZXIgPSBmdW5jdGlvbihlKSB7CiAgICAgICAgICAgIHZhciBzaXplID0gewogICAgICAgICAgICAgIHc6IHNpemVPYmogPyBzaXplT2JqLmdldFdpZHRoKCkgOiBlbC5vZmZzZXRXaWR0aCwKICAgICAgICAgICAgICBoOiBzaXplT2JqID8gc2l6ZU9iai5nZXRIZWlnaHQoKSA6IGVsLm9mZnNldEhlaWdodAogICAgICAgICAgICB9OwogICAgICAgICAgICBpZiAoc2l6ZS53ID09PSAwICYmIHNpemUuaCA9PT0gMCkKICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIGlmIChzaXplLncgPT09IGxhc3RTaXplLncgJiYgc2l6ZS5oID09PSBsYXN0U2l6ZS5oKQogICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgbGFzdFNpemUgPSBzaXplOwogICAgICAgICAgICBiaW5kaW5nLnJlc2l6ZShlbCwgc2l6ZS53LCBzaXplLmgsIGluaXRSZXN1bHQpOwogICAgICAgICAgfTsKCiAgICAgICAgICBvbih3aW5kb3csICJyZXNpemUiLCByZXNpemVIYW5kbGVyKTsKCiAgICAgICAgICAvLyBUaGlzIGlzIG5lZWRlZCBmb3IgY2FzZXMgd2hlcmUgd2UncmUgcnVubmluZyBpbiBhIFNoaW55CiAgICAgICAgICAvLyBhcHAsIGJ1dCB0aGUgd2lkZ2V0IGl0c2VsZiBpcyBub3QgYSBTaGlueSBvdXRwdXQsIGJ1dAogICAgICAgICAgLy8gcmF0aGVyIGEgc2ltcGxlIHN0YXRpYyB3aWRnZXQuIE9uZSBleGFtcGxlIG9mIHRoaXMgaXMKICAgICAgICAgIC8vIGFuIHJtYXJrZG93biBkb2N1bWVudCB0aGF0IGhhcyBydW50aW1lOnNoaW55IGFuZCB3aWRnZXQKICAgICAgICAgIC8vIHRoYXQgaXNuJ3QgaW4gYSByZW5kZXIgZnVuY3Rpb24uIFNoaW55IG9ubHkga25vd3MgdG8KICAgICAgICAgIC8vIGNhbGwgcmVzaXplIGhhbmRsZXJzIGZvciBTaGlueSBvdXRwdXRzLCBub3QgZm9yIHN0YXRpYwogICAgICAgICAgLy8gd2lkZ2V0cywgc28gd2UgZG8gaXQgb3Vyc2VsdmVzLgogICAgICAgICAgaWYgKHdpbmRvdy5qUXVlcnkpIHsKICAgICAgICAgICAgd2luZG93LmpRdWVyeShkb2N1bWVudCkub24oInNob3duLmh0bWx3aWRnZXRzIHNob3duLmJzLnRhYi5odG1sd2lkZ2V0cyIsIHJlc2l6ZUhhbmRsZXIpOwogICAgICAgICAgICB3aW5kb3cualF1ZXJ5KGRvY3VtZW50KS5vbigiaGlkZGVuLmh0bWx3aWRnZXRzIGhpZGRlbi5icy50YWIuaHRtbHdpZGdldHMiLCByZXNpemVIYW5kbGVyKTsKICAgICAgICAgIH0KCiAgICAgICAgICAvLyBUaGlzIGlzIG5lZWRlZCBmb3IgdGhlIHNwZWNpZmljIGNhc2Ugb2YgaW9zbGlkZXMsIHdoaWNoCiAgICAgICAgICAvLyBmbGlwcyBzbGlkZXMgYmV0d2VlbiBkaXNwbGF5Om5vbmUgYW5kIGRpc3BsYXk6YmxvY2suCiAgICAgICAgICAvLyBJZGVhbGx5IHdlIHdvdWxkIG5vdCBoYXZlIHRvIGhhdmUgaW9zbGlkZS1zcGVjaWZpYyBjb2RlCiAgICAgICAgICAvLyBoZXJlLCBidXQgcmF0aGVyIGhhdmUgaW9zbGlkZXMgcmFpc2UgYSBnZW5lcmljIGV2ZW50LAogICAgICAgICAgLy8gYnV0IHRoZSBybWFya2Rvd24gcGFja2FnZSBqdXN0IHdlbnQgdG8gQ1JBTiBzbyB0aGUKICAgICAgICAgIC8vIHdpbmRvdyB0byBnZXR0aW5nIHRoYXQgZml4ZWQgbWF5IGJlIGxvbmcuCiAgICAgICAgICBpZiAod2luZG93LmFkZEV2ZW50TGlzdGVuZXIpIHsKICAgICAgICAgICAgLy8gSXQncyBPSyB0byBsaW1pdCB0aGlzIHRvIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyCiAgICAgICAgICAgIC8vIGJyb3dzZXJzIGJlY2F1c2UgaW9zbGlkZXMgaXRzZWxmIG9ubHkgc3VwcG9ydHMKICAgICAgICAgICAgLy8gc3VjaCBicm93c2Vycy4KICAgICAgICAgICAgb24oZG9jdW1lbnQsICJzbGlkZWVudGVyIiwgcmVzaXplSGFuZGxlcik7CiAgICAgICAgICAgIG9uKGRvY3VtZW50LCAic2xpZGVsZWF2ZSIsIHJlc2l6ZUhhbmRsZXIpOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgdmFyIHNjcmlwdERhdGEgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCJzY3JpcHRbZGF0YS1mb3I9JyIgKyBlbC5pZCArICInXVt0eXBlPSdhcHBsaWNhdGlvbi9qc29uJ10iKTsKICAgICAgICBpZiAoc2NyaXB0RGF0YSkgewogICAgICAgICAgdmFyIGRhdGEgPSBKU09OLnBhcnNlKHNjcmlwdERhdGEudGV4dENvbnRlbnQgfHwgc2NyaXB0RGF0YS50ZXh0KTsKICAgICAgICAgIC8vIFJlc29sdmUgc3RyaW5ncyBtYXJrZWQgYXMgamF2YXNjcmlwdCBsaXRlcmFscyB0byBvYmplY3RzCiAgICAgICAgICBpZiAoIShkYXRhLmV2YWxzIGluc3RhbmNlb2YgQXJyYXkpKSBkYXRhLmV2YWxzID0gW2RhdGEuZXZhbHNdOwogICAgICAgICAgZm9yICh2YXIgayA9IDA7IGRhdGEuZXZhbHMgJiYgayA8IGRhdGEuZXZhbHMubGVuZ3RoOyBrKyspIHsKICAgICAgICAgICAgd2luZG93LkhUTUxXaWRnZXRzLmV2YWx1YXRlU3RyaW5nTWVtYmVyKGRhdGEueCwgZGF0YS5ldmFsc1trXSk7CiAgICAgICAgICB9CiAgICAgICAgICBiaW5kaW5nLnJlbmRlclZhbHVlKGVsLCBkYXRhLngsIGluaXRSZXN1bHQpOwogICAgICAgICAgZXZhbEFuZFJ1bihkYXRhLmpzSG9va3MucmVuZGVyLCBpbml0UmVzdWx0LCBbZWwsIGRhdGEueF0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9KTsKCiAgICBpbnZva2VQb3N0UmVuZGVySGFuZGxlcnMoKTsKICB9CgogIC8vIFdhaXQgdW50aWwgYWZ0ZXIgdGhlIGRvY3VtZW50IGhhcyBsb2FkZWQgdG8gcmVuZGVyIHRoZSB3aWRnZXRzLgogIGlmIChkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKSB7CiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCJET01Db250ZW50TG9hZGVkIiwgZnVuY3Rpb24oKSB7CiAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoIkRPTUNvbnRlbnRMb2FkZWQiLCBhcmd1bWVudHMuY2FsbGVlLCBmYWxzZSk7CiAgICAgIHdpbmRvdy5IVE1MV2lkZ2V0cy5zdGF0aWNSZW5kZXIoKTsKICAgIH0sIGZhbHNlKTsKICB9IGVsc2UgaWYgKGRvY3VtZW50LmF0dGFjaEV2ZW50KSB7CiAgICBkb2N1bWVudC5hdHRhY2hFdmVudCgib25yZWFkeXN0YXRlY2hhbmdlIiwgZnVuY3Rpb24oKSB7CiAgICAgIGlmIChkb2N1bWVudC5yZWFkeVN0YXRlID09PSAiY29tcGxldGUiKSB7CiAgICAgICAgZG9jdW1lbnQuZGV0YWNoRXZlbnQoIm9ucmVhZHlzdGF0ZWNoYW5nZSIsIGFyZ3VtZW50cy5jYWxsZWUpOwogICAgICAgIHdpbmRvdy5IVE1MV2lkZ2V0cy5zdGF0aWNSZW5kZXIoKTsKICAgICAgfQogICAgfSk7CiAgfQoKCiAgd2luZG93LkhUTUxXaWRnZXRzLmdldEF0dGFjaG1lbnRVcmwgPSBmdW5jdGlvbihkZXBuYW1lLCBrZXkpIHsKICAgIC8vIElmIG5vIGtleSwgZGVmYXVsdCB0byB0aGUgZmlyc3QgaXRlbQogICAgaWYgKHR5cGVvZihrZXkpID09PSAidW5kZWZpbmVkIikKICAgICAga2V5ID0gMTsKCiAgICB2YXIgbGluayA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGRlcG5hbWUgKyAiLSIgKyBrZXkgKyAiLWF0dGFjaG1lbnQiKTsKICAgIGlmICghbGluaykgewogICAgICB0aHJvdyBuZXcgRXJyb3IoIkF0dGFjaG1lbnQgIiArIGRlcG5hbWUgKyAiLyIgKyBrZXkgKyAiIG5vdCBmb3VuZCBpbiBkb2N1bWVudCIpOwogICAgfQogICAgcmV0dXJuIGxpbmsuZ2V0QXR0cmlidXRlKCJocmVmIik7CiAgfTsKCiAgd2luZG93LkhUTUxXaWRnZXRzLmRhdGFmcmFtZVRvRDMgPSBmdW5jdGlvbihkZikgewogICAgdmFyIG5hbWVzID0gW107CiAgICB2YXIgbGVuZ3RoOwogICAgZm9yICh2YXIgbmFtZSBpbiBkZikgewogICAgICAgIGlmIChkZi5oYXNPd25Qcm9wZXJ0eShuYW1lKSkKICAgICAgICAgICAgbmFtZXMucHVzaChuYW1lKTsKICAgICAgICBpZiAodHlwZW9mKGRmW25hbWVdKSAhPT0gIm9iamVjdCIgfHwgdHlwZW9mKGRmW25hbWVdLmxlbmd0aCkgPT09ICJ1bmRlZmluZWQiKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigiQWxsIGZpZWxkcyBtdXN0IGJlIGFycmF5cyIpOwogICAgICAgIH0gZWxzZSBpZiAodHlwZW9mKGxlbmd0aCkgIT09ICJ1bmRlZmluZWQiICYmIGxlbmd0aCAhPT0gZGZbbmFtZV0ubGVuZ3RoKSB7CiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigiQWxsIGZpZWxkcyBtdXN0IGJlIGFycmF5cyBvZiB0aGUgc2FtZSBsZW5ndGgiKTsKICAgICAgICB9CiAgICAgICAgbGVuZ3RoID0gZGZbbmFtZV0ubGVuZ3RoOwogICAgfQogICAgdmFyIHJlc3VsdHMgPSBbXTsKICAgIHZhciBpdGVtOwogICAgZm9yICh2YXIgcm93ID0gMDsgcm93IDwgbGVuZ3RoOyByb3crKykgewogICAgICAgIGl0ZW0gPSB7fTsKICAgICAgICBmb3IgKHZhciBjb2wgPSAwOyBjb2wgPCBuYW1lcy5sZW5ndGg7IGNvbCsrKSB7CiAgICAgICAgICAgIGl0ZW1bbmFtZXNbY29sXV0gPSBkZltuYW1lc1tjb2xdXVtyb3ddOwogICAgICAgIH0KICAgICAgICByZXN1bHRzLnB1c2goaXRlbSk7CiAgICB9CiAgICByZXR1cm4gcmVzdWx0czsKICB9OwoKICB3aW5kb3cuSFRNTFdpZGdldHMudHJhbnNwb3NlQXJyYXkyRCA9IGZ1bmN0aW9uKGFycmF5KSB7CiAgICAgIGlmIChhcnJheS5sZW5ndGggPT09IDApIHJldHVybiBhcnJheTsKICAgICAgdmFyIG5ld0FycmF5ID0gYXJyYXlbMF0ubWFwKGZ1bmN0aW9uKGNvbCwgaSkgewogICAgICAgICAgcmV0dXJuIGFycmF5Lm1hcChmdW5jdGlvbihyb3cpIHsKICAgICAgICAgICAgICByZXR1cm4gcm93W2ldCiAgICAgICAgICB9KQogICAgICB9KTsKICAgICAgcmV0dXJuIG5ld0FycmF5OwogIH07CiAgLy8gU3BsaXQgdmFsdWUgYXQgc3BsaXRDaGFyLCBidXQgYWxsb3cgc3BsaXRDaGFyIHRvIGJlIGVzY2FwZWQKICAvLyB1c2luZyBlc2NhcGVDaGFyLiBBbnkgb3RoZXIgY2hhcmFjdGVycyBlc2NhcGVkIGJ5IGVzY2FwZUNoYXIKICAvLyB3aWxsIGJlIGluY2x1ZGVkIGFzIHVzdWFsIChpbmNsdWRpbmcgZXNjYXBlQ2hhciBpdHNlbGYpLgogIGZ1bmN0aW9uIHNwbGl0V2l0aEVzY2FwZSh2YWx1ZSwgc3BsaXRDaGFyLCBlc2NhcGVDaGFyKSB7CiAgICB2YXIgcmVzdWx0cyA9IFtdOwogICAgdmFyIGVzY2FwZU1vZGUgPSBmYWxzZTsKICAgIHZhciBjdXJyZW50UmVzdWx0ID0gIiI7CiAgICBmb3IgKHZhciBwb3MgPSAwOyBwb3MgPCB2YWx1ZS5sZW5ndGg7IHBvcysrKSB7CiAgICAgIGlmICghZXNjYXBlTW9kZSkgewogICAgICAgIGlmICh2YWx1ZVtwb3NdID09PSBzcGxpdENoYXIpIHsKICAgICAgICAgIHJlc3VsdHMucHVzaChjdXJyZW50UmVzdWx0KTsKICAgICAgICAgIGN1cnJlbnRSZXN1bHQgPSAiIjsKICAgICAgICB9IGVsc2UgaWYgKHZhbHVlW3Bvc10gPT09IGVzY2FwZUNoYXIpIHsKICAgICAgICAgIGVzY2FwZU1vZGUgPSB0cnVlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjdXJyZW50UmVzdWx0ICs9IHZhbHVlW3Bvc107CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIGN1cnJlbnRSZXN1bHQgKz0gdmFsdWVbcG9zXTsKICAgICAgICBlc2NhcGVNb2RlID0gZmFsc2U7CiAgICAgIH0KICAgIH0KICAgIGlmIChjdXJyZW50UmVzdWx0ICE9PSAiIikgewogICAgICByZXN1bHRzLnB1c2goY3VycmVudFJlc3VsdCk7CiAgICB9CiAgICByZXR1cm4gcmVzdWx0czsKICB9CiAgLy8gRnVuY3Rpb24gYXV0aG9yZWQgYnkgWWlodWkvSkogQWxsYWlyZQogIHdpbmRvdy5IVE1MV2lkZ2V0cy5ldmFsdWF0ZVN0cmluZ01lbWJlciA9IGZ1bmN0aW9uKG8sIG1lbWJlcikgewogICAgdmFyIHBhcnRzID0gc3BsaXRXaXRoRXNjYXBlKG1lbWJlciwgJy4nLCAnXFwnKTsKICAgIGZvciAodmFyIGkgPSAwLCBsID0gcGFydHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7CiAgICAgIHZhciBwYXJ0ID0gcGFydHNbaV07CiAgICAgIC8vIHBhcnQgbWF5IGJlIGEgY2hhcmFjdGVyIG9yICdudW1lcmljJyBtZW1iZXIgbmFtZQogICAgICBpZiAobyAhPT0gbnVsbCAmJiB0eXBlb2YgbyA9PT0gIm9iamVjdCIgJiYgcGFydCBpbiBvKSB7CiAgICAgICAgaWYgKGkgPT0gKGwgLSAxKSkgeyAvLyBpZiB3ZSBhcmUgYXQgdGhlIGVuZCBvZiB0aGUgbGluZSB0aGVuIGV2YWx1bGF0ZQogICAgICAgICAgaWYgKHR5cGVvZiBvW3BhcnRdID09PSAic3RyaW5nIikKICAgICAgICAgICAgb1twYXJ0XSA9IGV2YWwoIigiICsgb1twYXJ0XSArICIpIik7CiAgICAgICAgfSBlbHNlIHsgLy8gb3RoZXJ3aXNlIGNvbnRpbnVlIHRvIG5leHQgZW1iZWRkZWQgb2JqZWN0CiAgICAgICAgICBvID0gb1twYXJ0XTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9OwoKICAvLyBSZXRyaWV2ZSB0aGUgSFRNTFdpZGdldCBpbnN0YW5jZSAoaS5lLiB0aGUgcmV0dXJuIHZhbHVlIG9mIGFuCiAgLy8gSFRNTFdpZGdldCBiaW5kaW5nJ3MgaW5pdGlhbGl6ZSgpIG9yIGZhY3RvcnkoKSBmdW5jdGlvbikKICAvLyBhc3NvY2lhdGVkIHdpdGggYW4gZWxlbWVudCwgb3IgbnVsbCBpZiBub25lLgogIHdpbmRvdy5IVE1MV2lkZ2V0cy5nZXRJbnN0YW5jZSA9IGZ1bmN0aW9uKGVsKSB7CiAgICByZXR1cm4gZWxlbWVudERhdGEoZWwsICJpbml0X3Jlc3VsdCIpOwogIH07CgogIC8vIEZpbmRzIHRoZSBmaXJzdCBlbGVtZW50IGluIHRoZSBzY29wZSB0aGF0IG1hdGNoZXMgdGhlIHNlbGVjdG9yLAogIC8vIGFuZCByZXR1cm5zIHRoZSBIVE1MV2lkZ2V0IGluc3RhbmNlIChpLmUuIHRoZSByZXR1cm4gdmFsdWUgb2YKICAvLyBhbiBIVE1MV2lkZ2V0IGJpbmRpbmcncyBpbml0aWFsaXplKCkgb3IgZmFjdG9yeSgpIGZ1bmN0aW9uKQogIC8vIGFzc29jaWF0ZWQgd2l0aCB0aGF0IGVsZW1lbnQsIGlmIGFueS4gSWYgbm8gZWxlbWVudCBtYXRjaGVzIHRoZQogIC8vIHNlbGVjdG9yLCBvciB0aGUgZmlyc3QgbWF0Y2hpbmcgZWxlbWVudCBoYXMgbm8gSFRNTFdpZGdldAogIC8vIGluc3RhbmNlIGFzc29jaWF0ZWQgd2l0aCBpdCwgdGhlbiBudWxsIGlzIHJldHVybmVkLgogIC8vCiAgLy8gVGhlIHNjb3BlIGFyZ3VtZW50IGlzIG9wdGlvbmFsLCBhbmQgZGVmYXVsdHMgdG8gd2luZG93LmRvY3VtZW50LgogIHdpbmRvdy5IVE1MV2lkZ2V0cy5maW5kID0gZnVuY3Rpb24oc2NvcGUsIHNlbGVjdG9yKSB7CiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PSAxKSB7CiAgICAgIHNlbGVjdG9yID0gc2NvcGU7CiAgICAgIHNjb3BlID0gZG9jdW1lbnQ7CiAgICB9CgogICAgdmFyIGVsID0gc2NvcGUucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7CiAgICBpZiAoZWwgPT09IG51bGwpIHsKICAgICAgcmV0dXJuIG51bGw7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gd2luZG93LkhUTUxXaWRnZXRzLmdldEluc3RhbmNlKGVsKTsKICAgIH0KICB9OwoKICAvLyBGaW5kcyBhbGwgZWxlbWVudHMgaW4gdGhlIHNjb3BlIHRoYXQgbWF0Y2ggdGhlIHNlbGVjdG9yLCBhbmQKICAvLyByZXR1cm5zIHRoZSBIVE1MV2lkZ2V0IGluc3RhbmNlcyAoaS5lLiB0aGUgcmV0dXJuIHZhbHVlcyBvZgogIC8vIGFuIEhUTUxXaWRnZXQgYmluZGluZydzIGluaXRpYWxpemUoKSBvciBmYWN0b3J5KCkgZnVuY3Rpb24pCiAgLy8gYXNzb2NpYXRlZCB3aXRoIHRoZSBlbGVtZW50cywgaW4gYW4gYXJyYXkuIElmIGVsZW1lbnRzIHRoYXQKICAvLyBtYXRjaCB0aGUgc2VsZWN0b3IgZG9uJ3QgaGF2ZSBhbiBhc3NvY2lhdGVkIEhUTUxXaWRnZXQKICAvLyBpbnN0YW5jZSwgdGhlIHJldHVybmVkIGFycmF5IHdpbGwgY29udGFpbiBudWxscy4KICAvLwogIC8vIFRoZSBzY29wZSBhcmd1bWVudCBpcyBvcHRpb25hbCwgYW5kIGRlZmF1bHRzIHRvIHdpbmRvdy5kb2N1bWVudC4KICB3aW5kb3cuSFRNTFdpZGdldHMuZmluZEFsbCA9IGZ1bmN0aW9uKHNjb3BlLCBzZWxlY3RvcikgewogICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT0gMSkgewogICAgICBzZWxlY3RvciA9IHNjb3BlOwogICAgICBzY29wZSA9IGRvY3VtZW50OwogICAgfQoKICAgIHZhciBub2RlcyA9IHNjb3BlLnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpOwogICAgdmFyIHJlc3VsdHMgPSBbXTsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbm9kZXMubGVuZ3RoOyBpKyspIHsKICAgICAgcmVzdWx0cy5wdXNoKHdpbmRvdy5IVE1MV2lkZ2V0cy5nZXRJbnN0YW5jZShub2Rlc1tpXSkpOwogICAgfQogICAgcmV0dXJuIHJlc3VsdHM7CiAgfTsKCiAgdmFyIHBvc3RSZW5kZXJIYW5kbGVycyA9IFtdOwogIGZ1bmN0aW9uIGludm9rZVBvc3RSZW5kZXJIYW5kbGVycygpIHsKICAgIHdoaWxlIChwb3N0UmVuZGVySGFuZGxlcnMubGVuZ3RoKSB7CiAgICAgIHZhciBoYW5kbGVyID0gcG9zdFJlbmRlckhhbmRsZXJzLnNoaWZ0KCk7CiAgICAgIGlmIChoYW5kbGVyKSB7CiAgICAgICAgaGFuZGxlcigpOwogICAgICB9CiAgICB9CiAgfQoKICAvLyBSZWdpc3RlciB0aGUgZ2l2ZW4gY2FsbGJhY2sgZnVuY3Rpb24gdG8gYmUgaW52b2tlZCBhZnRlciB0aGUKICAvLyBuZXh0IHRpbWUgc3RhdGljIHdpZGdldHMgYXJlIHJlbmRlcmVkLgogIHdpbmRvdy5IVE1MV2lkZ2V0cy5hZGRQb3N0UmVuZGVySGFuZGxlciA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7CiAgICBwb3N0UmVuZGVySGFuZGxlcnMucHVzaChjYWxsYmFjayk7CiAgfTsKCiAgLy8gVGFrZXMgYSBuZXctc3R5bGUgaW5zdGFuY2UtYm91bmQgZGVmaW5pdGlvbiwgYW5kIHJldHVybnMgYW4KICAvLyBvbGQtc3R5bGUgY2xhc3MtYm91bmQgZGVmaW5pdGlvbi4gVGhpcyBzYXZlcyB1cyBmcm9tIGhhdmluZwogIC8vIHRvIHJld3JpdGUgYWxsIHRoZSBsb2dpYyBpbiB0aGlzIGZpbGUgdG8gYWNjb21vZGF0ZSBib3RoCiAgLy8gdHlwZXMgb2YgZGVmaW5pdGlvbnMuCiAgZnVuY3Rpb24gY3JlYXRlTGVnYWN5RGVmaW5pdGlvbkFkYXB0ZXIoZGVmbikgewogICAgdmFyIHJlc3VsdCA9IHsKICAgICAgbmFtZTogZGVmbi5uYW1lLAogICAgICB0eXBlOiBkZWZuLnR5cGUsCiAgICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uKGVsLCB3aWR0aCwgaGVpZ2h0KSB7CiAgICAgICAgcmV0dXJuIGRlZm4uZmFjdG9yeShlbCwgd2lkdGgsIGhlaWdodCk7CiAgICAgIH0sCiAgICAgIHJlbmRlclZhbHVlOiBmdW5jdGlvbihlbCwgeCwgaW5zdGFuY2UpIHsKICAgICAgICByZXR1cm4gaW5zdGFuY2UucmVuZGVyVmFsdWUoeCk7CiAgICAgIH0sCiAgICAgIHJlc2l6ZTogZnVuY3Rpb24oZWwsIHdpZHRoLCBoZWlnaHQsIGluc3RhbmNlKSB7CiAgICAgICAgcmV0dXJuIGluc3RhbmNlLnJlc2l6ZSh3aWR0aCwgaGVpZ2h0KTsKICAgICAgfQogICAgfTsKCiAgICBpZiAoZGVmbi5maW5kKQogICAgICByZXN1bHQuZmluZCA9IGRlZm4uZmluZDsKICAgIGlmIChkZWZuLnJlbmRlckVycm9yKQogICAgICByZXN1bHQucmVuZGVyRXJyb3IgPSBkZWZuLnJlbmRlckVycm9yOwogICAgaWYgKGRlZm4uY2xlYXJFcnJvcikKICAgICAgcmVzdWx0LmNsZWFyRXJyb3IgPSBkZWZuLmNsZWFyRXJyb3I7CgogICAgcmV0dXJuIHJlc3VsdDsKICB9Cn0pKCk7Cgo="></script>
<script src="data:application/x-javascript;base64,IWZ1bmN0aW9uKGUpe2lmKCJvYmplY3QiPT10eXBlb2YgZXhwb3J0cyYmInVuZGVmaW5lZCIhPXR5cGVvZiBtb2R1bGUpbW9kdWxlLmV4cG9ydHM9ZSgpO2Vsc2UgaWYoImZ1bmN0aW9uIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZClkZWZpbmUoW10sZSk7ZWxzZXt2YXIgbjsidW5kZWZpbmVkIiE9dHlwZW9mIHdpbmRvdz9uPXdpbmRvdzoidW5kZWZpbmVkIiE9dHlwZW9mIGdsb2JhbD9uPWdsb2JhbDoidW5kZWZpbmVkIiE9dHlwZW9mIHNlbGYmJihuPXNlbGYpLG4uVml2YT1lKCl9fShmdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbiBlKG4sdCxyKXtmdW5jdGlvbiBvKGEsdSl7aWYoIXRbYV0pe2lmKCFuW2FdKXt2YXIgcz0iZnVuY3Rpb24iPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighdSYmcylyZXR1cm4gcyhhLCEwKTtpZihpKXJldHVybiBpKGEsITApO3ZhciBmPW5ldyBFcnJvcigiQ2Fubm90IGZpbmQgbW9kdWxlICciK2ErIiciKTt0aHJvdyBmLmNvZGU9Ik1PRFVMRV9OT1RfRk9VTkQiLGZ9dmFyIGM9dFthXT17ZXhwb3J0czp7fX07blthXVswXS5jYWxsKGMuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgdD1uW2FdWzFdW2VdO3JldHVybiBvKHQ/dDplKX0sYyxjLmV4cG9ydHMsZSxuLHQscil9cmV0dXJuIHRbYV0uZXhwb3J0c31mb3IodmFyIGk9ImZ1bmN0aW9uIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsYT0wO2E8ci5sZW5ndGg7YSsrKW8oclthXSk7cmV0dXJuIG99KHsxOltmdW5jdGlvbihlLG4pe3ZhciB0PWUoIm5ncmFwaC5yYW5kb20iKSxyPXtsYXp5RXh0ZW5kOmZ1bmN0aW9uKCl7cmV0dXJuIGUoIm5ncmFwaC5tZXJnZSIpLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0scmFuZG9tSXRlcmF0b3I6ZnVuY3Rpb24oKXtyZXR1cm4gdC5yYW5kb21JdGVyYXRvci5hcHBseSh0LGFyZ3VtZW50cyl9LHJhbmRvbTpmdW5jdGlvbigpe3JldHVybiB0LnJhbmRvbS5hcHBseSh0LGFyZ3VtZW50cyl9LGV2ZW50czplKCJuZ3JhcGguZXZlbnRzIil9O3IuR3JhcGg9e3ZlcnNpb246ZSgiLi92ZXJzaW9uLmpzIiksZ3JhcGg6ZSgibmdyYXBoLmdyYXBoIiksc2VyaWFsaXplcjpmdW5jdGlvbigpe3JldHVybntsb2FkRnJvbUpTT046ZSgibmdyYXBoLmZyb21qc29uIiksc3RvcmVUb0pTT046ZSgibmdyYXBoLnRvanNvbiIpfX0sY2VudHJhbGl0eTplKCIuL0FsZ29yaXRobXMvY2VudHJhbGl0eS5qcyIpLG9wZXJhdGlvbnM6ZSgiLi9BbGdvcml0aG1zL29wZXJhdGlvbnMuanMiKSxnZW9tOmZ1bmN0aW9uKCl7cmV0dXJue2ludGVyc2VjdDplKCJnaW50ZXJzZWN0IiksaW50ZXJzZWN0UmVjdDplKCIuL1V0aWxzL2ludGVyc2VjdFJlY3QuanMiKX19LHdlYmdsOmUoIi4vV2ViR0wvd2ViZ2wuanMiKSx3ZWJnbElucHV0RXZlbnRzOmUoIi4vV2ViR0wvd2ViZ2xJbnB1dEV2ZW50cy5qcyIpLGdlbmVyYXRvcjpmdW5jdGlvbigpe3JldHVybiBlKCJuZ3JhcGguZ2VuZXJhdG9ycyIpfSxJbnB1dDp7ZG9tSW5wdXRNYW5hZ2VyOmUoIi4vSW5wdXQvZG9tSW5wdXRNYW5hZ2VyLmpzIiksd2ViZ2xJbnB1dE1hbmFnZXI6ZSgiLi9JbnB1dC93ZWJnbElucHV0TWFuYWdlci5qcyIpfSxVdGlsczp7ZHJhZ25kcm9wOmUoIi4vSW5wdXQvZHJhZ25kcm9wLmpzIiksZmluZEVsZW1lbnRQb3NpdGlvbjplKCIuL1V0aWxzL2ZpbmRFbGVtZW50UG9zaXRpb24uanMiKSx0aW1lcjplKCIuL1V0aWxzL3RpbWVyLmpzIiksZ2V0RGltZW5zaW9uOmUoIi4vVXRpbHMvZ2V0RGltZW5zaW9ucy5qcyIpLGV2ZW50czplKCIuL1V0aWxzL2JhY2t3YXJkQ29tcGF0aWJsZUV2ZW50cy5qcyIpfSxMYXlvdXQ6e2ZvcmNlRGlyZWN0ZWQ6ZSgibmdyYXBoLmZvcmNlbGF5b3V0IiksY29uc3RhbnQ6ZSgiLi9MYXlvdXQvY29uc3RhbnQuanMiKX0sVmlldzp7VGV4dHVyZTplKCIuL1dlYkdML3RleHR1cmUuanMiKSx3ZWJnbEF0bGFzOmUoIi4vV2ViR0wvd2ViZ2xBdGxhcy5qcyIpLHdlYmdsSW1hZ2VOb2RlUHJvZ3JhbTplKCIuL1dlYkdML3dlYmdsSW1hZ2VOb2RlUHJvZ3JhbS5qcyIpLHdlYmdsTGlua1Byb2dyYW06ZSgiLi9XZWJHTC93ZWJnbExpbmtQcm9ncmFtLmpzIiksd2ViZ2xOb2RlUHJvZ3JhbTplKCIuL1dlYkdML3dlYmdsTm9kZVByb2dyYW0uanMiKSx3ZWJnbExpbmU6ZSgiLi9XZWJHTC93ZWJnbExpbmUuanMiKSx3ZWJnbFNxdWFyZTplKCIuL1dlYkdML3dlYmdsU3F1YXJlLmpzIiksd2ViZ2xJbWFnZTplKCIuL1dlYkdML3dlYmdsSW1hZ2UuanMiKSx3ZWJnbEdyYXBoaWNzOmUoIi4vVmlldy93ZWJnbEdyYXBoaWNzLmpzIiksX3dlYmdsVXRpbDp7cGFyc2VDb2xvcjplKCIuL1dlYkdML3BhcnNlQ29sb3IuanMiKX0sc3ZnR3JhcGhpY3M6ZSgiLi9WaWV3L3N2Z0dyYXBoaWNzLmpzIikscmVuZGVyZXI6ZSgiLi9WaWV3L3JlbmRlcmVyLmpzIiksY3NzR3JhcGhpY3M6ZnVuY3Rpb24oKXt0aHJvdyBuZXcgRXJyb3IoImNzc0dyYXBoaWNzIGlzIGRlcHJlY2F0ZWQuIFBsZWFzZSB1c2Ugb2xkZXIgdmVyc2lvbiBvZiB2aXZhZ3JhcGggKDwgMC43KSBpZiB5b3UgbmVlZCBpdCIpfSxzdmdOb2RlRmFjdG9yeTpmdW5jdGlvbigpe3Rocm93IG5ldyBFcnJvcigic3ZnTm9kZUZhY3RvcnkgaXMgZGVwcmVjYXRlZC4gUGxlYXNlIHVzZSBvbGRlciB2ZXJzaW9uIG9mIHZpdmFncmFwaCAoPCAwLjcpIGlmIHlvdSBuZWVkIGl0Iil9LGNvbW11bml0eTpmdW5jdGlvbigpe3Rocm93IG5ldyBFcnJvcigiY29tbXVuaXR5IGlzIGRlcHJlY2F0ZWQuIFBsZWFzZSB1c2Ugdml2YWdyYXBoIDwgMC43IGlmIHlvdSBuZWVkIGl0LCBvciBgaHR0cHM6Ly9naXRodWIuY29tL2FudmFrYS9uZ3JhcGguc2xwYWAgbW9kdWxlIil9fSxSZWN0OmUoIi4vVXRpbHMvcmVjdC5qcyIpLHN2ZzplKCJzaW1wbGVzdmciKSxCcm93c2VySW5mbzplKCIuL1V0aWxzL2Jyb3dzZXJJbmZvLmpzIil9LG4uZXhwb3J0cz1yfSx7Ii4vQWxnb3JpdGhtcy9jZW50cmFsaXR5LmpzIjozMiwiLi9BbGdvcml0aG1zL29wZXJhdGlvbnMuanMiOjMzLCIuL0lucHV0L2RvbUlucHV0TWFuYWdlci5qcyI6MzQsIi4vSW5wdXQvZHJhZ25kcm9wLmpzIjozNSwiLi9JbnB1dC93ZWJnbElucHV0TWFuYWdlci5qcyI6MzYsIi4vTGF5b3V0L2NvbnN0YW50LmpzIjozNywiLi9VdGlscy9iYWNrd2FyZENvbXBhdGlibGVFdmVudHMuanMiOjM4LCIuL1V0aWxzL2Jyb3dzZXJJbmZvLmpzIjozOSwiLi9VdGlscy9maW5kRWxlbWVudFBvc2l0aW9uLmpzIjo0MSwiLi9VdGlscy9nZXREaW1lbnNpb25zLmpzIjo0MiwiLi9VdGlscy9pbnRlcnNlY3RSZWN0LmpzIjo0MywiLi9VdGlscy9yZWN0LmpzIjo0NSwiLi9VdGlscy90aW1lci5qcyI6NDYsIi4vVmlldy9yZW5kZXJlci5qcyI6NDgsIi4vVmlldy9zdmdHcmFwaGljcy5qcyI6NDksIi4vVmlldy93ZWJnbEdyYXBoaWNzLmpzIjo1MCwiLi9XZWJHTC9wYXJzZUNvbG9yLmpzIjo1MSwiLi9XZWJHTC90ZXh0dXJlLmpzIjo1MiwiLi9XZWJHTC93ZWJnbC5qcyI6NTMsIi4vV2ViR0wvd2ViZ2xBdGxhcy5qcyI6NTQsIi4vV2ViR0wvd2ViZ2xJbWFnZS5qcyI6NTUsIi4vV2ViR0wvd2ViZ2xJbWFnZU5vZGVQcm9ncmFtLmpzIjo1NiwiLi9XZWJHTC93ZWJnbElucHV0RXZlbnRzLmpzIjo1NywiLi9XZWJHTC93ZWJnbExpbmUuanMiOjU4LCIuL1dlYkdML3dlYmdsTGlua1Byb2dyYW0uanMiOjU5LCIuL1dlYkdML3dlYmdsTm9kZVByb2dyYW0uanMiOjYwLCIuL1dlYkdML3dlYmdsU3F1YXJlLmpzIjo2MSwiLi92ZXJzaW9uLmpzIjo2MixnaW50ZXJzZWN0OjIsIm5ncmFwaC5ldmVudHMiOjYsIm5ncmFwaC5mb3JjZWxheW91dCI6NywibmdyYXBoLmZyb21qc29uIjoyMSwibmdyYXBoLmdlbmVyYXRvcnMiOjIyLCJuZ3JhcGguZ3JhcGgiOjIzLCJuZ3JhcGgubWVyZ2UiOjI0LCJuZ3JhcGgucmFuZG9tIjoyNSwibmdyYXBoLnRvanNvbiI6MjYsc2ltcGxlc3ZnOjI3fV0sMjpbZnVuY3Rpb24oZSxuKXtmdW5jdGlvbiB0KGUsbix0LHIsbyxpLGEsdSl7dmFyIHMsZixjLGQsbCxwLHYsZyxoLG0seSx4LHcsYj17eDowLHk6MH07cmV0dXJuIHM9ci1uLGM9ZS10LGw9dCpuLWUqcixoPXMqbytjKmkrbCxtPXMqYStjKnUrbCwwIT09aCYmMCE9PW0mJmg+PTA9PW0+PTQ/bnVsbDooZj11LWksZD1vLWEscD1hKmktbyp1LHY9ZiplK2QqbitwLGc9Zip0K2QqcitwLDAhPT12JiYwIT09ZyYmdj49MD09Zz49MD9udWxsOih5PXMqZC1mKmMsMD09PXk/bnVsbDooeD0wPnk/LXkvMjp5LzIseD0wLHc9YypwLWQqbCxiLng9KDA+dz93LXg6dyt4KS95LHc9ZipsLXMqcCxiLnk9KDA+dz93LXg6dyt4KS95LGIpKSl9bi5leHBvcnRzPXR9LHt9XSwzOltmdW5jdGlvbihlLG4pe24uZXhwb3J0cy5kZWdyZWU9ZSgiLi9zcmMvZGVncmVlLmpzIiksbi5leHBvcnRzLmJldHdlZW5uZXNzPWUoIi4vc3JjL2JldHdlZW5uZXNzLmpzIil9LHsiLi9zcmMvYmV0d2Vlbm5lc3MuanMiOjQsIi4vc3JjL2RlZ3JlZS5qcyI6NX1dLDQ6W2Z1bmN0aW9uKGUsbil7ZnVuY3Rpb24gdChlLG4pe2Z1bmN0aW9uIHQoZSl7Z1tlXS89Mn1mdW5jdGlvbiByKGUpe2dbZS5pZF09MH1mdW5jdGlvbiBvKGUpe3M9ZS5pZCx1KHMpLGkoKX1mdW5jdGlvbiBpKCl7Zm9yKGUuZm9yRWFjaE5vZGUoYSk7Yy5sZW5ndGg7KXtmb3IodmFyIG49Yy5wb3AoKSx0PSgxK3Zbbl0pL3Bbbl0scj1kW25dLG89MDtvPHIubGVuZ3RoOysrbyl7dmFyIGk9cltvXTt2W2ldKz1wW2ldKnR9biE9PXMmJihnW25dKz12W25dKX19ZnVuY3Rpb24gYShlKXt2W2UuaWRdPTB9ZnVuY3Rpb24gdSh0KXtmdW5jdGlvbiByKGUpe2koZS5pZCl9ZnVuY3Rpb24gbyhlKXt2YXIgbj1lLmlkO2Rbbl09W10sbFtuXT0tMSxwW25dPTB9ZnVuY3Rpb24gaShlKXstMT09PWxbZV0mJihsW2VdPWxbYV0rMSxmLnB1c2goZSkpLGxbZV09PT1sW2FdKzEmJihwW2VdKz1wW2FdLGRbZV0ucHVzaChhKSl9Zm9yKGUuZm9yRWFjaE5vZGUobyksbFt0XT0wLHBbdF09MSxmLnB1c2godCk7Zi5sZW5ndGg7KXt7dmFyIGE9Zi5zaGlmdCgpO09iamVjdC5jcmVhdGUobnVsbCl9Yy5wdXNoKGEpLGUuZm9yRWFjaExpbmtlZE5vZGUoYSxyLG4pfX12YXIgcyxmPVtdLGM9W10sZD1PYmplY3QuY3JlYXRlKG51bGwpLGw9T2JqZWN0LmNyZWF0ZShudWxsKSxwPU9iamVjdC5jcmVhdGUobnVsbCksdj1PYmplY3QuY3JlYXRlKG51bGwpLGc9T2JqZWN0LmNyZWF0ZShudWxsKTtyZXR1cm4gZS5mb3JFYWNoTm9kZShyKSxlLmZvckVhY2hOb2RlKG8pLG58fE9iamVjdC5rZXlzKGcpLmZvckVhY2godCksZ31uLmV4cG9ydHM9dH0se31dLDU6W2Z1bmN0aW9uKGUsbil7ZnVuY3Rpb24gdChlLG4pe2Z1bmN0aW9uIHQobil7dmFyIHQ9ZS5nZXRMaW5rcyhuLmlkKTt1W24uaWRdPWEodCxuLmlkKX12YXIgYSx1PU9iamVjdC5jcmVhdGUobnVsbCk7aWYobj0obnx8ImJvdGgiKS50b0xvd2VyQ2FzZSgpLCJib3RoIj09PW58fCJpbm91dCI9PT1uKWE9aTtlbHNlIGlmKCJpbiI9PT1uKWE9cjtlbHNle2lmKCJvdXQiIT09bil0aHJvdyBuZXcgRXJyb3IoIkV4cGVjdGVkIGNlbnRyYWxpdHkgZGVncmVlIGtpbmQgaXM6IGluLCBvdXQgb3IgYm90aCIpO2E9b31yZXR1cm4gZS5mb3JFYWNoTm9kZSh0KSx1fWZ1bmN0aW9uIHIoZSxuKXtmb3IodmFyIHQ9MCxyPTA7cjxlLmxlbmd0aDtyKz0xKXQrPWVbcl0udG9JZD09PW4/MTowO3JldHVybiB0fWZ1bmN0aW9uIG8oZSxuKXtmb3IodmFyIHQ9MCxyPTA7cjxlLmxlbmd0aDtyKz0xKXQrPWVbcl0uZnJvbUlkPT09bj8xOjA7cmV0dXJuIHR9ZnVuY3Rpb24gaShlKXtyZXR1cm4gZS5sZW5ndGh9bi5leHBvcnRzPXR9LHt9XSw2OltmdW5jdGlvbihlLG4pe2Z1bmN0aW9uIHQoZSl7dmFyIG49T2JqZWN0LmNyZWF0ZShudWxsKTtyZXR1cm57b246ZnVuY3Rpb24odCxyLG8pe2lmKCJmdW5jdGlvbiIhPXR5cGVvZiByKXRocm93IG5ldyBFcnJvcigiY2FsbGJhY2sgaXMgZXhwZWN0ZWQgdG8gYmUgYSBmdW5jdGlvbiIpO3ZhciBpPW5bdF07cmV0dXJuIGl8fChpPW5bdF09W10pLGkucHVzaCh7Y2FsbGJhY2s6cixjdHg6b30pLGV9LG9mZjpmdW5jdGlvbih0LHIpe3ZhciBvPSJ1bmRlZmluZWQiPT10eXBlb2YgdDtpZihvKXJldHVybiBuPU9iamVjdC5jcmVhdGUobnVsbCksZTtpZihuW3RdKXt2YXIgaT0iZnVuY3Rpb24iIT10eXBlb2YgcjtpZihpKWRlbGV0ZSBuW3RdO2Vsc2UgZm9yKHZhciBhPW5bdF0sdT0wO3U8YS5sZW5ndGg7Kyt1KWFbdV0uY2FsbGJhY2s9PT1yJiZhLnNwbGljZSh1LDEpfXJldHVybiBlfSxmaXJlOmZ1bmN0aW9uKHQpe3ZhciByPW5bdF07aWYoIXIpcmV0dXJuIGU7dmFyIG87YXJndW1lbnRzLmxlbmd0aD4xJiYobz1BcnJheS5wcm90b3R5cGUuc3BsaWNlLmNhbGwoYXJndW1lbnRzLDEpKTtmb3IodmFyIGk9MDtpPHIubGVuZ3RoOysraSl7dmFyIGE9cltpXTthLmNhbGxiYWNrLmFwcGx5KGEuY3R4LG8pfXJldHVybiBlfX19ZnVuY3Rpb24gcihlKXtpZighZSl0aHJvdyBuZXcgRXJyb3IoIkV2ZW50aWZ5IGNhbm5vdCB1c2UgZmFsc3kgb2JqZWN0IGFzIGV2ZW50cyBzdWJqZWN0Iik7Zm9yKHZhciBuPVsib24iLCJmaXJlIiwib2ZmIl0sdD0wO3Q8bi5sZW5ndGg7Kyt0KWlmKGUuaGFzT3duUHJvcGVydHkoblt0XSkpdGhyb3cgbmV3IEVycm9yKCJTdWJqZWN0IGNhbm5vdCBiZSBldmVudGlmaWVkLCBzaW5jZSBpdCBhbHJlYWR5IGhhcyBwcm9wZXJ0eSAnIituW3RdKyInIil9bi5leHBvcnRzPWZ1bmN0aW9uKGUpe3IoZSk7dmFyIG49dChlKTtyZXR1cm4gZS5vbj1uLm9uLGUub2ZmPW4ub2ZmLGUuZmlyZT1uLmZpcmUsZX19LHt9XSw3OltmdW5jdGlvbihlLG4pe2Z1bmN0aW9uIHQobix0KXtmdW5jdGlvbiBvKGUsdCl7dmFyIHI7aWYodm9pZCAwPT09dClyPSJzdHJpbmciPT10eXBlb2YgZT9lOmUuaWQ7ZWxzZXt2YXIgbz1uLmhhc0xpbmsoZSx0KTtpZighbylyZXR1cm47cj1vLmlkfXJldHVybiBiW3JdfWZ1bmN0aW9uIGkoZSl7cmV0dXJuIHdbZV19ZnVuY3Rpb24gYSgpe24ub24oImNoYW5nZWQiLHUpfWZ1bmN0aW9uIHUoZSl7Zm9yKHZhciBuPTA7bjxlLmxlbmd0aDsrK24pe3ZhciB0PWVbbl07ImFkZCI9PT10LmNoYW5nZVR5cGU/KHQubm9kZSYmZih0Lm5vZGUuaWQpLHQubGluayYmZCh0LmxpbmspKToicmVtb3ZlIj09PXQuY2hhbmdlVHlwZSYmKHQubm9kZSYmYyh0Lm5vZGUpLHQubGluayYmbCh0LmxpbmspKX19ZnVuY3Rpb24gcygpe24uZm9yRWFjaE5vZGUoZnVuY3Rpb24oZSl7ZihlLmlkKX0pLG4uZm9yRWFjaExpbmsoZCl9ZnVuY3Rpb24gZihlKXt2YXIgdD13W2VdO2lmKCF0KXt2YXIgcj1uLmdldE5vZGUoZSk7aWYoIXIpdGhyb3cgbmV3IEVycm9yKCJpbml0Qm9keSgpIHdhcyBjYWxsZWQgd2l0aCB1bmtub3duIG5vZGUgaWQiKTt2YXIgbz1yLnBvc2l0aW9uO2lmKCFvKXt2YXIgaT1wKHIpO289eC5nZXRCZXN0TmV3Qm9keVBvc2l0aW9uKGkpfXQ9eC5hZGRCb2R5QXQobyksd1tlXT10LHYoZSksZyhyKSYmKHQuaXNQaW5uZWQ9ITApfX1mdW5jdGlvbiBjKGUpe3ZhciBuPWUuaWQsdD13W25dO3QmJih3W25dPW51bGwsZGVsZXRlIHdbbl0seC5yZW1vdmVCb2R5KHQpKX1mdW5jdGlvbiBkKGUpe3YoZS5mcm9tSWQpLHYoZS50b0lkKTt2YXIgbj13W2UuZnJvbUlkXSx0PXdbZS50b0lkXSxyPXguYWRkU3ByaW5nKG4sdCxlLmxlbmd0aCk7RShlLHIpLGJbZS5pZF09cn1mdW5jdGlvbiBsKGUpe3ZhciB0PWJbZS5pZF07aWYodCl7dmFyIHI9bi5nZXROb2RlKGUuZnJvbUlkKSxvPW4uZ2V0Tm9kZShlLnRvSWQpO3ImJnYoci5pZCksbyYmdihvLmlkKSxkZWxldGUgYltlLmlkXSx4LnJlbW92ZVNwcmluZyh0KX19ZnVuY3Rpb24gcChlKXt2YXIgbj1bXTtpZighZS5saW5rcylyZXR1cm4gbjtmb3IodmFyIHQ9TWF0aC5taW4oZS5saW5rcy5sZW5ndGgsMikscj0wO3Q+cjsrK3Ipe3ZhciBvPWUubGlua3Nbcl0saT1vLmZyb21JZCE9PWUuaWQ/d1tvLmZyb21JZF06d1tvLnRvSWRdO2kmJmkucG9zJiZuLnB1c2goaSl9cmV0dXJuIG59ZnVuY3Rpb24gdihlKXt2YXIgbj13W2VdO24ubWFzcz1tKGUpfWZ1bmN0aW9uIGcoZSl7cmV0dXJuIGUmJihlLmlzUGlubmVkfHxlLmRhdGEmJmUuZGF0YS5pc1Bpbm5lZCl9ZnVuY3Rpb24gaChlKXt2YXIgbj13W2VdO3JldHVybiBufHwoZihlKSxuPXdbZV0pLG59ZnVuY3Rpb24gbShlKXtyZXR1cm4gMStuLmdldExpbmtzKGUpLmxlbmd0aC8zfWlmKCFuKXRocm93IG5ldyBFcnJvcigiR3JhcGggc3RydWN0dXJlIGNhbm5vdCBiZSB1bmRlZmluZWQiKTt2YXIgeT1lKCJuZ3JhcGgucGh5c2ljcy5zaW11bGF0b3IiKSx4PXkodCksdz0iZnVuY3Rpb24iPT10eXBlb2YgT2JqZWN0LmNyZWF0ZT9PYmplY3QuY3JlYXRlKG51bGwpOnt9LGI9e30sRT14LnNldHRpbmdzLnNwcmluZ1RyYW5zZm9ybXx8cjtzKCksYSgpO3ZhciBMPXtzdGVwOmZ1bmN0aW9uKCl7cmV0dXJuIHguc3RlcCgpfSxnZXROb2RlUG9zaXRpb246ZnVuY3Rpb24oZSl7cmV0dXJuIGgoZSkucG9zfSxzZXROb2RlUG9zaXRpb246ZnVuY3Rpb24oZSl7dmFyIG49aChlKTtuLnNldFBvc2l0aW9uLmFwcGx5KG4sQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpKX0sZ2V0TGlua1Bvc2l0aW9uOmZ1bmN0aW9uKGUpe3ZhciBuPWJbZV07cmV0dXJuIG4/e2Zyb206bi5mcm9tLnBvcyx0bzpuLnRvLnBvc306dm9pZCAwfSxnZXRHcmFwaFJlY3Q6ZnVuY3Rpb24oKXtyZXR1cm4geC5nZXRCQm94KCl9LHBpbk5vZGU6ZnVuY3Rpb24oZSxuKXt2YXIgdD1oKGUuaWQpO3QuaXNQaW5uZWQ9ISFufSxpc05vZGVQaW5uZWQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGgoZS5pZCkuaXNQaW5uZWR9LGRpc3Bvc2U6ZnVuY3Rpb24oKXtuLm9mZigiY2hhbmdlZCIsdSl9LGdldEJvZHk6aSxnZXRTcHJpbmc6byxzaW11bGF0b3I6eH07cmV0dXJuIEx9ZnVuY3Rpb24gcigpe31uLmV4cG9ydHM9dCxuLmV4cG9ydHMuc2ltdWxhdG9yPWUoIm5ncmFwaC5waHlzaWNzLnNpbXVsYXRvciIpfSx7Im5ncmFwaC5waHlzaWNzLnNpbXVsYXRvciI6OH1dLDg6W2Z1bmN0aW9uKGUsbil7ZnVuY3Rpb24gdChuKXtmdW5jdGlvbiB0KCl7dmFyIGUsbj1sLmxlbmd0aDtpZihuKWZvcih2Lmluc2VydEJvZGllcyhsKTtuLS07KWU9bFtuXSxlLmZvcmNlLnJlc2V0KCksdi51cGRhdGVCb2R5Rm9yY2UoZSksbS51cGRhdGUoZSk7Zm9yKG49cC5sZW5ndGg7bi0tOyloLnVwZGF0ZShwW25dKX12YXIgcj1lKCIuL2xpYi9zcHJpbmciKSxvPWUoIm5ncmFwaC5leHBvc2UiKSxpPWUoIm5ncmFwaC5tZXJnZSIpO249aShuLHtzcHJpbmdMZW5ndGg6MzAsc3ByaW5nQ29lZmY6OGUtNCxncmF2aXR5Oi0xLjIsdGhldGE6LjgsZHJhZ0NvZWZmOi4wMix0aW1lU3RlcDoyMCxzdGFibGVUaHJlc2hvbGQ6LjAwOX0pO3ZhciBhPW4uY3JlYXRlUXVhZFRyZWV8fGUoIm5ncmFwaC5xdWFkdHJlZWJoIiksdT1uLmNyZWF0ZUJvdW5kc3x8ZSgiLi9saWIvYm91bmRzIikscz1uLmNyZWF0ZURyYWdGb3JjZXx8ZSgiLi9saWIvZHJhZ0ZvcmNlIiksZj1uLmNyZWF0ZVNwcmluZ0ZvcmNlfHxlKCIuL2xpYi9zcHJpbmdGb3JjZSIpLGM9bi5pbnRlZ3JhdG9yfHxlKCIuL2xpYi9ldWxlckludGVncmF0b3IiKSxkPW4uY3JlYXRlQm9keXx8ZSgiLi9saWIvY3JlYXRlQm9keSIpLGw9W10scD1bXSx2PWEobiksZz11KGwsbiksaD1mKG4pLG09cyhuKSx5PXtib2RpZXM6bCxzcHJpbmdzOnAsc2V0dGluZ3M6bixzdGVwOmZ1bmN0aW9uKCl7dCgpO3ZhciBlPWMobCxuLnRpbWVTdGVwKTtyZXR1cm4gZy51cGRhdGUoKSxlPG4uc3RhYmxlVGhyZXNob2xkfSxhZGRCb2R5OmZ1bmN0aW9uKGUpe2lmKCFlKXRocm93IG5ldyBFcnJvcigiQm9keSBpcyByZXF1aXJlZCIpO3JldHVybiBsLnB1c2goZSksZX0sYWRkQm9keUF0OmZ1bmN0aW9uKGUpe2lmKCFlKXRocm93IG5ldyBFcnJvcigiQm9keSBwb3NpdGlvbiBpcyByZXF1aXJlZCIpO3ZhciBuPWQoZSk7cmV0dXJuIGwucHVzaChuKSxufSxyZW1vdmVCb2R5OmZ1bmN0aW9uKGUpe2lmKGUpe3ZhciBuPWwuaW5kZXhPZihlKTtpZighKDA+bikpcmV0dXJuIGwuc3BsaWNlKG4sMSksMD09PWwubGVuZ3RoJiZnLnJlc2V0KCksITB9fSxhZGRTcHJpbmc6ZnVuY3Rpb24oZSxuLHQsbyxpKXtpZighZXx8IW4pdGhyb3cgbmV3IEVycm9yKCJDYW5ub3QgYWRkIG51bGwgc3ByaW5nIHRvIGZvcmNlIHNpbXVsYXRvciIpOyJudW1iZXIiIT10eXBlb2YgdCYmKHQ9LTEpO3ZhciBhPW5ldyByKGUsbix0LGk+PTA/aTotMSxvKTtyZXR1cm4gcC5wdXNoKGEpLGF9LHJlbW92ZVNwcmluZzpmdW5jdGlvbihlKXtpZihlKXt2YXIgbj1wLmluZGV4T2YoZSk7cmV0dXJuIG4+LTE/KHAuc3BsaWNlKG4sMSksITApOnZvaWQgMH19LGdldEJlc3ROZXdCb2R5UG9zaXRpb246ZnVuY3Rpb24oZSl7cmV0dXJuIGcuZ2V0QmVzdE5ld1Bvc2l0aW9uKGUpfSxnZXRCQm94OmZ1bmN0aW9uKCl7cmV0dXJuIGcuYm94fSxncmF2aXR5OmZ1bmN0aW9uKGUpe3JldHVybiB2b2lkIDAhPT1lPyhuLmdyYXZpdHk9ZSx2Lm9wdGlvbnMoe2dyYXZpdHk6ZX0pLHRoaXMpOm4uZ3Jhdml0eX0sdGhldGE6ZnVuY3Rpb24oZSl7cmV0dXJuIHZvaWQgMCE9PWU/KG4udGhldGE9ZSx2Lm9wdGlvbnMoe3RoZXRhOmV9KSx0aGlzKTpuLnRoZXRhfX07cmV0dXJuIG8obix5KSx5fW4uZXhwb3J0cz10fSx7Ii4vbGliL2JvdW5kcyI6OSwiLi9saWIvY3JlYXRlQm9keSI6MTAsIi4vbGliL2RyYWdGb3JjZSI6MTEsIi4vbGliL2V1bGVySW50ZWdyYXRvciI6MTIsIi4vbGliL3NwcmluZyI6MTMsIi4vbGliL3NwcmluZ0ZvcmNlIjoxNCwibmdyYXBoLmV4cG9zZSI6MTUsIm5ncmFwaC5tZXJnZSI6MjQsIm5ncmFwaC5xdWFkdHJlZWJoIjoxN31dLDk6W2Z1bmN0aW9uKGUsbil7bi5leHBvcnRzPWZ1bmN0aW9uKG4sdCl7ZnVuY3Rpb24gcigpe3ZhciBlPW4ubGVuZ3RoO2lmKDAhPT1lKXtmb3IodmFyIHQ9TnVtYmVyLk1BWF9WQUxVRSxyPU51bWJlci5NQVhfVkFMVUUsbz1OdW1iZXIuTUlOX1ZBTFVFLGE9TnVtYmVyLk1JTl9WQUxVRTtlLS07KXt2YXIgdT1uW2VdO3UuaXNQaW5uZWQ/KHUucG9zLng9dS5wcmV2UG9zLngsdS5wb3MueT11LnByZXZQb3MueSk6KHUucHJldlBvcy54PXUucG9zLngsdS5wcmV2UG9zLnk9dS5wb3MueSksdS5wb3MueDx0JiYodD11LnBvcy54KSx1LnBvcy54Pm8mJihvPXUucG9zLngpLHUucG9zLnk8ciYmKHI9dS5wb3MueSksdS5wb3MueT5hJiYoYT11LnBvcy55KX1pLngxPXQsaS54Mj1vLGkueTE9cixpLnkyPWF9fXZhciBvPWUoIm5ncmFwaC5yYW5kb20iKS5yYW5kb20oNDIpLGk9e3gxOjAseTE6MCx4MjowLHkyOjB9O3JldHVybntib3g6aSx1cGRhdGU6cixyZXNldDpmdW5jdGlvbigpe2kueDE9aS55MT0wLGkueDI9aS55Mj0wfSxnZXRCZXN0TmV3UG9zaXRpb246ZnVuY3Rpb24oZSl7dmFyIG49aSxyPTAsYT0wO2lmKGUubGVuZ3RoKXtmb3IodmFyIHU9MDt1PGUubGVuZ3RoOysrdSlyKz1lW3VdLnBvcy54LGErPWVbdV0ucG9zLnk7ci89ZS5sZW5ndGgsYS89ZS5sZW5ndGh9ZWxzZSByPShuLngxK24ueDIpLzIsYT0obi55MStuLnkyKS8yO3ZhciBzPXQuc3ByaW5nTGVuZ3RoO3JldHVybnt4OnIrby5uZXh0KHMpLXMvMix5OmErby5uZXh0KHMpLXMvMn19fX19LHsibmdyYXBoLnJhbmRvbSI6MjV9XSwxMDpbZnVuY3Rpb24oZSxuKXt2YXIgdD1lKCJuZ3JhcGgucGh5c2ljcy5wcmltaXRpdmVzIik7bi5leHBvcnRzPWZ1bmN0aW9uKGUpe3JldHVybiBuZXcgdC5Cb2R5KGUpfX0seyJuZ3JhcGgucGh5c2ljcy5wcmltaXRpdmVzIjoxNn1dLDExOltmdW5jdGlvbihlLG4pe24uZXhwb3J0cz1mdW5jdGlvbihuKXt2YXIgdD1lKCJuZ3JhcGgubWVyZ2UiKSxyPWUoIm5ncmFwaC5leHBvc2UiKTtuPXQobix7ZHJhZ0NvZWZmOi4wMn0pO3ZhciBvPXt1cGRhdGU6ZnVuY3Rpb24oZSl7ZS5mb3JjZS54LT1uLmRyYWdDb2VmZiplLnZlbG9jaXR5LngsZS5mb3JjZS55LT1uLmRyYWdDb2VmZiplLnZlbG9jaXR5Lnl9fTtyZXR1cm4gcihuLG8sWyJkcmFnQ29lZmYiXSksb319LHsibmdyYXBoLmV4cG9zZSI6MTUsIm5ncmFwaC5tZXJnZSI6MjR9XSwxMjpbZnVuY3Rpb24oZSxuKXtmdW5jdGlvbiB0KGUsbil7dmFyIHQscj0wLG89MCxpPTAsYT0wLHU9ZS5sZW5ndGg7Zm9yKHQ9MDt1PnQ7Kyt0KXt2YXIgcz1lW3RdLGY9bi9zLm1hc3M7cy52ZWxvY2l0eS54Kz1mKnMuZm9yY2UueCxzLnZlbG9jaXR5LnkrPWYqcy5mb3JjZS55O3ZhciBjPXMudmVsb2NpdHkueCxkPXMudmVsb2NpdHkueSxsPU1hdGguc3FydChjKmMrZCpkKTtsPjEmJihzLnZlbG9jaXR5Lng9Yy9sLHMudmVsb2NpdHkueT1kL2wpLHI9bipzLnZlbG9jaXR5LngsaT1uKnMudmVsb2NpdHkueSxzLnBvcy54Kz1yLHMucG9zLnkrPWksbys9TWF0aC5hYnMociksYSs9TWF0aC5hYnMoaSl9cmV0dXJuKG8qbythKmEpL2UubGVuZ3RofW4uZXhwb3J0cz10fSx7fV0sMTM6W2Z1bmN0aW9uKGUsbil7ZnVuY3Rpb24gdChlLG4sdCxyLG8pe3RoaXMuZnJvbT1lLHRoaXMudG89bix0aGlzLmxlbmd0aD10LHRoaXMuY29lZmY9cix0aGlzLndlaWdodD0ibnVtYmVyIj09dHlwZW9mIG8/bzoxfW4uZXhwb3J0cz10fSx7fV0sMTQ6W2Z1bmN0aW9uKGUsbil7bi5leHBvcnRzPWZ1bmN0aW9uKG4pe3ZhciB0PWUoIm5ncmFwaC5tZXJnZSIpLHI9ZSgibmdyYXBoLnJhbmRvbSIpLnJhbmRvbSg0Miksbz1lKCJuZ3JhcGguZXhwb3NlIik7bj10KG4se3NwcmluZ0NvZWZmOjJlLTQsc3ByaW5nTGVuZ3RoOjgwfSk7dmFyIGk9e3VwZGF0ZTpmdW5jdGlvbihlKXt2YXIgdD1lLmZyb20sbz1lLnRvLGk9ZS5sZW5ndGg8MD9uLnNwcmluZ0xlbmd0aDplLmxlbmd0aCxhPW8ucG9zLngtdC5wb3MueCx1PW8ucG9zLnktdC5wb3MueSxzPU1hdGguc3FydChhKmErdSp1KTswPT09cyYmKGE9KHIubmV4dERvdWJsZSgpLS41KS81MCx1PShyLm5leHREb3VibGUoKS0uNSkvNTAscz1NYXRoLnNxcnQoYSphK3UqdSkpO3ZhciBmPXMtaSxjPSghZS5jb2VmZnx8ZS5jb2VmZjwwP24uc3ByaW5nQ29lZmY6ZS5jb2VmZikqZi9zKmUud2VpZ2h0O3QuZm9yY2UueCs9YyphLHQuZm9yY2UueSs9Yyp1LG8uZm9yY2UueC09YyphLG8uZm9yY2UueS09Yyp1fX07cmV0dXJuIG8obixpLFsic3ByaW5nQ29lZmYiLCJzcHJpbmdMZW5ndGgiXSksaX19LHsibmdyYXBoLmV4cG9zZSI6MTUsIm5ncmFwaC5tZXJnZSI6MjQsIm5ncmFwaC5yYW5kb20iOjI1fV0sMTU6W2Z1bmN0aW9uKGUsbil7ZnVuY3Rpb24gdChlLG4sdCl7dmFyIG89IltvYmplY3QgQXJyYXldIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0KTtpZihvKWZvcih2YXIgaT0wO2k8dC5sZW5ndGg7KytpKXIoZSxuLHRbaV0pO2Vsc2UgZm9yKHZhciBhIGluIGUpcihlLG4sYSl9ZnVuY3Rpb24gcihlLG4sdCl7aWYoZS5oYXNPd25Qcm9wZXJ0eSh0KSl7aWYoImZ1bmN0aW9uIj09dHlwZW9mIG5bdF0pcmV0dXJuO25bdF09ZnVuY3Rpb24ocil7cmV0dXJuIHZvaWQgMCE9PXI/KGVbdF09cixuKTplW3RdfX19bi5leHBvcnRzPXR9LHt9XSwxNjpbZnVuY3Rpb24oZSxuKXtmdW5jdGlvbiB0KGUsbil7dGhpcy5wb3M9bmV3IHIoZSxuKSx0aGlzLnByZXZQb3M9bmV3IHIoZSxuKSx0aGlzLmZvcmNlPW5ldyByLHRoaXMudmVsb2NpdHk9bmV3IHIsdGhpcy5tYXNzPTF9ZnVuY3Rpb24gcihlLG4pe2UmJiJudW1iZXIiIT10eXBlb2YgZT8odGhpcy54PSJudW1iZXIiPT10eXBlb2YgZS54P2UueDowLHRoaXMueT0ibnVtYmVyIj09dHlwZW9mIGUueT9lLnk6MCk6KHRoaXMueD0ibnVtYmVyIj09dHlwZW9mIGU/ZTowLHRoaXMueT0ibnVtYmVyIj09dHlwZW9mIG4/bjowKX1mdW5jdGlvbiBvKGUsbix0KXt0aGlzLnBvcz1uZXcgaShlLG4sdCksdGhpcy5wcmV2UG9zPW5ldyBpKGUsbix0KSx0aGlzLmZvcmNlPW5ldyBpLHRoaXMudmVsb2NpdHk9bmV3IGksdGhpcy5tYXNzPTF9ZnVuY3Rpb24gaShlLG4sdCl7ZSYmIm51bWJlciIhPXR5cGVvZiBlPyh0aGlzLng9Im51bWJlciI9PXR5cGVvZiBlLng/ZS54OjAsdGhpcy55PSJudW1iZXIiPT10eXBlb2YgZS55P2UueTowLHRoaXMuej0ibnVtYmVyIj09dHlwZW9mIGUuej9lLno6MCk6KHRoaXMueD0ibnVtYmVyIj09dHlwZW9mIGU/ZTowLHRoaXMueT0ibnVtYmVyIj09dHlwZW9mIG4/bjowLHRoaXMuej0ibnVtYmVyIj09dHlwZW9mIHQ/dDowKX1uLmV4cG9ydHM9e0JvZHk6dCxWZWN0b3IyZDpyLEJvZHkzZDpvLFZlY3RvcjNkOml9LHQucHJvdG90eXBlLnNldFBvc2l0aW9uPWZ1bmN0aW9uKGUsbil7dGhpcy5wcmV2UG9zLng9dGhpcy5wb3MueD1lLHRoaXMucHJldlBvcy55PXRoaXMucG9zLnk9bn0sci5wcm90b3R5cGUucmVzZXQ9ZnVuY3Rpb24oKXt0aGlzLng9dGhpcy55PTB9LG8ucHJvdG90eXBlLnNldFBvc2l0aW9uPWZ1bmN0aW9uKGUsbix0KXt0aGlzLnByZXZQb3MueD10aGlzLnBvcy54PWUsdGhpcy5wcmV2UG9zLnk9dGhpcy5wb3MueT1uLHRoaXMucHJldlBvcy56PXRoaXMucG9zLno9dH0saS5wcm90b3R5cGUucmVzZXQ9ZnVuY3Rpb24oKXt0aGlzLng9dGhpcy55PXRoaXMuej0wfX0se31dLDE3OltmdW5jdGlvbihlLG4pe2Z1bmN0aW9uIHQoZSxuKXtyZXR1cm4gMD09PW4/ZS5xdWFkMDoxPT09bj9lLnF1YWQxOjI9PT1uP2UucXVhZDI6Mz09PW4/ZS5xdWFkMzpudWxsfWZ1bmN0aW9uIHIoZSxuLHQpezA9PT1uP2UucXVhZDA9dDoxPT09bj9lLnF1YWQxPXQ6Mj09PW4/ZS5xdWFkMj10OjM9PT1uJiYoZS5xdWFkMz10KX1uLmV4cG9ydHM9ZnVuY3Rpb24obil7bj1ufHx7fSxuLmdyYXZpdHk9Im51bWJlciI9PXR5cGVvZiBuLmdyYXZpdHk/bi5ncmF2aXR5Oi0xLG4udGhldGE9Im51bWJlciI9PXR5cGVvZiBuLnRoZXRhP24udGhldGE6Ljg7dmFyIG89ZSgibmdyYXBoLnJhbmRvbSIpLnJhbmRvbSgxOTg0KSxpPWUoIi4vbm9kZSIpLGE9ZSgiLi9pbnNlcnRTdGFjayIpLHU9ZSgiLi9pc1NhbWVQb3NpdGlvbiIpLHM9bi5ncmF2aXR5LGY9W10sYz1uZXcgYSxkPW4udGhldGEsbD1bXSxwPTAsdj1mdW5jdGlvbigpe3ZhciBlPWxbcF07cmV0dXJuIGU/KGUucXVhZDA9bnVsbCxlLnF1YWQxPW51bGwsZS5xdWFkMj1udWxsLGUucXVhZDM9bnVsbCxlLmJvZHk9bnVsbCxlLm1hc3M9ZS5tYXNzWD1lLm1hc3NZPTAsZS5sZWZ0PWUucmlnaHQ9ZS50b3A9ZS5ib3R0b209MCk6KGU9bmV3IGksbFtwXT1lKSwrK3AsZX0sZz12KCksaD1mdW5jdGlvbihlKXtmb3IoYy5yZXNldCgpLGMucHVzaChnLGUpOyFjLmlzRW1wdHkoKTspe3ZhciBuPWMucG9wKCksaT1uLm5vZGUsYT1uLmJvZHk7aWYoaS5ib2R5KXt2YXIgcz1pLmJvZHk7aWYoaS5ib2R5PW51bGwsdShzLnBvcyxhLnBvcykpe3ZhciBmPTM7ZG97dmFyIGQ9by5uZXh0RG91YmxlKCksbD0oaS5yaWdodC1pLmxlZnQpKmQscD0oaS5ib3R0b20taS50b3ApKmQ7cy5wb3MueD1pLmxlZnQrbCxzLnBvcy55PWkudG9wK3AsZi09MX13aGlsZShmPjAmJnUocy5wb3MsYS5wb3MpKTtpZigwPT09ZiYmdShzLnBvcyxhLnBvcykpcmV0dXJufWMucHVzaChpLHMpLGMucHVzaChpLGEpfWVsc2V7dmFyIGg9YS5wb3MueCxtPWEucG9zLnk7aS5tYXNzPWkubWFzcythLm1hc3MsaS5tYXNzWD1pLm1hc3NYK2EubWFzcypoLGkubWFzc1k9aS5tYXNzWSthLm1hc3MqbTt2YXIgeT0wLHg9aS5sZWZ0LHc9KGkucmlnaHQreCkvMixiPWkudG9wLEU9KGkuYm90dG9tK2IpLzI7aWYoaD53KXt5Kz0xO3ZhciBMPXg7eD13LHcrPXctTH1pZihtPkUpe3krPTI7dmFyIFA9YjtiPUUsRSs9RS1QfXZhciBOPXQoaSx5KTtOP2MucHVzaChOLGEpOihOPXYoKSxOLmxlZnQ9eCxOLnRvcD1iLE4ucmlnaHQ9dyxOLmJvdHRvbT1FLE4uYm9keT1hLHIoaSx5LE4pKX19fSxtPWZ1bmN0aW9uKGUpe3ZhciBuLHQscixpLGE9Zix1PTAsYz0wLGw9MSxwPTAsdj0xO2ZvcihhWzBdPWc7bDspe3ZhciBoPWFbcF0sbT1oLmJvZHk7bC09MSxwKz0xO3ZhciB5PW0hPT1lO20mJnk/KHQ9bS5wb3MueC1lLnBvcy54LHI9bS5wb3MueS1lLnBvcy55LGk9TWF0aC5zcXJ0KHQqdCtyKnIpLDA9PT1pJiYodD0oby5uZXh0RG91YmxlKCktLjUpLzUwLHI9KG8ubmV4dERvdWJsZSgpLS41KS81MCxpPU1hdGguc3FydCh0KnQrcipyKSksbj1zKm0ubWFzcyplLm1hc3MvKGkqaSppKSx1Kz1uKnQsYys9bipyKTp5JiYodD1oLm1hc3NYL2gubWFzcy1lLnBvcy54LHI9aC5tYXNzWS9oLm1hc3MtZS5wb3MueSxpPU1hdGguc3FydCh0KnQrcipyKSwwPT09aSYmKHQ9KG8ubmV4dERvdWJsZSgpLS41KS81MCxyPShvLm5leHREb3VibGUoKS0uNSkvNTAsaT1NYXRoLnNxcnQodCp0K3IqcikpLChoLnJpZ2h0LWgubGVmdCkvaTxkPyhuPXMqaC5tYXNzKmUubWFzcy8oaSppKmkpLHUrPW4qdCxjKz1uKnIpOihoLnF1YWQwJiYoYVt2XT1oLnF1YWQwLGwrPTEsdis9MSksaC5xdWFkMSYmKGFbdl09aC5xdWFkMSxsKz0xLHYrPTEpLGgucXVhZDImJihhW3ZdPWgucXVhZDIsbCs9MSx2Kz0xKSxoLnF1YWQzJiYoYVt2XT1oLnF1YWQzLGwrPTEsdis9MSkpKX1lLmZvcmNlLngrPXUsZS5mb3JjZS55Kz1jfSx5PWZ1bmN0aW9uKGUpe3ZhciBuLHQ9TnVtYmVyLk1BWF9WQUxVRSxyPU51bWJlci5NQVhfVkFMVUUsbz1OdW1iZXIuTUlOX1ZBTFVFLGk9TnVtYmVyLk1JTl9WQUxVRSxhPWUubGVuZ3RoO2ZvcihuPWE7bi0tOyl7dmFyIHU9ZVtuXS5wb3MueCxzPWVbbl0ucG9zLnk7dD51JiYodD11KSx1Pm8mJihvPXUpLHI+cyYmKHI9cykscz5pJiYoaT1zKX12YXIgZj1vLXQsYz1pLXI7Zm9yKGY+Yz9pPXIrZjpvPXQrYyxwPTAsZz12KCksZy5sZWZ0PXQsZy5yaWdodD1vLGcudG9wPXIsZy5ib3R0b209aSxuPWEtMSxuPjAmJihnLmJvZHk9ZVtuXSk7bi0tOyloKGVbbl0sZyl9O3JldHVybntpbnNlcnRCb2RpZXM6eSx1cGRhdGVCb2R5Rm9yY2U6bSxvcHRpb25zOmZ1bmN0aW9uKGUpe3JldHVybiBlPygibnVtYmVyIj09dHlwZW9mIGUuZ3Jhdml0eSYmKHM9ZS5ncmF2aXR5KSwibnVtYmVyIj09dHlwZW9mIGUudGhldGEmJihkPWUudGhldGEpLHRoaXMpOntncmF2aXR5OnMsdGhldGE6ZH19fX19LHsiLi9pbnNlcnRTdGFjayI6MTgsIi4vaXNTYW1lUG9zaXRpb24iOjE5LCIuL25vZGUiOjIwLCJuZ3JhcGgucmFuZG9tIjoyNX1dLDE4OltmdW5jdGlvbihlLG4pe2Z1bmN0aW9uIHQoKXt0aGlzLnN0YWNrPVtdLHRoaXMucG9wSWR4PTB9ZnVuY3Rpb24gcihlLG4pe3RoaXMubm9kZT1lLHRoaXMuYm9keT1ufW4uZXhwb3J0cz10LHQucHJvdG90eXBlPXtpc0VtcHR5OmZ1bmN0aW9uKCl7cmV0dXJuIDA9PT10aGlzLnBvcElkeH0scHVzaDpmdW5jdGlvbihlLG4pe3ZhciB0PXRoaXMuc3RhY2tbdGhpcy5wb3BJZHhdO3Q/KHQubm9kZT1lLHQuYm9keT1uKTp0aGlzLnN0YWNrW3RoaXMucG9wSWR4XT1uZXcgcihlLG4pLCsrdGhpcy5wb3BJZHh9LHBvcDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnBvcElkeD4wP3RoaXMuc3RhY2tbLS10aGlzLnBvcElkeF06dm9pZCAwfSxyZXNldDpmdW5jdGlvbigpe3RoaXMucG9wSWR4PTB9fX0se31dLDE5OltmdW5jdGlvbihlLG4pe24uZXhwb3J0cz1mdW5jdGlvbihlLG4pe3ZhciB0PU1hdGguYWJzKGUueC1uLngpLHI9TWF0aC5hYnMoZS55LW4ueSk7cmV0dXJuIDFlLTg+dCYmMWUtOD5yfX0se31dLDIwOltmdW5jdGlvbihlLG4pe24uZXhwb3J0cz1mdW5jdGlvbigpe3RoaXMuYm9keT1udWxsLHRoaXMucXVhZDA9bnVsbCx0aGlzLnF1YWQxPW51bGwsdGhpcy5xdWFkMj1udWxsLHRoaXMucXVhZDM9bnVsbCx0aGlzLm1hc3M9MCx0aGlzLm1hc3NYPTAsdGhpcy5tYXNzWT0wLHRoaXMubGVmdD0wLHRoaXMudG9wPTAsdGhpcy5ib3R0b209MCx0aGlzLnJpZ2h0PTB9fSx7fV0sMjE6W2Z1bmN0aW9uKGUsbil7ZnVuY3Rpb24gdChlLG4sdCl7dmFyIGk7bj1ufHxyLHQ9dHx8cixpPSJzdHJpbmciPT10eXBlb2YgZT9KU09OLnBhcnNlKGUpOmU7dmFyIGEsdT1vKCk7aWYodm9pZCAwPT09aS5saW5rc3x8dm9pZCAwPT09aS5ub2Rlcyl0aHJvdyBuZXcgRXJyb3IoIkNhbm5vdCBsb2FkIGdyYXBoIHdpdGhvdXQgbGlua3MgYW5kIG5vZGVzIik7Zm9yKGE9MDthPGkubm9kZXMubGVuZ3RoOysrYSl7dmFyIHM9bihpLm5vZGVzW2FdKTtpZighcy5oYXNPd25Qcm9wZXJ0eSgiaWQiKSl0aHJvdyBuZXcgRXJyb3IoIkdyYXBoIG5vZGUgZm9ybWF0IGlzIGludmFsaWQ6IE5vZGUgaWQgaXMgbWlzc2luZyIpO3UuYWRkTm9kZShzLmlkLHMuZGF0YSl9Zm9yKGE9MDthPGkubGlua3MubGVuZ3RoOysrYSl7dmFyIGY9dChpLmxpbmtzW2FdKTtpZighZi5oYXNPd25Qcm9wZXJ0eSgiZnJvbUlkIil8fCFmLmhhc093blByb3BlcnR5KCJ0b0lkIikpdGhyb3cgbmV3IEVycm9yKCJHcmFwaCBsaW5rIGZvcm1hdCBpcyBpbnZhbGlkLiBCb3RoIGZyb21JZCBhbmQgdG9JZCBhcmUgcmVxdWlyZWQiKTt1LmFkZExpbmsoZi5mcm9tSWQsZi50b0lkLGYuZGF0YSl9cmV0dXJuIHV9ZnVuY3Rpb24gcihlKXtyZXR1cm4gZX1uLmV4cG9ydHM9dDt2YXIgbz1lKCJuZ3JhcGguZ3JhcGgiKX0seyJuZ3JhcGguZ3JhcGgiOjIzfV0sMjI6W2Z1bmN0aW9uKGUsbil7ZnVuY3Rpb24gdChlKXtpZighZXx8MD5lKXRocm93IG5ldyBFcnJvcigiSW52YWxpZCBudW1iZXIgb2Ygbm9kZXMiKTt2YXIgbix0PWwoKTtmb3Iobj0wO2UtMT5uOysrbil0LmFkZExpbmsobixuKzEpLHQuYWRkTGluayhlK24sZStuKzEpLHQuYWRkTGluayhuLGUrbik7cmV0dXJuIHQuYWRkTGluayhlLTEsMiplLTEpLHR9ZnVuY3Rpb24gcihlKXtpZighZXx8MD5lKXRocm93IG5ldyBFcnJvcigiSW52YWxpZCBudW1iZXIgb2Ygbm9kZXMiKTt2YXIgbj10KGUpO3JldHVybiBuLmFkZExpbmsoMCxlLTEpLG4uYWRkTGluayhlLDIqZS0xKSxufWZ1bmN0aW9uIG8oZSl7aWYoIWV8fDE+ZSl0aHJvdyBuZXcgRXJyb3IoIkF0IGxlYXN0IHR3byBub2RlcyBhcmUgZXhwZWN0ZWQgZm9yIGNvbXBsZXRlIGdyYXBoIik7dmFyIG4sdCxyPWwoKTtmb3Iobj0wO2U+bjsrK24pZm9yKHQ9bisxO2U+dDsrK3QpbiE9PXQmJnIuYWRkTGluayhuLHQpO3JldHVybiByfWZ1bmN0aW9uIGkoZSxuKXtpZighZXx8IW58fDA+ZXx8MD5uKXRocm93IG5ldyBFcnJvcigiR3JhcGggZGltZW5zaW9ucyBhcmUgaW52YWxpZC4gTnVtYmVyIG9mIG5vZGVzIGluIGVhY2ggcGFydGl0aW9uIHNob3VsZCBiZSBncmVhdGVyIHRoYW4gMCIpO3ZhciB0LHIsbz1sKCk7Zm9yKHQ9MDtlPnQ7Kyt0KWZvcihyPWU7ZStuPnI7KytyKW8uYWRkTGluayh0LHIpO3JldHVybiBvfWZ1bmN0aW9uIGEoZSl7aWYoIWV8fDA+ZSl0aHJvdyBuZXcgRXJyb3IoIkludmFsaWQgbnVtYmVyIG9mIG5vZGVzIik7dmFyIG4sdD1sKCk7Zm9yKHQuYWRkTm9kZSgwKSxuPTE7ZT5uOysrbil0LmFkZExpbmsobi0xLG4pO3JldHVybiB0fWZ1bmN0aW9uIHUoZSxuKXtpZigxPmV8fDE+bil0aHJvdyBuZXcgRXJyb3IoIkludmFsaWQgbnVtYmVyIG9mIG5vZGVzIGluIGdyaWQgZ3JhcGgiKTt2YXIgdCxyLG89bCgpO2lmKDE9PT1lJiYxPT09bilyZXR1cm4gby5hZGROb2RlKDApLG87Zm9yKHQ9MDtlPnQ7Kyt0KWZvcihyPTA7bj5yOysrcil7dmFyIGk9dCtyKmU7dD4wJiZvLmFkZExpbmsoaSx0LTErciplKSxyPjAmJm8uYWRkTGluayhpLHQrKHItMSkqZSl9cmV0dXJuIG99ZnVuY3Rpb24gcyhlLG4sdCl7aWYoMT5lfHwxPm58fDE+dCl0aHJvdyBuZXcgRXJyb3IoIkludmFsaWQgbnVtYmVyIG9mIG5vZGVzIGluIGdyaWQzIGdyYXBoIik7dmFyIHIsbyxpLGE9bCgpO2lmKDE9PT1lJiYxPT09biYmMT09PXQpcmV0dXJuIGEuYWRkTm9kZSgwKSxhO2ZvcihpPTA7dD5pOysraSlmb3Iocj0wO2U+cjsrK3IpZm9yKG89MDtuPm87KytvKXt2YXIgdT1pKmUqbixzPXIrbyplK3U7cj4wJiZhLmFkZExpbmsocyxyLTErbyplK3UpLG8+MCYmYS5hZGRMaW5rKHMscisoby0xKSplK3UpLGk+MCYmYS5hZGRMaW5rKHMscitvKmUrKGktMSkqZSpuKX1yZXR1cm4gYX1mdW5jdGlvbiBmKGUpe2lmKDA+ZSl0aHJvdyBuZXcgRXJyb3IoIkludmFsaWQgbnVtYmVyIG9mIG5vZGVzIGluIGJhbGFuY2VkIHRyZWUiKTt2YXIgbix0PWwoKSxyPU1hdGgucG93KDIsZSk7Zm9yKDA9PT1lJiZ0LmFkZE5vZGUoMSksbj0xO3I+bjsrK24pe3ZhciBvPW4saT0yKm8sYT0yKm8rMTt0LmFkZExpbmsobyxpKSx0LmFkZExpbmsobyxhKX1yZXR1cm4gdH1mdW5jdGlvbiBjKGUpe2lmKDA+ZSl0aHJvdyBuZXcgRXJyb3IoIk51bWJlciBvZiBub2RlcyBzaG91bCBiZSA+PSAwIik7dmFyIG4sdD1sKCk7Zm9yKG49MDtlPm47KytuKXQuYWRkTm9kZShuKTtyZXR1cm4gdH1mdW5jdGlvbiBkKG4sdCxyLG8pe2lmKHQ+PW4pdGhyb3cgbmV3IEVycm9yKCJDaG9vc2Ugc21hbGxlciBga2AuIEl0IGNhbm5vdCBiZSBsYXJnZXIgdGhhbiBudW1iZXIgb2Ygbm9kZXMgYG5gIik7dmFyIGksYSx1PWUoIm5ncmFwaC5yYW5kb20iKS5yYW5kb20ob3x8NDIpLHM9bCgpO2ZvcihpPTA7bj5pOysraSlzLmFkZE5vZGUoaSk7Zm9yKHZhciBmPU1hdGguZmxvb3IodC8yKzEpLGM9MTtmPmM7KytjKWZvcihpPTA7bj5pOysraSlhPShjK2kpJW4scy5hZGRMaW5rKGksYSk7Zm9yKGM9MTtmPmM7KytjKWZvcihpPTA7bj5pOysraSlpZih1Lm5leHREb3VibGUoKTxyKXt2YXIgZD1pO2E9KGMraSklbjt2YXIgcD11Lm5leHQobiksdj1wPT09ZHx8cy5oYXNMaW5rKGQscCk7aWYodiYmcy5nZXRMaW5rcyhkKS5sZW5ndGg9PT1uLTEpY29udGludWU7Zm9yKDt2OylwPXUubmV4dChuKSx2PXA9PT1kfHxzLmhhc0xpbmsoZCxwKTt2YXIgZz1zLmhhc0xpbmsoZCxhKTtzLnJlbW92ZUxpbmsoZykscy5hZGRMaW5rKGQscCl9cmV0dXJuIHN9bi5leHBvcnRzPXtsYWRkZXI6dCxjb21wbGV0ZTpvLGNvbXBsZXRlQmlwYXJ0aXRlOmksYmFsYW5jZWRCaW5UcmVlOmYscGF0aDphLGNpcmN1bGFyTGFkZGVyOnIsZ3JpZDp1LGdyaWQzOnMsbm9MaW5rczpjLHdhdHRzU3Ryb2dhdHo6ZH07dmFyIGw9ZSgibmdyYXBoLmdyYXBoIil9LHsibmdyYXBoLmdyYXBoIjoyMywibmdyYXBoLnJhbmRvbSI6MjV9XSwyMzpbZnVuY3Rpb24oZSxuKXtmdW5jdGlvbiB0KGUpe2Z1bmN0aW9uIG4oKXtmdW5jdGlvbiBlKCl7cmV0dXJuIE8uYmVnaW5VcGRhdGU9Qj1MLE8uZW5kVXBkYXRlPUY9UCxVPXQsUj11LE8ub249bixuLmFwcGx5KE8sYXJndW1lbnRzKX12YXIgbj1PLm9uO08ub249ZX1mdW5jdGlvbiB0KGUsbil7TS5wdXNoKHtsaW5rOmUsY2hhbmdlVHlwZTpufSl9ZnVuY3Rpb24gdShlLG4pe00ucHVzaCh7bm9kZTplLGNoYW5nZVR5cGU6bn0pfWZ1bmN0aW9uIHMoZSxuKXtpZih2b2lkIDA9PT1lKXRocm93IG5ldyBFcnJvcigiSW52YWxpZCBub2RlIGlkZW50aWZpZXIiKTtCKCk7dmFyIHQ9ZihlKTtyZXR1cm4gdD9SKHQsInVwZGF0ZSIpOih0PW5ldyBvKGUpLFQrKyxSKHQsImFkZCIpKSx0LmRhdGE9bixqW2VdPXQsRigpLHR9ZnVuY3Rpb24gZihlKXtyZXR1cm4galtlXX1mdW5jdGlvbiBjKGUpe3ZhciBuPWYoZSk7aWYoIW4pcmV0dXJuITE7Zm9yKEIoKTtuLmxpbmtzLmxlbmd0aDspe3ZhciB0PW4ubGlua3NbMF07Zyh0KX1yZXR1cm4gZGVsZXRlIGpbZV0sVC0tLFIobiwicmVtb3ZlIiksRigpLCEwfWZ1bmN0aW9uIGQoZSxuLHQpe0IoKTt2YXIgcj1mKGUpfHxzKGUpLG89ZihuKXx8cyhuKSxpPUQoZSxuLHQpO3JldHVybiBfLnB1c2goaSksci5saW5rcy5wdXNoKGkpLGUhPT1uJiZvLmxpbmtzLnB1c2goaSksVShpLCJhZGQiKSxGKCksaX1mdW5jdGlvbiBsKGUsbix0KXt2YXIgcj1lLnRvU3RyaW5nKCkrbi50b1N0cmluZygpO3JldHVybiBuZXcgaShlLG4sdCxyKX1mdW5jdGlvbiBwKGUsbix0KXt2YXIgcj1lLnRvU3RyaW5nKCkrIvCfkYkgIituLnRvU3RyaW5nKCksbz1JLmhhc093blByb3BlcnR5KHIpO3JldHVybihvfHxoKGUsbikpJiYob3x8KElbcl09MCkscis9IkAiKyArK0lbcl0pLG5ldyBpKGUsbix0LHIpfWZ1bmN0aW9uIHYoZSl7dmFyIG49ZihlKTtyZXR1cm4gbj9uLmxpbmtzOm51bGx9ZnVuY3Rpb24gZyhlKXtpZighZSlyZXR1cm4hMTt2YXIgbj1yKGUsXyk7aWYoMD5uKXJldHVybiExO0IoKSxfLnNwbGljZShuLDEpO3ZhciB0PWYoZS5mcm9tSWQpLG89ZihlLnRvSWQpO3JldHVybiB0JiYobj1yKGUsdC5saW5rcyksbj49MCYmdC5saW5rcy5zcGxpY2UobiwxKSksbyYmKG49cihlLG8ubGlua3MpLG4+PTAmJm8ubGlua3Muc3BsaWNlKG4sMSkpLFUoZSwicmVtb3ZlIiksRigpLCEwfWZ1bmN0aW9uIGgoZSxuKXt2YXIgdCxyPWYoZSk7aWYoIXIpcmV0dXJuIG51bGw7Zm9yKHQ9MDt0PHIubGlua3MubGVuZ3RoOysrdCl7dmFyIG89ci5saW5rc1t0XTtpZihvLmZyb21JZD09PWUmJm8udG9JZD09PW4pcmV0dXJuIG99cmV0dXJuIG51bGx9ZnVuY3Rpb24gbSgpe0IoKSxTKGZ1bmN0aW9uKGUpe2MoZS5pZCl9KSxGKCl9ZnVuY3Rpb24geShlKXt2YXIgbix0O2lmKCJmdW5jdGlvbiI9PXR5cGVvZiBlKWZvcihuPTAsdD1fLmxlbmd0aDt0Pm47KytuKWUoX1tuXSl9ZnVuY3Rpb24geChlLG4sdCl7dmFyIHI9ZihlKTtyZXR1cm4gciYmci5saW5rcyYmImZ1bmN0aW9uIj09dHlwZW9mIG4/dD9iKHIubGlua3MsZSxuKTp3KHIubGlua3MsZSxuKTp2b2lkIDB9ZnVuY3Rpb24gdyhlLG4sdCl7Zm9yKHZhciByLG89MDtvPGUubGVuZ3RoOysrbyl7dmFyIGk9ZVtvXSxhPWkuZnJvbUlkPT09bj9pLnRvSWQ6aS5mcm9tSWQ7aWYocj10KGpbYV0saSkpcmV0dXJuITB9fWZ1bmN0aW9uIGIoZSxuLHQpe2Zvcih2YXIgcixvPTA7bzxlLmxlbmd0aDsrK28pe3ZhciBpPWVbb107aWYoaS5mcm9tSWQ9PT1uJiYocj10KGpbaS50b0lkXSxpKSkpcmV0dXJuITB9fWZ1bmN0aW9uIEUoKXt9ZnVuY3Rpb24gTCgpe0MrPTF9ZnVuY3Rpb24gUCgpe0MtPTEsMD09PUMmJk0ubGVuZ3RoPjAmJihPLmZpcmUoImNoYW5nZWQiLE0pLE0ubGVuZ3RoPTApfWZ1bmN0aW9uIE4oKXtyZXR1cm4gT2JqZWN0LmtleXM/azpBfWZ1bmN0aW9uIGsoZSl7aWYoImZ1bmN0aW9uIj09dHlwZW9mIGUpZm9yKHZhciBuPU9iamVjdC5rZXlzKGopLHQ9MDt0PG4ubGVuZ3RoOysrdClpZihlKGpbblt0XV0pKXJldHVybiEwfWZ1bmN0aW9uIEEoZSl7aWYoImZ1bmN0aW9uIj09dHlwZW9mIGUpe3ZhciBuO2ZvcihuIGluIGopaWYoZShqW25dKSlyZXR1cm4hMH19ZT1lfHx7fSx2b2lkIDA9PT1lLnVuaXF1ZUxpbmtJZCYmKGUudW5pcXVlTGlua0lkPSEwKTt2YXIgaj0iZnVuY3Rpb24iPT10eXBlb2YgT2JqZWN0LmNyZWF0ZT9PYmplY3QuY3JlYXRlKG51bGwpOnt9LF89W10sST17fSxUPTAsQz0wLFM9TigpLEQ9ZS51bmlxdWVMaW5rSWQ/cDpsLE09W10sVT1FLFI9RSxCPUUsRj1FLE89e2FkZE5vZGU6cyxhZGRMaW5rOmQscmVtb3ZlTGluazpnLHJlbW92ZU5vZGU6YyxnZXROb2RlOmYsZ2V0Tm9kZXNDb3VudDpmdW5jdGlvbigpe3JldHVybiBUfSxnZXRMaW5rc0NvdW50OmZ1bmN0aW9uKCl7cmV0dXJuIF8ubGVuZ3RofSxnZXRMaW5rczp2LGZvckVhY2hOb2RlOlMsZm9yRWFjaExpbmtlZE5vZGU6eCxmb3JFYWNoTGluazp5LGJlZ2luVXBkYXRlOkIsZW5kVXBkYXRlOkYsY2xlYXI6bSxoYXNMaW5rOmgsZ2V0TGluazpofTtyZXR1cm4gYShPKSxuKCksT31mdW5jdGlvbiByKGUsbil7aWYobi5pbmRleE9mKXJldHVybiBuLmluZGV4T2YoZSk7dmFyIHQscj1uLmxlbmd0aDtmb3IodD0wO3I+dDt0Kz0xKWlmKG5bdF09PT1lKXJldHVybiB0O3JldHVybi0xfWZ1bmN0aW9uIG8oZSl7dGhpcy5pZD1lLHRoaXMubGlua3M9W10sdGhpcy5kYXRhPW51bGx9ZnVuY3Rpb24gaShlLG4sdCxyKXt0aGlzLmZyb21JZD1lLHRoaXMudG9JZD1uLHRoaXMuZGF0YT10LHRoaXMuaWQ9cn1uLmV4cG9ydHM9dDt2YXIgYT1lKCJuZ3JhcGguZXZlbnRzIil9LHsibmdyYXBoLmV2ZW50cyI6Nn1dLDI0OltmdW5jdGlvbihlLG4pe2Z1bmN0aW9uIHQoZSxuKXt2YXIgcjtpZihlfHwoZT17fSksbilmb3IociBpbiBuKWlmKG4uaGFzT3duUHJvcGVydHkocikpe3ZhciBvPWUuaGFzT3duUHJvcGVydHkociksaT10eXBlb2YgbltyXSxhPSFvfHx0eXBlb2YgZVtyXSE9PWk7YT9lW3JdPW5bcl06Im9iamVjdCI9PT1pJiYoZVtyXT10KGVbcl0sbltyXSkpfXJldHVybiBlfW4uZXhwb3J0cz10fSx7fV0sMjU6W2Z1bmN0aW9uKGUsbil7ZnVuY3Rpb24gdChlKXt2YXIgbj0ibnVtYmVyIj09dHlwZW9mIGU/ZTorbmV3IERhdGUsdD1mdW5jdGlvbigpe3JldHVybiBuPW4rMjEyNzkxMjIxNCsobjw8MTIpJjQyOTQ5NjcyOTUsbj00Mjk0OTY3Mjk1JigzMzQ1MDcyNzAwXm5ebj4+PjE5KSxuPW4rMzc0NzYxMzkzKyhuPDw1KSY0Mjk0OTY3Mjk1LG49NDI5NDk2NzI5NSYobiszNTUwNjM1MTE2Xm48PDkpLG49bis0MjUxOTkzNzk3KyhuPDwzKSY0Mjk0OTY3Mjk1LG49NDI5NDk2NzI5NSYoMzA0MjU5NDU2OV5uXm4+Pj4xNiksKDI2ODQzNTQ1NSZuKS8yNjg0MzU0NTZ9O3JldHVybntuZXh0OmZ1bmN0aW9uKGUpe3JldHVybiBNYXRoLmZsb29yKHQoKSplKX0sbmV4dERvdWJsZTpmdW5jdGlvbigpe3JldHVybiB0KCl9fX1mdW5jdGlvbiByKGUsbil7dmFyIHI9bnx8dCgpO2lmKCJmdW5jdGlvbiIhPXR5cGVvZiByLm5leHQpdGhyb3cgbmV3IEVycm9yKCJjdXN0b21SYW5kb20gZG9lcyBub3QgbWF0Y2ggZXhwZWN0ZWQgQVBJOiBuZXh0KCkgZnVuY3Rpb24gaXMgbWlzc2luZyIpO3JldHVybntmb3JFYWNoOmZ1bmN0aW9uKG4pe3ZhciB0LG8saTtmb3IodD1lLmxlbmd0aC0xO3Q+MDstLXQpbz1yLm5leHQodCsxKSxpPWVbb10sZVtvXT1lW3RdLGVbdF09aSxuKGkpO2UubGVuZ3RoJiZuKGVbMF0pfSxzaHVmZmxlOmZ1bmN0aW9uKCl7dmFyIG4sdCxvO2ZvcihuPWUubGVuZ3RoLTE7bj4wOy0tbil0PXIubmV4dChuKzEpLG89ZVt0XSxlW3RdPWVbbl0sZVtuXT1vO3JldHVybiBlfX19bi5leHBvcnRzPXtyYW5kb206dCxyYW5kb21JdGVyYXRvcjpyfX0se31dLDI2OltmdW5jdGlvbihlLG4pe2Z1bmN0aW9uIHQoZSxuLHQpe2Z1bmN0aW9uIHIoZSl7dS5ub2Rlcy5wdXNoKHMoZSkpfWZ1bmN0aW9uIG8oZSl7dS5saW5rcy5wdXNoKGYoZSkpfWZ1bmN0aW9uIGkoZSl7dmFyIG49e2lkOmUuaWR9O3JldHVybiB2b2lkIDAhPT1lLmRhdGEmJihuLmRhdGE9ZS5kYXRhKSxufWZ1bmN0aW9uIGEoZSl7dmFyIG49e2Zyb21JZDplLmZyb21JZCx0b0lkOmUudG9JZH07cmV0dXJuIHZvaWQgMCE9PWUuZGF0YSYmKG4uZGF0YT1lLmRhdGEpLG59dmFyIHU9e25vZGVzOltdLGxpbmtzOltdfSxzPW58fGksZj10fHxhO3JldHVybiBlLmZvckVhY2hOb2RlKHIpLGUuZm9yRWFjaExpbmsobyksSlNPTi5zdHJpbmdpZnkodSl9bi5leHBvcnRzPXR9LHt9XSwyNzpbZnVuY3Rpb24oZSxuKXtmdW5jdGlvbiB0KGUsbil7dmFyIHQ9cihlKTtpZih2b2lkIDA9PT1uKXJldHVybiB0O2Zvcih2YXIgbz1PYmplY3Qua2V5cyhuKSxpPTA7aTxvLmxlbmd0aDsrK2kpe3ZhciBhPW9baV0sdT1uW2FdOyJsaW5rIj09PWE/dC5saW5rKHUpOnQuYXR0cihhLHUpfXJldHVybiB0fWZ1bmN0aW9uIHIoZSl7ZnVuY3Rpb24gbihlKXtyZXR1cm4gdnx8KHY9byhwKSksdi5saW5rKGUpLHB9ZnVuY3Rpb24gcihlLG4sdCl7cmV0dXJuIGkuYWRkRXZlbnRMaXN0ZW5lcihwLGUsbix0KSxwfWZ1bmN0aW9uIHMoZSxuLHQpe3JldHVybiBpLnJlbW92ZUV2ZW50TGlzdGVuZXIocCxlLG4sdCkscH1mdW5jdGlvbiBmKGUpe3ZhciBuPXQoZSk7cmV0dXJuIHAuYXBwZW5kQ2hpbGQobiksbn1mdW5jdGlvbiBjKGUsbil7cmV0dXJuIDI9PT1hcmd1bWVudHMubGVuZ3RoPyhudWxsIT09bj9wLnNldEF0dHJpYnV0ZU5TKG51bGwsZSxuKTpwLnJlbW92ZUF0dHJpYnV0ZU5TKG51bGwsZSkscCk6cC5nZXRBdHRyaWJ1dGVOUyhudWxsLGUpfWZ1bmN0aW9uIGQoZSl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/KHAuc2V0QXR0cmlidXRlTlModSwieGxpbms6aHJlZiIsZSkscCk6cC5nZXRBdHRyaWJ1dGVOUyh1LCJ4bGluazpocmVmIil9ZnVuY3Rpb24gbChlKXtyZXR1cm4gdm9pZCAwIT09ZT8ocC50ZXh0Q29udGVudD1lLHApOnAudGV4dENvbnRlbnR9dmFyIHA9ZTtpZigic3RyaW5nIj09dHlwZW9mIGUpcD13aW5kb3cuZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKGEsZSk7ZWxzZSBpZihlLnNpbXBsZXN2ZylyZXR1cm4gZTt2YXIgdjtyZXR1cm4gcC5zaW1wbGVzdmc9ITAscC5hdHRyPWMscC5hcHBlbmQ9ZixwLmxpbms9ZCxwLnRleHQ9bCxwLm9uPXIscC5vZmY9cyxwLmRhdGFTb3VyY2U9bixwfW4uZXhwb3J0cz10LHQuY29tcGlsZT1lKCIuL2xpYi9jb21waWxlIik7dmFyIG89dC5jb21waWxlVGVtcGxhdGU9ZSgiLi9saWIvY29tcGlsZV90ZW1wbGF0ZSIpLGk9ZSgiYWRkLWV2ZW50LWxpc3RlbmVyIiksYT0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciLHU9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsifSx7Ii4vbGliL2NvbXBpbGUiOjI4LCIuL2xpYi9jb21waWxlX3RlbXBsYXRlIjoyOSwiYWRkLWV2ZW50LWxpc3RlbmVyIjozMX1dLDI4OltmdW5jdGlvbihlLG4pe2Z1bmN0aW9uIHQoZSl7dHJ5e3JldHVybiBlPXIoZSksaShvLnBhcnNlRnJvbVN0cmluZyhlLCJ0ZXh0L3htbCIpLmRvY3VtZW50RWxlbWVudCl9Y2F0Y2gobil7dGhyb3cgbn19ZnVuY3Rpb24gcihlKXtpZihlKXt2YXIgbj0neG1sbnM6c3ZnPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIicsdD1lLm1hdGNoKC9ePFx3Ky8pO2lmKHQpe3ZhciByPXRbMF0ubGVuZ3RoO3JldHVybiBlLnN1YnN0cigwLHIpKyIgIituKyIgIitlLnN1YnN0cihyKX10aHJvdyBuZXcgRXJyb3IoIkNhbm5vdCBwYXJzZSBpbnB1dCB0ZXh0OiBpbnZhbGlkIHhtbD8iKX19dmFyIG89ZSgiLi9kb21wYXJzZXIuanMiKSxpPWUoIi4uLyIpO24uZXhwb3J0cz10fSx7Ii4uLyI6MjcsIi4vZG9tcGFyc2VyLmpzIjozMH1dLDI5OltmdW5jdGlvbihlLG4pe2Z1bmN0aW9uIHQoZSl7dmFyIG49T2JqZWN0LmNyZWF0ZShudWxsKTtyZXR1cm4gcihlLG4pLHtsaW5rOmZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQobil7bihlKX1PYmplY3Qua2V5cyhuKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3ZhciByPW5bZV07ci5mb3JFYWNoKHQpfSl9fX1mdW5jdGlvbiByKGUsbil7dmFyIHQ9ZS5ub2RlVHlwZSxhPTE9PT10fHwzPT09dDtpZihhKXt2YXIgdTtpZihlLmhhc0NoaWxkTm9kZXMoKSl7dmFyIHM9ZS5jaGlsZE5vZGVzO2Zvcih1PTA7dTxzLmxlbmd0aDsrK3UpcihzW3VdLG4pfWlmKDM9PT10JiZpKGUsbiksZS5hdHRyaWJ1dGVzKXt2YXIgZj1lLmF0dHJpYnV0ZXM7Zm9yKHU9MDt1PGYubGVuZ3RoOysrdSlvKGZbdV0sZSxuKX19fWZ1bmN0aW9uIG8oZSxuLHQpe2Z1bmN0aW9uIHIoZSl7bi5zZXRBdHRyaWJ1dGVOUyhudWxsLHUsZVtzXSl9dmFyIG89ZS52YWx1ZTtpZihvKXt2YXIgaT1vLm1hdGNoKGEpO2lmKGkpe3ZhciB1PWUubG9jYWxOYW1lLHM9aVsxXSxmPXMuaW5kZXhPZigiLiIpPDA7aWYoIWYpdGhyb3cgbmV3IEVycm9yKCJzaW1wbGVzdmcgY3VycmVudGx5IGRvZXMgbm90IHN1cHBvcnQgbmVzdGVkIGJpbmRpbmdzIik7dmFyIGM9dFtzXTtjP2MucHVzaChyKTpjPXRbc109W3JdfX19ZnVuY3Rpb24gaShlLG4pe2Z1bmN0aW9uIHQobil7ZS5ub2RlVmFsdWU9bltpXX12YXIgcj1lLm5vZGVWYWx1ZTtpZihyKXt2YXIgbz1yLm1hdGNoKGEpO2lmKG8pe3ZhciBpPW9bMV0sdT0oaS5pbmRleE9mKCIuIik8MCxuW2ldKTt1P3UucHVzaCh0KTp1PW5baV09W3RdfX19bi5leHBvcnRzPXQ7dmFyIGE9L3t7KC4rPyl9fS99LHt9XSwzMDpbZnVuY3Rpb24oZSxuKXtmdW5jdGlvbiB0KCl7cmV0dXJuInVuZGVmaW5lZCI9PXR5cGVvZiBET01QYXJzZXI/e3BhcnNlRnJvbVN0cmluZzpyfTpuZXcgRE9NUGFyc2VyfWZ1bmN0aW9uIHIoKXt0aHJvdyBuZXcgRXJyb3IoIkRPTVBhcnNlciBpcyBub3Qgc3VwcG9ydGVkIGJ5IHRoaXMgcGxhdGZvcm0uIFBsZWFzZSBvcGVuIGlzc3VlIGhlcmUgaHR0cHM6Ly9naXRodWIuY29tL2FudmFrYS9zaW1wbGVzdmciKX1uLmV4cG9ydHM9dCgpfSx7fV0sMzE6W2Z1bmN0aW9uKGUsbil7ZnVuY3Rpb24gdChlLG4sdCxyKXtyZXR1cm4gcz1zfHwoZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcj97YWRkOm8scm06aX06e2FkZDphLHJtOnV9KSxzLmFkZChlLG4sdCxyKX1mdW5jdGlvbiByKGUsbix0LHIpe3JldHVybiBzPXN8fChkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyP3thZGQ6byxybTppfTp7YWRkOmEscm06dX0pLHMucm0oZSxuLHQscil9ZnVuY3Rpb24gbyhlLG4sdCxyKXtlLmFkZEV2ZW50TGlzdGVuZXIobix0LHIpfWZ1bmN0aW9uIGkoZSxuLHQscil7ZS5yZW1vdmVFdmVudExpc3RlbmVyKG4sdCxyKX1mdW5jdGlvbiBhKGUsbix0LHIpe2lmKHIpdGhyb3cgbmV3IEVycm9yKCJjYW5ub3QgdXNlQ2FwdHVyZSBpbiBvbGRJRSIpO2UuYXR0YWNoRXZlbnQoIm9uIituLHQpfWZ1bmN0aW9uIHUoZSxuLHQpe2UuZGV0YWNoRXZlbnQoIm9uIituLHQpfXQucmVtb3ZlRXZlbnRMaXN0ZW5lcj1yLHQuYWRkRXZlbnRMaXN0ZW5lcj10LG4uZXhwb3J0cz10O3ZhciBzPW51bGx9LHt9XSwzMjpbZnVuY3Rpb24oZSxuKXtmdW5jdGlvbiB0KCl7cmV0dXJue2JldHdlZW5uZXNzQ2VudHJhbGl0eTpyLGRlZ3JlZUNlbnRyYWxpdHk6b319ZnVuY3Rpb24gcihlKXt2YXIgbj1hLmJldHdlZW5uZXNzKGUpO3JldHVybiBpKG4pfWZ1bmN0aW9uIG8oZSxuKXt2YXIgdD1hLmRlZ3JlZShlLG4pO3JldHVybiBpKHQpfWZ1bmN0aW9uIGkoZSl7ZnVuY3Rpb24gbihuLHQpe3JldHVybiBlW3RdLWVbbl19ZnVuY3Rpb24gdChuKXtyZXR1cm57a2V5Om4sdmFsdWU6ZVtuXX19cmV0dXJuIE9iamVjdC5rZXlzKGUpLnNvcnQobikubWFwKHQpfXZhciBhPWUoIm5ncmFwaC5jZW50cmFsaXR5Iik7bi5leHBvcnRzPXR9LHsibmdyYXBoLmNlbnRyYWxpdHkiOjN9XSwzMzpbZnVuY3Rpb24oZSxuKXtmdW5jdGlvbiB0KCl7cmV0dXJue2RlbnNpdHk6ZnVuY3Rpb24oZSxuKXt2YXIgdD1lLmdldE5vZGVzQ291bnQoKTtyZXR1cm4gMD09PXQ/MC8wOm4/ZS5nZXRMaW5rc0NvdW50KCkvKHQqKHQtMSkpOjIqZS5nZXRMaW5rc0NvdW50KCkvKHQqKHQtMSkpfX19bi5leHBvcnRzPXR9LHt9XSwzNDpbZnVuY3Rpb24oZSxuKXtmdW5jdGlvbiB0KGUsbil7ZnVuY3Rpb24gdChlLHQpe3ZhciBpO2lmKHQpe3ZhciBhPW4uZ2V0Tm9kZVVJKGUuaWQpO2k9cihhKSwiZnVuY3Rpb24iPT10eXBlb2YgdC5vblN0YXJ0JiZpLm9uU3RhcnQodC5vblN0YXJ0KSwiZnVuY3Rpb24iPT10eXBlb2YgdC5vbkRyYWcmJmkub25EcmFnKHQub25EcmFnKSwiZnVuY3Rpb24iPT10eXBlb2YgdC5vblN0b3AmJmkub25TdG9wKHQub25TdG9wKSxvW2UuaWRdPWl9ZWxzZShpPW9bZS5pZF0pJiYoaS5yZWxlYXNlKCksZGVsZXRlIG9bZS5pZF0pfXZhciBvPXt9O3JldHVybntiaW5kRHJhZ05Ecm9wOnR9fW4uZXhwb3J0cz10O3ZhciByPWUoIi4vZHJhZ25kcm9wLmpzIil9LHsiLi9kcmFnbmRyb3AuanMiOjM1fV0sMzU6W2Z1bmN0aW9uKGUsbil7ZnVuY3Rpb24gdChlKXt2YXIgbix0LGEsdSxzLGYsYyxkPTAsbD0wLHA9ITEsdj0wLGc9ZnVuY3Rpb24oZSl7dmFyIG49MCx0PTA7cmV0dXJuIGU9ZXx8d2luZG93LmV2ZW50LGUucGFnZVh8fGUucGFnZVk/KG49ZS5wYWdlWCx0PWUucGFnZVkpOihlLmNsaWVudFh8fGUuY2xpZW50WSkmJihuPWUuY2xpZW50WCt3aW5kb3cuZG9jdW1lbnQuYm9keS5zY3JvbGxMZWZ0K3dpbmRvdy5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsTGVmdCx0PWUuY2xpZW50WSt3aW5kb3cuZG9jdW1lbnQuYm9keS5zY3JvbGxUb3Ard2luZG93LmRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3ApLFtuLHRdfSxoPWZ1bmN0aW9uKGUsbixyKXt0JiZ0KGUse3g6bi1kLHk6ci1sfSksZD1uLGw9cn0sbT1mdW5jdGlvbihlKXtlLnN0b3BQcm9wYWdhdGlvbj9lLnN0b3BQcm9wYWdhdGlvbigpOmUuY2FuY2VsQnViYmxlPSEwfSx5PWZ1bmN0aW9uKGUpe2UucHJldmVudERlZmF1bHQmJmUucHJldmVudERlZmF1bHQoKX0seD1mdW5jdGlvbihlKXtyZXR1cm4gbShlKSwhMX0sdz1mdW5jdGlvbihlKXtlPWV8fHdpbmRvdy5ldmVudCxoKGUsZS5jbGllbnRYLGUuY2xpZW50WSl9LGI9ZnVuY3Rpb24oZSl7aWYoZT1lfHx3aW5kb3cuZXZlbnQscClyZXR1cm4gbShlKSwhMTt2YXIgdD0xPT09ZS5idXR0b24mJm51bGwhPT13aW5kb3cuZXZlbnR8fDA9PT1lLmJ1dHRvbjtyZXR1cm4gdD8oZD1lLmNsaWVudFgsbD1lLmNsaWVudFksYz1lLnRhcmdldHx8ZS5zcmNFbGVtZW50LG4mJm4oZSx7eDpkLHk6bH0pLHIub24oIm1vdXNlbW92ZSIsdyksci5vbigibW91c2V1cCIsRSksbShlKSxzPXdpbmRvdy5kb2N1bWVudC5vbnNlbGVjdHN0YXJ0LGY9d2luZG93LmRvY3VtZW50Lm9uZHJhZ3N0YXJ0LHdpbmRvdy5kb2N1bWVudC5vbnNlbGVjdHN0YXJ0PXgsYy5vbmRyYWdzdGFydD14LCExKTp2b2lkIDB9LEU9ZnVuY3Rpb24oZSl7ZT1lfHx3aW5kb3cuZXZlbnQsci5vZmYoIm1vdXNlbW92ZSIsdyksci5vZmYoIm1vdXNldXAiLEUpLHdpbmRvdy5kb2N1bWVudC5vbnNlbGVjdHN0YXJ0PXMsYy5vbmRyYWdzdGFydD1mLGM9bnVsbCxhJiZhKGUpfSxMPWZ1bmN0aW9uKG4pe2lmKCJmdW5jdGlvbiI9PXR5cGVvZiB1KXtuPW58fHdpbmRvdy5ldmVudCxuLnByZXZlbnREZWZhdWx0JiZuLnByZXZlbnREZWZhdWx0KCksbi5yZXR1cm5WYWx1ZT0hMTt2YXIgdCxyPWcobiksbz1pKGUpLGE9e3g6clswXS1vWzBdLHk6clsxXS1vWzFdfTt0PW4ud2hlZWxEZWx0YT9uLndoZWVsRGVsdGEvMzYwOm4uZGV0YWlsLy05LHUobix0LGEpfX0sUD1mdW5jdGlvbihuKXshdSYmbj8id2Via2l0Ij09PW8uYnJvd3Nlcj9lLmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNld2hlZWwiLEwsITEpOmUuYWRkRXZlbnRMaXN0ZW5lcigiRE9NTW91c2VTY3JvbGwiLEwsITEpOnUmJiFuJiYoIndlYmtpdCI9PT1vLmJyb3dzZXI/ZS5yZW1vdmVFdmVudExpc3RlbmVyKCJtb3VzZXdoZWVsIixMLCExKTplLnJlbW92ZUV2ZW50TGlzdGVuZXIoIkRPTU1vdXNlU2Nyb2xsIixMLCExKSksdT1ufSxOPWZ1bmN0aW9uKGUsbil7cmV0dXJuKGUuY2xpZW50WC1uLmNsaWVudFgpKihlLmNsaWVudFgtbi5jbGllbnRYKSsoZS5jbGllbnRZLW4uY2xpZW50WSkqKGUuY2xpZW50WS1uLmNsaWVudFkpfSxrPWZ1bmN0aW9uKGUpe2lmKDE9PT1lLnRvdWNoZXMubGVuZ3RoKXttKGUpO3ZhciBuPWUudG91Y2hlc1swXTtoKGUsbi5jbGllbnRYLG4uY2xpZW50WSl9ZWxzZSBpZigyPT09ZS50b3VjaGVzLmxlbmd0aCl7dmFyIHQ9TihlLnRvdWNoZXNbMF0sZS50b3VjaGVzWzFdKSxyPTA7dj50P3I9LTE6dD52JiYocj0xKSx1KGUscix7eDplLnRvdWNoZXNbMF0uY2xpZW50WCx5OmUudG91Y2hlc1swXS5jbGllbnRZfSksdj10LG0oZSkseShlKX19LEE9ZnVuY3Rpb24oZSl7cD0hMSxyLm9mZigidG91Y2htb3ZlIixrKSxyLm9mZigidG91Y2hlbmQiLEEpLHIub2ZmKCJ0b3VjaGNhbmNlbCIsQSksYz1udWxsLGEmJmEoZSl9LGo9ZnVuY3Rpb24oZSx0KXttKGUpLHkoZSksZD10LmNsaWVudFgsbD10LmNsaWVudFksYz1lLnRhcmdldHx8ZS5zcmNFbGVtZW50LG4mJm4oZSx7eDpkLHk6bH0pLHB8fChwPSEwLHIub24oInRvdWNobW92ZSIsayksci5vbigidG91Y2hlbmQiLEEpLHIub24oInRvdWNoY2FuY2VsIixBKSl9LF89ZnVuY3Rpb24oZSl7cmV0dXJuIDE9PT1lLnRvdWNoZXMubGVuZ3RoP2ooZSxlLnRvdWNoZXNbMF0pOnZvaWQoMj09PWUudG91Y2hlcy5sZW5ndGgmJihtKGUpLHkoZSksdj1OKGUudG91Y2hlc1swXSxlLnRvdWNoZXNbMV0pKSl9O3JldHVybiBlLmFkZEV2ZW50TGlzdGVuZXIoIm1vdXNlZG93biIsYiksZS5hZGRFdmVudExpc3RlbmVyKCJ0b3VjaHN0YXJ0IixfKSx7b25TdGFydDpmdW5jdGlvbihlKXtyZXR1cm4gbj1lLHRoaXN9LG9uRHJhZzpmdW5jdGlvbihlKXtyZXR1cm4gdD1lLHRoaXN9LG9uU3RvcDpmdW5jdGlvbihlKXtyZXR1cm4gYT1lLHRoaXN9LG9uU2Nyb2xsOmZ1bmN0aW9uKGUpe3JldHVybiBQKGUpLHRoaXN9LHJlbGVhc2U6ZnVuY3Rpb24oKXtlLnJlbW92ZUV2ZW50TGlzdGVuZXIoIm1vdXNlZG93biIsYiksZS5yZW1vdmVFdmVudExpc3RlbmVyKCJ0b3VjaHN0YXJ0IixfKSxyLm9mZigibW91c2Vtb3ZlIix3KSxyLm9mZigibW91c2V1cCIsRSksci5vZmYoInRvdWNobW92ZSIsayksci5vZmYoInRvdWNoZW5kIixBKSxyLm9mZigidG91Y2hjYW5jZWwiLEEpLFAobnVsbCkKfX19bi5leHBvcnRzPXQ7dmFyIHI9ZSgiLi4vVXRpbHMvZG9jdW1lbnRFdmVudHMuanMiKSxvPWUoIi4uL1V0aWxzL2Jyb3dzZXJJbmZvLmpzIiksaT1lKCIuLi9VdGlscy9maW5kRWxlbWVudFBvc2l0aW9uLmpzIil9LHsiLi4vVXRpbHMvYnJvd3NlckluZm8uanMiOjM5LCIuLi9VdGlscy9kb2N1bWVudEV2ZW50cy5qcyI6NDAsIi4uL1V0aWxzL2ZpbmRFbGVtZW50UG9zaXRpb24uanMiOjQxfV0sMzY6W2Z1bmN0aW9uKGUsbil7ZnVuY3Rpb24gdChlLG4pe3ZhciB0PXIobiksbz1udWxsLGk9e30sYT17eDowLHk6MH07cmV0dXJuIHQubW91c2VEb3duKGZ1bmN0aW9uKGUsbil7bz1lLGEueD1uLmNsaWVudFgsYS55PW4uY2xpZW50WSx0Lm1vdXNlQ2FwdHVyZShvKTt2YXIgcj1pW2UuaWRdO3JldHVybiByJiZyLm9uU3RhcnQmJnIub25TdGFydChuLGEpLCEwfSkubW91c2VVcChmdW5jdGlvbihlKXt0LnJlbGVhc2VNb3VzZUNhcHR1cmUobyksbz1udWxsO3ZhciBuPWlbZS5pZF07cmV0dXJuIG4mJm4ub25TdG9wJiZuLm9uU3RvcCgpLCEwfSkubW91c2VNb3ZlKGZ1bmN0aW9uKGUsbil7aWYobyl7dmFyIHQ9aVtvLmlkXTtyZXR1cm4gdCYmdC5vbkRyYWcmJnQub25EcmFnKG4se3g6bi5jbGllbnRYLWEueCx5Om4uY2xpZW50WS1hLnl9KSxhLng9bi5jbGllbnRYLGEueT1uLmNsaWVudFksITB9fSkse2JpbmREcmFnTkRyb3A6ZnVuY3Rpb24oZSxuKXtpW2UuaWRdPW4sbnx8ZGVsZXRlIGlbZS5pZF19fX1uLmV4cG9ydHM9dDt2YXIgcj1lKCIuLi9XZWJHTC93ZWJnbElucHV0RXZlbnRzLmpzIil9LHsiLi4vV2ViR0wvd2ViZ2xJbnB1dEV2ZW50cy5qcyI6NTd9XSwzNzpbZnVuY3Rpb24oZSxuKXtmdW5jdGlvbiB0KGUsbil7ZnVuY3Rpb24gdChlKXtyZXR1cm4gZFtlXX1uPXIobix7bWF4WDoxMDI0LG1heFk6MTAyNCxzZWVkOiJEZXRlcm1pbmlzdGljIHJhbmRvbW5lc3MgbWFkZSBtZSBkbyB0aGlzIn0pO3ZhciBhPW8obi5zZWVkKSx1PW5ldyBpKE51bWJlci5NQVhfVkFMVUUsTnVtYmVyLk1BWF9WQUxVRSxOdW1iZXIuTUlOX1ZBTFVFLE51bWJlci5NSU5fVkFMVUUpLHM9e30sZj1mdW5jdGlvbigpe3JldHVybnt4OmEubmV4dChuLm1heFgpLHk6YS5uZXh0KG4ubWF4WSl9fSxjPWZ1bmN0aW9uKGUsbil7ZS54PG4ueDEmJihuLngxPWUueCksZS54Pm4ueDImJihuLngyPWUueCksZS55PG4ueTEmJihuLnkxPWUueSksZS55Pm4ueTImJihuLnkyPWUueSl9LGQ9ImZ1bmN0aW9uIj09dHlwZW9mIE9iamVjdC5jcmVhdGU/T2JqZWN0LmNyZWF0ZShudWxsKTp7fSxsPWZ1bmN0aW9uKGUpe2RbZS5pZF09ZihlKSxjKGRbZS5pZF0sdSl9LHA9ZnVuY3Rpb24oKXswIT09ZS5nZXROb2Rlc0NvdW50KCkmJih1LngxPU51bWJlci5NQVhfVkFMVUUsdS55MT1OdW1iZXIuTUFYX1ZBTFVFLHUueDI9TnVtYmVyLk1JTl9WQUxVRSx1LnkyPU51bWJlci5NSU5fVkFMVUUsZS5mb3JFYWNoTm9kZShsKSl9LHY9ZnVuY3Rpb24oZSl7c1tlLmlkXT1lfSxnPWZ1bmN0aW9uKGUpe2Zvcih2YXIgbj0wO248ZS5sZW5ndGg7KytuKXt2YXIgdD1lW25dO3Qubm9kZSYmKCJhZGQiPT09dC5jaGFuZ2VUeXBlP2wodC5ub2RlKTpkZWxldGUgZFt0Lm5vZGUuaWRdKSx0LmxpbmsmJigiYWRkIj09PXQuY2hhbmdlVHlwZT92KHQubGluayk6ZGVsZXRlIHNbdC5saW5rLmlkXSl9fTtyZXR1cm4gZS5mb3JFYWNoTm9kZShsKSxlLmZvckVhY2hMaW5rKHYpLGUub24oImNoYW5nZWQiLGcpLHtydW46ZnVuY3Rpb24oKXt0aGlzLnN0ZXAoKX0sc3RlcDpmdW5jdGlvbigpe3JldHVybiBwKCksITB9LGdldEdyYXBoUmVjdDpmdW5jdGlvbigpe3JldHVybiB1fSxkaXNwb3NlOmZ1bmN0aW9uKCl7ZS5vZmYoImNoYW5nZSIsZyl9LGlzTm9kZVBpbm5lZDpmdW5jdGlvbigpe3JldHVybiEwfSxwaW5Ob2RlOmZ1bmN0aW9uKCl7fSxnZXROb2RlUG9zaXRpb246dCxnZXRMaW5rUG9zaXRpb246ZnVuY3Rpb24oZSl7dmFyIG49c1tlXTtyZXR1cm57ZnJvbTp0KG4uZnJvbUlkKSx0bzp0KG4udG9JZCl9fSxzZXROb2RlUG9zaXRpb246ZnVuY3Rpb24oZSxuLHQpe3ZhciByPWRbZV07ciYmKHIueD1uLHIueT10KX0scGxhY2VOb2RlOmZ1bmN0aW9uKGUpe3JldHVybiJmdW5jdGlvbiI9PXR5cGVvZiBlPyhmPWUscCgpLHRoaXMpOmYoZSl9fX1uLmV4cG9ydHM9dDt2YXIgcj1lKCJuZ3JhcGgubWVyZ2UiKSxvPWUoIm5ncmFwaC5yYW5kb20iKS5yYW5kb20saT1lKCIuLi9VdGlscy9yZWN0LmpzIil9LHsiLi4vVXRpbHMvcmVjdC5qcyI6NDUsIm5ncmFwaC5tZXJnZSI6MjQsIm5ncmFwaC5yYW5kb20iOjI1fV0sMzg6W2Z1bmN0aW9uKGUsbil7ZnVuY3Rpb24gdChlKXtmdW5jdGlvbiBuKCl7dmFyIG49cihlKTtyZXR1cm4gbi5hZGRFdmVudExpc3RlbmVyPW4ub24sbn1pZihjb25zb2xlLmxvZygiVGhpcyBtZXRob2QgaXMgZGVwcmVjYXRlZC4gUGxlYXNlIHVzZSBWaXZhLmV2ZW50cygpIGluc3RlYWQiKSwhZSlyZXR1cm4gZTt2YXIgdD12b2lkIDAhPT1lLm9ufHx2b2lkIDAhPT1lLm9mZnx8dm9pZCAwIT09ZS5maXJlO3JldHVybiB0P3tleHRlbmQ6ZnVuY3Rpb24oKXtyZXR1cm4gZX0sb246ZS5vbixzdG9wOmUub2ZmfTp7ZXh0ZW5kOm4sb246ZS5vbixzdG9wOmUub2ZmfX12YXIgcj1lKCJuZ3JhcGguZXZlbnRzIik7bi5leHBvcnRzPXR9LHsibmdyYXBoLmV2ZW50cyI6Nn1dLDM5OltmdW5jdGlvbihlLG4pe2Z1bmN0aW9uIHQoKXtpZigidW5kZWZpbmVkIj09dHlwZW9mIHdpbmRvd3x8IXdpbmRvdy5oYXNPd25Qcm9wZXJ0eSgibmF2aWdhdG9yIikpcmV0dXJue2Jyb3dzZXI6IiIsdmVyc2lvbjoiMCJ9O3ZhciBlPXdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCksbj0vKHdlYmtpdClbIFwvXShbXHcuXSspLyx0PS8ob3BlcmEpKD86Lip2ZXJzaW9uKT9bIFwvXShbXHcuXSspLyxyPS8obXNpZSkgKFtcdy5dKykvLG89Lyhtb3ppbGxhKSg/Oi4qPyBydjooW1x3Ll0rKSk/LyxpPW4uZXhlYyhlKXx8dC5leGVjKGUpfHxyLmV4ZWMoZSl8fGUuaW5kZXhPZigiY29tcGF0aWJsZSIpPDAmJm8uZXhlYyhlKXx8W107cmV0dXJue2Jyb3dzZXI6aVsxXXx8IiIsdmVyc2lvbjppWzJdfHwiMCJ9fW4uZXhwb3J0cz10KCl9LHt9XSw0MDpbZnVuY3Rpb24oZSxuKXtmdW5jdGlvbiB0KCl7cmV0dXJuIHZvaWQgMD09PXR5cGVvZiBkb2N1bWVudD9pOntvbjpyLG9mZjpvfX1mdW5jdGlvbiByKGUsbil7ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihlLG4pfWZ1bmN0aW9uIG8oZSxuKXtkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKGUsbil9dmFyIGk9ZSgiLi9udWxsRXZlbnRzLmpzIik7bi5leHBvcnRzPXQoKX0seyIuL251bGxFdmVudHMuanMiOjQ0fV0sNDE6W2Z1bmN0aW9uKGUsbil7ZnVuY3Rpb24gdChlKXt2YXIgbj0wLHQ9MDtpZihlLm9mZnNldFBhcmVudClkbyBuKz1lLm9mZnNldExlZnQsdCs9ZS5vZmZzZXRUb3A7d2hpbGUobnVsbCE9PShlPWUub2Zmc2V0UGFyZW50KSk7cmV0dXJuW24sdF19bi5leHBvcnRzPXR9LHt9XSw0MjpbZnVuY3Rpb24oZSxuKXtmdW5jdGlvbiB0KGUpe2lmKCFlKXRocm93e21lc3NhZ2U6IkNhbm5vdCBnZXQgZGltZW5zaW9ucyBvZiB1bmRlZmluZWQgY29udGFpbmVyIn07dmFyIG49ZS5jbGllbnRXaWR0aCx0PWUuY2xpZW50SGVpZ2h0O3JldHVybntsZWZ0OjAsdG9wOjAsd2lkdGg6bixoZWlnaHQ6dH19bi5leHBvcnRzPXR9LHt9XSw0MzpbZnVuY3Rpb24oZSxuKXtmdW5jdGlvbiB0KGUsbix0LG8saSxhLHUscyl7cmV0dXJuIHIoZSxuLGUsbyxpLGEsdSxzKXx8cihlLG8sdCxvLGksYSx1LHMpfHxyKHQsbyx0LG4saSxhLHUscyl8fHIodCxuLGUsbixpLGEsdSxzKX12YXIgcj1lKCJnaW50ZXJzZWN0Iik7bi5leHBvcnRzPXR9LHtnaW50ZXJzZWN0OjJ9XSw0NDpbZnVuY3Rpb24oZSxuKXtmdW5jdGlvbiB0KCl7cmV0dXJue29uOnIsb2ZmOnIsc3RvcDpyfX1mdW5jdGlvbiByKCl7fW4uZXhwb3J0cz10KCl9LHt9XSw0NTpbZnVuY3Rpb24oZSxuKXtmdW5jdGlvbiB0KGUsbix0LHIpe3RoaXMueDE9ZXx8MCx0aGlzLnkxPW58fDAsdGhpcy54Mj10fHwwLHRoaXMueTI9cnx8MH1uLmV4cG9ydHM9dH0se31dLDQ2OltmdW5jdGlvbihlLG4peyhmdW5jdGlvbihlKXtmdW5jdGlvbiB0KCl7ZnVuY3Rpb24gbihlKXtmdW5jdGlvbiBuKCl7bz1hLnJlcXVlc3RBbmltYXRpb25GcmFtZShuKSxlKCl8fHQoKX1mdW5jdGlvbiB0KCl7YS5jYW5jZWxBbmltYXRpb25GcmFtZShvKSxvPTB9ZnVuY3Rpb24gcigpe298fG4oKX12YXIgbztyZXR1cm4gbigpLHtzdG9wOnQscmVzdGFydDpyfX1mdW5jdGlvbiB0KGUpe3ZhciBuPShuZXcgRGF0ZSkuZ2V0VGltZSgpLHQ9TWF0aC5tYXgoMCwxNi0obi11KSkscj1hLnNldFRpbWVvdXQoZnVuY3Rpb24oKXtlKG4rdCl9LHQpO3JldHVybiB1PW4rdCxyfWZ1bmN0aW9uIG8oZSl7YS5jbGVhclRpbWVvdXQoZSl9dmFyIGksYSx1PTAscz1bIm1zIiwibW96Iiwid2Via2l0IiwibyJdO2ZvcihhPSJ1bmRlZmluZWQiIT10eXBlb2Ygd2luZG93P3dpbmRvdzoidW5kZWZpbmVkIiE9dHlwZW9mIGU/ZTp7c2V0VGltZW91dDpyLGNsZWFyVGltZW91dDpyfSxpPTA7aTxzLmxlbmd0aCYmIWEucmVxdWVzdEFuaW1hdGlvbkZyYW1lOysraSl7dmFyIGY9c1tpXTthLnJlcXVlc3RBbmltYXRpb25GcmFtZT1hW2YrIlJlcXVlc3RBbmltYXRpb25GcmFtZSJdLGEuY2FuY2VsQW5pbWF0aW9uRnJhbWU9YVtmKyJDYW5jZWxBbmltYXRpb25GcmFtZSJdfHxhW2YrIkNhbmNlbFJlcXVlc3RBbmltYXRpb25GcmFtZSJdfXJldHVybiBhLnJlcXVlc3RBbmltYXRpb25GcmFtZXx8KGEucmVxdWVzdEFuaW1hdGlvbkZyYW1lPXQpLGEuY2FuY2VsQW5pbWF0aW9uRnJhbWV8fChhLmNhbmNlbEFuaW1hdGlvbkZyYW1lPW8pLG59ZnVuY3Rpb24gcigpe31uLmV4cG9ydHM9dCgpfSkuY2FsbCh0aGlzLCJ1bmRlZmluZWQiIT10eXBlb2YgZ2xvYmFsP2dsb2JhbDoidW5kZWZpbmVkIiE9dHlwZW9mIHNlbGY/c2VsZjoidW5kZWZpbmVkIiE9dHlwZW9mIHdpbmRvdz93aW5kb3c6e30pfSx7fV0sNDc6W2Z1bmN0aW9uKGUsbil7ZnVuY3Rpb24gdCgpe3JldHVybiB2b2lkIDA9PT10eXBlb2Ygd2luZG93P2k6e29uOnIsb2ZmOm99fWZ1bmN0aW9uIHIoZSxuKXt3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihlLG4pfWZ1bmN0aW9uIG8oZSxuKXt3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihlLG4pfXZhciBpPWUoIi4vbnVsbEV2ZW50cy5qcyIpO24uZXhwb3J0cz10KCl9LHsiLi9udWxsRXZlbnRzLmpzIjo0NH1dLDQ4OltmdW5jdGlvbihlLG4pe2Z1bmN0aW9uIHQoZSxuKXtmdW5jdGlvbiB0KGUpe3JldHVybiJzdHJpbmciPT10eXBlb2Ygej96LmluZGV4T2YoZSk+PTA6ImJvb2xlYW4iPT10eXBlb2Ygej96OiEwfWZ1bmN0aW9uIGQoKXtHPUd8fHdpbmRvdy5kb2N1bWVudC5ib2R5LEY9Rnx8byhlLHtzcHJpbmdMZW5ndGg6ODAsc3ByaW5nQ29lZmY6MmUtNH0pLE89T3x8aShlLHtjb250YWluZXI6R30pLG4uaGFzT3duUHJvcGVydHkoInJlbmRlckxpbmtzIil8fChuLnJlbmRlckxpbmtzPSEwKSxuLnByZXJlbmRlcj1uLnByZXJlbmRlcnx8MCxVPShPLmlucHV0TWFuYWdlcnx8dSkoZSxPKX1mdW5jdGlvbiBsKCl7Ty5iZWdpblJlbmRlcigpLG4ucmVuZGVyTGlua3MmJk8ucmVuZGVyTGlua3MoKSxPLnJlbmRlck5vZGVzKCksTy5lbmRSZW5kZXIoKX1mdW5jdGlvbiBwKCl7cmV0dXJuIFc9Ri5zdGVwKCkmJiFILGwoKSwhV31mdW5jdGlvbiB2KGUpe3JldHVybiBSP3ZvaWQoVis9ZSk6dm9pZChlPyhWKz1lLFI9cyhmdW5jdGlvbigpe3JldHVybiBwKCl9LE0pKTooWD0wLFY9MCxSPXMocCxNKSkpfWZ1bmN0aW9uIGcoKXtKfHwoVz0hMSxSLnJlc3RhcnQoKSl9ZnVuY3Rpb24gaCgpe2lmKCJudW1iZXIiPT10eXBlb2Ygbi5wcmVyZW5kZXImJm4ucHJlcmVuZGVyPjApZm9yKHZhciBlPTA7ZTxuLnByZXJlbmRlcjtlKz0xKUYuc3RlcCgpfWZ1bmN0aW9uIG0oKXt2YXIgZT1GLmdldEdyYXBoUmVjdCgpLG49ZihHKSx0PShlLngyK2UueDEpLzIscj0oZS55MitlLnkxKS8yOyQub2Zmc2V0WD1uLndpZHRoLzItKHQqJC5zY2FsZS10KSwkLm9mZnNldFk9bi5oZWlnaHQvMi0ociokLnNjYWxlLXIpLE8uZ3JhcGhDZW50ZXJDaGFuZ2VkKCQub2Zmc2V0WCwkLm9mZnNldFkpLFk9ITF9ZnVuY3Rpb24geShlKXt2YXIgbj1GLmdldE5vZGVQb3NpdGlvbihlLmlkKTtPLmFkZE5vZGUoZSxuKX1mdW5jdGlvbiB4KGUpe08ucmVsZWFzZU5vZGUoZSl9ZnVuY3Rpb24gdyhlKXt2YXIgbj1GLmdldExpbmtQb3NpdGlvbihlLmlkKTtPLmFkZExpbmsoZSxuKX1mdW5jdGlvbiBiKGUpe08ucmVsZWFzZUxpbmsoZSl9ZnVuY3Rpb24gRShlKXtpZih0KCJub2RlIikpe3ZhciBuPSExO1UuYmluZERyYWdORHJvcChlLHtvblN0YXJ0OmZ1bmN0aW9uKCl7bj1GLmlzTm9kZVBpbm5lZChlKSxGLnBpbk5vZGUoZSwhMCksSD0hMCxnKCl9LG9uRHJhZzpmdW5jdGlvbihuLHQpe3ZhciByPUYuZ2V0Tm9kZVBvc2l0aW9uKGUuaWQpO0Yuc2V0Tm9kZVBvc2l0aW9uKGUuaWQsci54K3QueC8kLnNjYWxlLHIueSt0LnkvJC5zY2FsZSksSD0hMCxsKCl9LG9uU3RvcDpmdW5jdGlvbigpe0YucGluTm9kZShlLG4pLEg9ITF9fSl9fWZ1bmN0aW9uIEwoZSl7VS5iaW5kRHJhZ05Ecm9wKGUsbnVsbCl9ZnVuY3Rpb24gUCgpe08uaW5pdChHKSxlLmZvckVhY2hOb2RlKHkpLG4ucmVuZGVyTGlua3MmJmUuZm9yRWFjaExpbmsodyl9ZnVuY3Rpb24gTigpe08ucmVsZWFzZShHKX1mdW5jdGlvbiBrKG4pe3ZhciB0PW4ubm9kZTsiYWRkIj09PW4uY2hhbmdlVHlwZT8oeSh0KSxFKHQpLFkmJm0oKSk6InJlbW92ZSI9PT1uLmNoYW5nZVR5cGU/KEwodCkseCh0KSwwPT09ZS5nZXROb2Rlc0NvdW50KCkmJihZPSEwKSk6InVwZGF0ZSI9PT1uLmNoYW5nZVR5cGUmJihMKHQpLHgodCkseSh0KSxFKHQpKX1mdW5jdGlvbiBBKGUpe3ZhciB0PWUubGluaztpZigiYWRkIj09PWUuY2hhbmdlVHlwZSluLnJlbmRlckxpbmtzJiZ3KHQpO2Vsc2UgaWYoInJlbW92ZSI9PT1lLmNoYW5nZVR5cGUpbi5yZW5kZXJMaW5rcyYmYih0KTtlbHNlIGlmKCJ1cGRhdGUiPT09ZS5jaGFuZ2VUeXBlKXRocm93IlVwZGF0ZSB0eXBlIGlzIG5vdCBpbXBsZW1lbnRlZC4gVE9ETzogSW1wbGVtZW50IG1lISJ9ZnVuY3Rpb24gaihlKXt2YXIgbix0O2ZvcihuPTA7bjxlLmxlbmd0aDtuKz0xKXQ9ZVtuXSx0Lm5vZGU/ayh0KTp0LmxpbmsmJkEodCk7ZygpfWZ1bmN0aW9uIF8oKXttKCkscCgpfWZ1bmN0aW9uIEkoKXtCJiYoQi5yZWxlYXNlKCksQj1udWxsKX1mdW5jdGlvbiBUKCl7ZS5vZmYoImNoYW5nZWQiLGopfWZ1bmN0aW9uIEMoZSxuKXtpZighbil7dmFyIHQ9ZihHKTtuPXt4OnQud2lkdGgvMix5OnQuaGVpZ2h0LzJ9fXZhciByPU1hdGgucG93KDEuNCxlPy0uMjouMik7cmV0dXJuICQuc2NhbGU9Ty5zY2FsZShyLG4pLGwoKSxLLmZpcmUoInNjYWxlIiwkLnNjYWxlKSwkLnNjYWxlfWZ1bmN0aW9uIFMoKXthLm9uKCJyZXNpemUiLF8pLEkoKSx0KCJkcmFnIikmJihCPWMoRyksQi5vbkRyYWcoZnVuY3Rpb24oZSxuKXtPLnRyYW5zbGF0ZVJlbChuLngsbi55KSxsKCl9KSksdCgic2Nyb2xsIikmJihCfHwoQj1jKEcpKSxCLm9uU2Nyb2xsKGZ1bmN0aW9uKGUsbix0KXtDKDA+bix0KX0pKSxlLmZvckVhY2hOb2RlKEUpLFQoKSxlLm9uKCJjaGFuZ2VkIixqKX1mdW5jdGlvbiBEKCl7cT0hMSxUKCksSSgpLGEub2ZmKCJyZXNpemUiLF8pLEsub2ZmKCksUi5zdG9wKCksZS5mb3JFYWNoTGluayhmdW5jdGlvbihlKXtuLnJlbmRlckxpbmtzJiZiKGUpfSksZS5mb3JFYWNoTm9kZShmdW5jdGlvbihlKXtMKGUpLHgoZSl9KSxGLmRpc3Bvc2UoKSxOKCl9dmFyIE09MzA7bj1ufHx7fTt2YXIgVSxSLEIsRj1uLmxheW91dCxPPW4uZ3JhcGhpY3MsRz1uLmNvbnRhaW5lcix6PXZvaWQgMCE9PW4uaW50ZXJhY3RpdmU/bi5pbnRlcmFjdGl2ZTohMCxxPSExLFk9ITAsWD0wLFY9MCxXPSExLEg9ITEsSj0hMSwkPXtvZmZzZXRYOjAsb2Zmc2V0WTowLHNjYWxlOjF9LEs9cih7fSk7cmV0dXJue3J1bjpmdW5jdGlvbihlKXtyZXR1cm4gcXx8KGQoKSxoKCksUCgpLG0oKSxTKCkscT0hMCksdihlKSx0aGlzfSxyZXNldDpmdW5jdGlvbigpe08ucmVzZXRTY2FsZSgpLG0oKSwkLnNjYWxlPTF9LHBhdXNlOmZ1bmN0aW9uKCl7Sj0hMCxSLnN0b3AoKX0scmVzdW1lOmZ1bmN0aW9uKCl7Sj0hMSxSLnJlc3RhcnQoKX0scmVyZW5kZXI6ZnVuY3Rpb24oKXtyZXR1cm4gbCgpLHRoaXN9LHpvb21PdXQ6ZnVuY3Rpb24oKXtyZXR1cm4gQyghMCl9LHpvb21JbjpmdW5jdGlvbigpe3JldHVybiBDKCExKX0sbW92ZVRvOmZ1bmN0aW9uKGUsbil7Ty5ncmFwaENlbnRlckNoYW5nZWQoJC5vZmZzZXRYLWUqJC5zY2FsZSwkLm9mZnNldFktbiokLnNjYWxlKSxsKCl9LGdldEdyYXBoaWNzOmZ1bmN0aW9uKCl7cmV0dXJuIE99LGRpc3Bvc2U6ZnVuY3Rpb24oKXtEKCl9LG9uOmZ1bmN0aW9uKGUsbil7cmV0dXJuIEsub24oZSxuKSx0aGlzfSxvZmY6ZnVuY3Rpb24oZSxuKXtyZXR1cm4gSy5vZmYoZSxuKSx0aGlzfX19bi5leHBvcnRzPXQ7dmFyIHI9ZSgibmdyYXBoLmV2ZW50cyIpLG89ZSgibmdyYXBoLmZvcmNlbGF5b3V0IiksaT1lKCIuL3N2Z0dyYXBoaWNzLmpzIiksYT1lKCIuLi9VdGlscy93aW5kb3dFdmVudHMuanMiKSx1PWUoIi4uL0lucHV0L2RvbUlucHV0TWFuYWdlci5qcyIpLHM9ZSgiLi4vVXRpbHMvdGltZXIuanMiKSxmPWUoIi4uL1V0aWxzL2dldERpbWVuc2lvbnMuanMiKSxjPWUoIi4uL0lucHV0L2RyYWduZHJvcC5qcyIpfSx7Ii4uL0lucHV0L2RvbUlucHV0TWFuYWdlci5qcyI6MzQsIi4uL0lucHV0L2RyYWduZHJvcC5qcyI6MzUsIi4uL1V0aWxzL2dldERpbWVuc2lvbnMuanMiOjQyLCIuLi9VdGlscy90aW1lci5qcyI6NDYsIi4uL1V0aWxzL3dpbmRvd0V2ZW50cy5qcyI6NDcsIi4vc3ZnR3JhcGhpY3MuanMiOjQ5LCJuZ3JhcGguZXZlbnRzIjo2LCJuZ3JhcGguZm9yY2VsYXlvdXQiOjd9XSw0OTpbZnVuY3Rpb24oZSxuKXtmdW5jdGlvbiB0KCl7ZnVuY3Rpb24gZSgpe3ZhciBlPXIoInN2ZyIpO3JldHVybiBuPXIoImciKS5hdHRyKCJidWZmZXJlZC1yZW5kZXJpbmciLCJkeW5hbWljIiksZS5hcHBlbmRDaGlsZChuKSxlfXZhciBuLHQsYSx1PTAscz0wLGY9MSxjPXt9LGQ9e30sbD1mdW5jdGlvbigpe3JldHVybiByKCJyZWN0IikuYXR0cigid2lkdGgiLDEwKS5hdHRyKCJoZWlnaHQiLDEwKS5hdHRyKCJmaWxsIiwiIzAwYTJlOCIpfSxwPWZ1bmN0aW9uKGUsbil7ZS5hdHRyKCJ4IixuLngtNSkuYXR0cigieSIsbi55LTUpfSx2PWZ1bmN0aW9uKCl7cmV0dXJuIHIoImxpbmUiKS5hdHRyKCJzdHJva2UiLCIjOTk5Iil9LGc9ZnVuY3Rpb24oZSxuLHQpe2UuYXR0cigieDEiLG4ueCkuYXR0cigieTEiLG4ueSkuYXR0cigieDIiLHQueCkuYXR0cigieTIiLHQueSl9LGg9ZnVuY3Rpb24oZSl7ZS5maXJlKCJyZXNjYWxlZCIpfSxtPXt4OjAseTowfSx5PXt4OjAseTowfSx4PXt4OjAseTowfSx3PWZ1bmN0aW9uKCl7aWYobil7dmFyIGU9Im1hdHJpeCgiK2YrIiwgMCwgMCwiK2YrIiwiK3UrIiwiK3MrIikiO24uYXR0cigidHJhbnNmb3JtIixlKX19O3Q9ZSgpO3ZhciBiPXtnZXROb2RlVUk6ZnVuY3Rpb24oZSl7cmV0dXJuIGNbZV19LGdldExpbmtVSTpmdW5jdGlvbihlKXtyZXR1cm4gZFtlXX0sbm9kZTpmdW5jdGlvbihlKXtyZXR1cm4iZnVuY3Rpb24iPT10eXBlb2YgZT8obD1lLHRoaXMpOnZvaWQgMH0sbGluazpmdW5jdGlvbihlKXtyZXR1cm4iZnVuY3Rpb24iPT10eXBlb2YgZT8odj1lLHRoaXMpOnZvaWQgMH0scGxhY2VOb2RlOmZ1bmN0aW9uKGUpe3JldHVybiBwPWUsdGhpc30scGxhY2VMaW5rOmZ1bmN0aW9uKGUpe3JldHVybiBnPWUsdGhpc30sYmVnaW5SZW5kZXI6ZnVuY3Rpb24oKXt9LGVuZFJlbmRlcjpmdW5jdGlvbigpe30sZ3JhcGhDZW50ZXJDaGFuZ2VkOmZ1bmN0aW9uKGUsbil7dT1lLHM9bix3KCl9LGlucHV0TWFuYWdlcjppLHRyYW5zbGF0ZVJlbDpmdW5jdGlvbihlLHIpe3ZhciBvPXQuY3JlYXRlU1ZHUG9pbnQoKSxpPW4uZ2V0Q1RNKCksYT10LmNyZWF0ZVNWR1BvaW50KCkubWF0cml4VHJhbnNmb3JtKGkuaW52ZXJzZSgpKTtvLng9ZSxvLnk9cixvPW8ubWF0cml4VHJhbnNmb3JtKGkuaW52ZXJzZSgpKSxvLng9KG8ueC1hLngpKmkuYSxvLnk9KG8ueS1hLnkpKmkuZCxpLmUrPW8ueCxpLmYrPW8ueTt2YXIgdT0ibWF0cml4KCIraS5hKyIsIDAsIDAsIitpLmQrIiwiK2kuZSsiLCIraS5mKyIpIjtuLmF0dHIoInRyYW5zZm9ybSIsdSl9LHNjYWxlOmZ1bmN0aW9uKGUscil7dmFyIG89dC5jcmVhdGVTVkdQb2ludCgpO28ueD1yLngsby55PXIueSxvPW8ubWF0cml4VHJhbnNmb3JtKG4uZ2V0Q1RNKCkuaW52ZXJzZSgpKTt2YXIgaT10LmNyZWF0ZVNWR01hdHJpeCgpLnRyYW5zbGF0ZShvLngsby55KS5zY2FsZShlKS50cmFuc2xhdGUoLW8ueCwtby55KSxhPW4uZ2V0Q1RNKCkubXVsdGlwbHkoaSk7Zj1hLmEsdT1hLmUscz1hLmY7dmFyIGM9Im1hdHJpeCgiK2EuYSsiLCAwLCAwLCIrYS5kKyIsIithLmUrIiwiK2EuZisiKSI7cmV0dXJuIG4uYXR0cigidHJhbnNmb3JtIixjKSxoKHRoaXMpLGZ9LHJlc2V0U2NhbGU6ZnVuY3Rpb24oKXtmPTE7dmFyIGU9Im1hdHJpeCgxLCAwLCAwLCAxLCAwLCAwKSI7cmV0dXJuIG4uYXR0cigidHJhbnNmb3JtIixlKSxoKHRoaXMpLHRoaXN9LGluaXQ6ZnVuY3Rpb24oZSl7ZS5hcHBlbmRDaGlsZCh0KSx3KCksImZ1bmN0aW9uIj09dHlwZW9mIGEmJmEodCl9LHJlbGVhc2U6ZnVuY3Rpb24oZSl7dCYmZSYmZS5yZW1vdmVDaGlsZCh0KX0sYWRkTGluazpmdW5jdGlvbihlLHQpe3ZhciByPXYoZSk7aWYocilyZXR1cm4gci5wb3NpdGlvbj10LHIubGluaz1lLGRbZS5pZF09cixuLmNoaWxkRWxlbWVudENvdW50PjA/bi5pbnNlcnRCZWZvcmUocixuLmZpcnN0Q2hpbGQpOm4uYXBwZW5kQ2hpbGQocikscn0scmVsZWFzZUxpbms6ZnVuY3Rpb24oZSl7dmFyIHQ9ZFtlLmlkXTt0JiYobi5yZW1vdmVDaGlsZCh0KSxkZWxldGUgZFtlLmlkXSl9LGFkZE5vZGU6ZnVuY3Rpb24oZSx0KXt2YXIgcj1sKGUpO2lmKHIpcmV0dXJuIHIucG9zaXRpb249dCxyLm5vZGU9ZSxjW2UuaWRdPXIsbi5hcHBlbmRDaGlsZChyKSxyfSxyZWxlYXNlTm9kZTpmdW5jdGlvbihlKXt2YXIgdD1jW2UuaWRdO3QmJihuLnJlbW92ZUNoaWxkKHQpLGRlbGV0ZSBjW2UuaWRdKX0scmVuZGVyTm9kZXM6ZnVuY3Rpb24oKXtmb3IodmFyIGUgaW4gYylpZihjLmhhc093blByb3BlcnR5KGUpKXt2YXIgbj1jW2VdO20ueD1uLnBvc2l0aW9uLngsbS55PW4ucG9zaXRpb24ueSxwKG4sbSxuLm5vZGUpfX0scmVuZGVyTGlua3M6ZnVuY3Rpb24oKXtmb3IodmFyIGUgaW4gZClpZihkLmhhc093blByb3BlcnR5KGUpKXt2YXIgbj1kW2VdO3kueD1uLnBvc2l0aW9uLmZyb20ueCx5Lnk9bi5wb3NpdGlvbi5mcm9tLnkseC54PW4ucG9zaXRpb24udG8ueCx4Lnk9bi5wb3NpdGlvbi50by55LGcobix5LHgsbi5saW5rKX19LGdldEdyYXBoaWNzUm9vdDpmdW5jdGlvbihlKXtyZXR1cm4iZnVuY3Rpb24iPT10eXBlb2YgZSYmKHQ/ZSh0KTphPWUpLHR9LGdldFN2Z1Jvb3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdH19O3JldHVybiBvKGIpLGJ9bi5leHBvcnRzPXQ7dmFyIHI9ZSgic2ltcGxlc3ZnIiksbz1lKCJuZ3JhcGguZXZlbnRzIiksaT1lKCIuLi9JbnB1dC9kb21JbnB1dE1hbmFnZXIuanMiKX0seyIuLi9JbnB1dC9kb21JbnB1dE1hbmFnZXIuanMiOjM0LCJuZ3JhcGguZXZlbnRzIjo2LHNpbXBsZXN2ZzoyN31dLDUwOltmdW5jdGlvbihlLG4pe2Z1bmN0aW9uIHQoZSl7ZT1mKGUse2VuYWJsZUJsZW5kaW5nOiEwLHByZXNlcnZlRHJhd2luZ0J1ZmZlcjohMSxjbGVhckNvbG9yOiExLGNsZWFyQ29sb3JWYWx1ZTp7cjoxLGc6MSxiOjEsYToxfX0pO3ZhciBuLHQsYyxkLGwscCx2LGcsaD0wLG09MCx5PVsxLDAsMCwwLDAsMSwwLDAsMCwwLDEsMCwwLDAsMCwxXSx4PVtdLHc9W10sYj17fSxFPXt9LEw9bygpLFA9aSgpLE49ZnVuY3Rpb24oKXtyZXR1cm4gYSgpfSxrPWZ1bmN0aW9uKCl7cmV0dXJuIHUoMzAxNDg5ODY4Nyl9LEE9ZnVuY3Rpb24oKXtMLnVwZGF0ZVRyYW5zZm9ybSh5KSxQLnVwZGF0ZVRyYW5zZm9ybSh5KX0saj1mdW5jdGlvbigpe3k9WzEsMCwwLDAsMCwxLDAsMCwwLDAsMSwwLDAsMCwwLDFdfSxfPWZ1bmN0aW9uKCl7biYmdCYmKGQ9dC53aWR0aD1NYXRoLm1heChuLm9mZnNldFdpZHRoLDEpLGw9dC5oZWlnaHQ9TWF0aC5tYXgobi5vZmZzZXRIZWlnaHQsMSksYyYmYy52aWV3cG9ydCgwLDAsZCxsKSxMJiZMLnVwZGF0ZVNpemUoZC8yLGwvMiksUCYmUC51cGRhdGVTaXplKGQvMixsLzIpKX0sST1mdW5jdGlvbihlKXtlLmZpcmUoInJlc2NhbGVkIil9O3Q9d2luZG93LmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImNhbnZhcyIpO3ZhciBUPXtnZXRMaW5rVUk6ZnVuY3Rpb24oZSl7cmV0dXJuIEVbZV19LGdldE5vZGVVSTpmdW5jdGlvbihlKXtyZXR1cm4gYltlXX0sbm9kZTpmdW5jdGlvbihlKXtyZXR1cm4iZnVuY3Rpb24iPT10eXBlb2YgZT8oTj1lLHRoaXMpOnZvaWQgMH0sbGluazpmdW5jdGlvbihlKXtyZXR1cm4iZnVuY3Rpb24iPT10eXBlb2YgZT8oaz1lLHRoaXMpOnZvaWQgMH0scGxhY2VOb2RlOmZ1bmN0aW9uKGUpe3JldHVybiBwPWUsdGhpc30scGxhY2VMaW5rOmZ1bmN0aW9uKGUpe3JldHVybiB2PWUsdGhpc30saW5wdXRNYW5hZ2VyOnIsYmVnaW5SZW5kZXI6ZnVuY3Rpb24oKXt9LGVuZFJlbmRlcjpmdW5jdGlvbigpe20+MCYmTC5yZW5kZXIoKSxoPjAmJlAucmVuZGVyKCl9LGJyaW5nTGlua1RvRnJvbnQ6ZnVuY3Rpb24oZSl7dmFyIG4sdCxyPUwuZ2V0RnJvbnRMaW5rSWQoKTtMLmJyaW5nVG9Gcm9udChlKSxyPmUuaWQmJihuPWUuaWQsdD13W3JdLHdbcl09d1tuXSx3W3JdLmlkPXIsd1tuXT10LHdbbl0uaWQ9bil9LGdyYXBoQ2VudGVyQ2hhbmdlZDpmdW5jdGlvbihlLG4pe3lbMTJdPTIqZS9kLTEseVsxM109MS0yKm4vbCxBKCl9LGFkZExpbms6ZnVuY3Rpb24oZSxuKXt2YXIgdD1tKysscj1rKGUpO3JldHVybiByLmlkPXQsci5wb3M9bixMLmNyZWF0ZUxpbmsociksd1t0XT1yLEVbZS5pZF09cixyfSxhZGROb2RlOmZ1bmN0aW9uKGUsbil7dmFyIHQ9aCsrLHI9TihlKTtyZXR1cm4gci5pZD10LHIucG9zaXRpb249bixyLm5vZGU9ZSxQLmNyZWF0ZU5vZGUocikseFt0XT1yLGJbZS5pZF09cixyfSx0cmFuc2xhdGVSZWw6ZnVuY3Rpb24oZSxuKXt5WzEyXSs9Mip5WzBdKmUvZC95WzBdLHlbMTNdLT0yKnlbNV0qbi9sL3lbNV0sQSgpfSxzY2FsZTpmdW5jdGlvbihlLG4pe3ZhciB0PTIqbi54L2QtMSxyPTEtMipuLnkvbDtyZXR1cm4gdC09eVsxMl0sci09eVsxM10seVsxMl0rPXQqKDEtZSkseVsxM10rPXIqKDEtZSkseVswXSo9ZSx5WzVdKj1lLEEoKSxJKHRoaXMpLHlbMF19LHJlc2V0U2NhbGU6ZnVuY3Rpb24oKXtyZXR1cm4gaigpLGMmJihfKCksQSgpKSx0aGlzfSxpbml0OmZ1bmN0aW9uKHIpe3ZhciBvPXt9O2lmKGUucHJlc2VydmVEcmF3aW5nQnVmZmVyJiYoby5wcmVzZXJ2ZURyYXdpbmdCdWZmZXI9ITApLG49cixfKCksaigpLG4uYXBwZW5kQ2hpbGQodCksYz10LmdldENvbnRleHQoImV4cGVyaW1lbnRhbC13ZWJnbCIsbyksIWMpe3ZhciBpPSJDb3VsZCBub3QgaW5pdGlhbGl6ZSBXZWJHTC4gU2VlbXMgbGlrZSB0aGUgYnJvd3NlciBkb2Vzbid0IHN1cHBvcnQgaXQuIjt0aHJvdyB3aW5kb3cuYWxlcnQoaSksaX1pZihlLmVuYWJsZUJsZW5kaW5nJiYoYy5ibGVuZEZ1bmMoYy5TUkNfQUxQSEEsYy5PTkVfTUlOVVNfU1JDX0FMUEhBKSxjLmVuYWJsZShjLkJMRU5EKSksZS5jbGVhckNvbG9yKXt2YXIgYT1lLmNsZWFyQ29sb3JWYWx1ZTtjLmNsZWFyQ29sb3IoYS5yLGEuZyxhLmIsYS5hKSx0aGlzLmJlZ2luUmVuZGVyPWZ1bmN0aW9uKCl7Yy5jbGVhcihjLkNPTE9SX0JVRkZFUl9CSVQpfX1MLmxvYWQoYyksTC51cGRhdGVTaXplKGQvMixsLzIpLFAubG9hZChjKSxQLnVwZGF0ZVNpemUoZC8yLGwvMiksQSgpLCJmdW5jdGlvbiI9PXR5cGVvZiBnJiZnKHQpfSxyZWxlYXNlOmZ1bmN0aW9uKGUpe3QmJmUmJmUucmVtb3ZlQ2hpbGQodCl9LGlzU3VwcG9ydGVkOmZ1bmN0aW9uKCl7dmFyIGU9d2luZG93LmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImNhbnZhcyIpLG49ZSYmZS5nZXRDb250ZXh0JiZlLmdldENvbnRleHQoImV4cGVyaW1lbnRhbC13ZWJnbCIpO3JldHVybiBufSxyZWxlYXNlTGluazpmdW5jdGlvbihlKXttPjAmJihtLT0xKTt2YXIgbj1FW2UuaWRdO2RlbGV0ZSBFW2UuaWRdLEwucmVtb3ZlTGluayhuKTt2YXIgdD1uLmlkO2lmKG0+dCl7aWYoMD09PW18fG09PT10KXJldHVybjt2YXIgcj13W21dO3dbdF09cixyLmlkPXR9fSxyZWxlYXNlTm9kZTpmdW5jdGlvbihlKXtoPjAmJihoLT0xKTt2YXIgbj1iW2UuaWRdO2RlbGV0ZSBiW2UuaWRdLFAucmVtb3ZlTm9kZShuKTt2YXIgdD1uLmlkO2lmKGg+dCl7aWYoMD09PWh8fGg9PT10KXJldHVybjt2YXIgcj14W2hdO3hbdF09cixyLmlkPXQsUC5yZXBsYWNlUHJvcGVydGllcyhuLHIpfX0scmVuZGVyTm9kZXM6ZnVuY3Rpb24oKXtmb3IodmFyIGU9e3g6MCx5OjB9LG49MDtoPm47KytuKXt2YXIgdD14W25dO2UueD10LnBvc2l0aW9uLngsZS55PS10LnBvc2l0aW9uLnkscCYmcCh0LGUpLFAucG9zaXRpb24odCxlKX19LHJlbmRlckxpbmtzOmZ1bmN0aW9uKCl7aWYoIXRoaXMub21pdExpbmtzUmVuZGVyaW5nKWZvcih2YXIgZT17eDowLHk6MH0sbj17eDowLHk6MH0sdD0wO20+dDsrK3Qpe3ZhciByPXdbdF0sbz1yLnBvcy5mcm9tO24ueD1vLngsbi55PS1vLnksbz1yLnBvcy50byxlLng9by54LGUueT0tby55LHYmJnYocixuLGUpLEwucG9zaXRpb24ocixuLGUpfX0sZ2V0R3JhcGhpY3NSb290OmZ1bmN0aW9uKGUpe3JldHVybiJmdW5jdGlvbiI9PXR5cGVvZiBlJiYodD9lKHQpOmc9ZSksdH0sc2V0Tm9kZVByb2dyYW06ZnVuY3Rpb24oZSl7aWYoIWMmJmUpUD1lO2Vsc2UgaWYoZSl0aHJvdyJOb3QgaW1wbGVtZW50ZWQuIENhbm5vdCBzd2FwIHNoYWRlciBvbiB0aGUgZmx5Li4uIFlldC4ifSxzZXRMaW5rUHJvZ3JhbTpmdW5jdGlvbihlKXtpZighYyYmZSlMPWU7ZWxzZSBpZihlKXRocm93Ik5vdCBpbXBsZW1lbnRlZC4gQ2Fubm90IHN3YXAgc2hhZGVyIG9uIHRoZSBmbHkuLi4gWWV0LiJ9LHRyYW5zZm9ybUNsaWVudFRvR3JhcGhDb29yZGluYXRlczpmdW5jdGlvbihlKXtyZXR1cm4gZS54PTIqZS54L2QtMSxlLnk9MS0yKmUueS9sLGUueD0oZS54LXlbMTJdKS95WzBdLGUueT0oZS55LXlbMTNdKS95WzVdLGUueCo9ZC8yLGUueSo9LWwvMixlfSxnZXROb2RlQXRDbGllbnRQb3M6ZnVuY3Rpb24oZSxuKXtpZigiZnVuY3Rpb24iIT10eXBlb2YgbilyZXR1cm4gbnVsbDt0aGlzLnRyYW5zZm9ybUNsaWVudFRvR3JhcGhDb29yZGluYXRlcyhlKTtmb3IodmFyIHQ9MDtoPnQ7Kyt0KWlmKG4oeFt0XSxlLngsZS55KSlyZXR1cm4geFt0XS5ub2RlO3JldHVybiBudWxsfX07cmV0dXJuIHMoVCksVH1uLmV4cG9ydHM9dDt2YXIgcj1lKCIuLi9JbnB1dC93ZWJnbElucHV0TWFuYWdlci5qcyIpLG89ZSgiLi4vV2ViR0wvd2ViZ2xMaW5rUHJvZ3JhbS5qcyIpLGk9ZSgiLi4vV2ViR0wvd2ViZ2xOb2RlUHJvZ3JhbS5qcyIpLGE9ZSgiLi4vV2ViR0wvd2ViZ2xTcXVhcmUuanMiKSx1PWUoIi4uL1dlYkdML3dlYmdsTGluZS5qcyIpLHM9ZSgibmdyYXBoLmV2ZW50cyIpLGY9ZSgibmdyYXBoLm1lcmdlIil9LHsiLi4vSW5wdXQvd2ViZ2xJbnB1dE1hbmFnZXIuanMiOjM2LCIuLi9XZWJHTC93ZWJnbExpbmUuanMiOjU4LCIuLi9XZWJHTC93ZWJnbExpbmtQcm9ncmFtLmpzIjo1OSwiLi4vV2ViR0wvd2ViZ2xOb2RlUHJvZ3JhbS5qcyI6NjAsIi4uL1dlYkdML3dlYmdsU3F1YXJlLmpzIjo2MSwibmdyYXBoLmV2ZW50cyI6NiwibmdyYXBoLm1lcmdlIjoyNH1dLDUxOltmdW5jdGlvbihlLG4pe2Z1bmN0aW9uIHQoZSl7dmFyIG49MTA0MTQzMzU7aWYoInN0cmluZyI9PXR5cGVvZiBlJiZlKWlmKDQ9PT1lLmxlbmd0aCYmKGU9ZS5yZXBsYWNlKC8oW14jXSkvZywiJDEkMSIpKSw5PT09ZS5sZW5ndGgpbj1wYXJzZUludChlLnN1YnN0cigxKSwxNik7ZWxzZXtpZig3IT09ZS5sZW5ndGgpdGhyb3cnQ29sb3IgZXhwZWN0ZWQgaW4gaGV4IGZvcm1hdCB3aXRoIHByZWNlZGluZyAiIyIuIEUuZy4gIzAwZmYwMC4gR290IHZhbHVlOiAnK2U7bj1wYXJzZUludChlLnN1YnN0cigxKSwxNik8PDh8MjU1fWVsc2UibnVtYmVyIj09dHlwZW9mIGUmJihuPWUpO3JldHVybiBufW4uZXhwb3J0cz10fSx7fV0sNTI6W2Z1bmN0aW9uKGUsbil7ZnVuY3Rpb24gdChlKXt0aGlzLmNhbnZhcz13aW5kb3cuZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiY2FudmFzIiksdGhpcy5jdHg9dGhpcy5jYW52YXMuZ2V0Q29udGV4dCgiMmQiKSx0aGlzLmlzRGlydHk9ITEsdGhpcy5jYW52YXMud2lkdGg9dGhpcy5jYW52YXMuaGVpZ2h0PWV9bi5leHBvcnRzPXR9LHt9XSw1MzpbZnVuY3Rpb24oZSxuKXtmdW5jdGlvbiB0KGUpe2Z1bmN0aW9uIG4obix0KXt2YXIgcj1lLmNyZWF0ZVNoYWRlcih0KTtpZihlLnNoYWRlclNvdXJjZShyLG4pLGUuY29tcGlsZVNoYWRlcihyKSwhZS5nZXRTaGFkZXJQYXJhbWV0ZXIocixlLkNPTVBJTEVfU1RBVFVTKSl7dmFyIG89ZS5nZXRTaGFkZXJJbmZvTG9nKHIpO3Rocm93IHdpbmRvdy5hbGVydChvKSxvfXJldHVybiByfWZ1bmN0aW9uIHQodCxyKXt2YXIgbz1lLmNyZWF0ZVByb2dyYW0oKSxpPW4odCxlLlZFUlRFWF9TSEFERVIpLGE9bihyLGUuRlJBR01FTlRfU0hBREVSKTtpZihlLmF0dGFjaFNoYWRlcihvLGkpLGUuYXR0YWNoU2hhZGVyKG8sYSksZS5saW5rUHJvZ3JhbShvKSwhZS5nZXRQcm9ncmFtUGFyYW1ldGVyKG8sZS5MSU5LX1NUQVRVUykpe3ZhciB1PWUuZ2V0U2hhZGVySW5mb0xvZyhvKTt0aHJvdyB3aW5kb3cuYWxlcnQodSksdX1yZXR1cm4gb31mdW5jdGlvbiBpKGUsbix0KXtpZigobisxKSp0PmUubGVuZ3RoKXt2YXIgcj1uZXcgRmxvYXQzMkFycmF5KGUubGVuZ3RoKnQqMik7cmV0dXJuIHIuc2V0KGUpLHJ9cmV0dXJuIGV9ZnVuY3Rpb24gYShuLHQpe2Zvcih2YXIgcj17fSxvPTA7bzx0Lmxlbmd0aDsrK28pe3ZhciBpPXRbb10sYT0tMTtpZigiYSI9PT1pWzBdJiYiXyI9PT1pWzFdKXtpZihhPWUuZ2V0QXR0cmliTG9jYXRpb24obixpKSwtMT09PWEpdGhyb3cgbmV3IEVycm9yKCJQcm9ncmFtIGRvZXNuJ3QgaGF2ZSByZXF1aXJlZCBhdHRyaWJ1dGU6ICIraSk7cltpLnNsaWNlKDIpXT1hfWVsc2V7aWYoInUiIT09aVswXXx8Il8iIT09aVsxXSl0aHJvdyBuZXcgRXJyb3IoIkNvdWxkbid0IGZpZ3VyZSBvdXQgeW91ciBpbnRlbnQuIEFsbCB1bmlmb3JtcyBzaG91bGQgc3RhcnQgd2l0aCAndV8nIHByZWZpeCwgYW5kIGF0dHJpYnV0ZXMgd2l0aCAnYV8nIik7aWYoYT1lLmdldFVuaWZvcm1Mb2NhdGlvbihuLGkpLG51bGw9PT1hKXRocm93IG5ldyBFcnJvcigiUHJvZ3JhbSBkb2Vzbid0IGhhdmUgcmVxdWlyZWQgdW5pZm9ybTogIitpKTtyW2kuc2xpY2UoMildPWF9fXJldHVybiByfXJldHVybntjcmVhdGVQcm9ncmFtOnQsZXh0ZW5kQXJyYXk6aSxjb3B5QXJyYXlQYXJ0OnIsc3dhcEFycmF5UGFydDpvLGdldExvY2F0aW9uczphLGNvbnRleHQ6ZX19ZnVuY3Rpb24gcihlLG4sdCxyKXtmb3IodmFyIG89MDtyPm87KytvKWVbbitvXT1lW3Qrb119ZnVuY3Rpb24gbyhlLG4sdCxyKXtmb3IodmFyIG89MDtyPm87KytvKXt2YXIgaT1lW24rb107ZVtuK29dPWVbdCtvXSxlW3Qrb109aX19bi5leHBvcnRzPXR9LHt9XSw1NDpbZnVuY3Rpb24oZSxuKXtmdW5jdGlvbiB0KGUpe2Z1bmN0aW9uIG4oKXt2YXIgZTtmb3IoRS5pc0RpcnR5PSExLGU9MDtlPHcubGVuZ3RoOysrZSl3W2VdLmlzRGlydHk9ITF9ZnVuY3Rpb24gdChlKXt2YXIgbj15W2VdO2lmKCFuKXJldHVybiExO2lmKGRlbGV0ZSB5W2VdLG0tPTEsbT09PW4ub2Zmc2V0KXJldHVybiEwO3ZhciB0PWMobi5vZmZzZXQpLHI9YyhtKTtwKHIsdCk7dmFyIG89eVtiW21dXTtyZXR1cm4gby5vZmZzZXQ9bi5vZmZzZXQsYltuLm9mZnNldF09YlttXSxsKCksITB9ZnVuY3Rpb24gaSgpe3JldHVybiB3fWZ1bmN0aW9uIGEoZSl7cmV0dXJuIHlbZV19ZnVuY3Rpb24gdShlLG4pe2lmKHkuaGFzT3duUHJvcGVydHkoZSkpbih5W2VdKTtlbHNle3ZhciB0PW5ldyB3aW5kb3cuSW1hZ2Uscj1tO20rPTEsdC5jcm9zc09yaWdpbj0iYW5vbnltb3VzIix0Lm9ubG9hZD1mdW5jdGlvbigpe2woKSxmKHIsdCxuKX0sdC5zcmM9ZX19ZnVuY3Rpb24gcygpe3ZhciBlPW5ldyBvKGcqaCk7dy5wdXNoKGUpfWZ1bmN0aW9uIGYoZSxuLHQpe3ZhciByPWMoZSksbz17b2Zmc2V0OmV9O3IudGV4dHVyZU51bWJlcj49dy5sZW5ndGgmJnMoKTt2YXIgaT13W3IudGV4dHVyZU51bWJlcl07aS5jdHguZHJhd0ltYWdlKG4sci5jb2wqaCxyLnJvdypoLGgsaCksYltlXT1uLnNyYyx5W24uc3JjXT1vLGkuaXNEaXJ0eT0hMCx0KG8pfWZ1bmN0aW9uIGMobil7dmFyIHQ9bi9lPDwwLHI9biVlLG89ci9nPDwwLGk9ciVnO3JldHVybnt0ZXh0dXJlTnVtYmVyOnQscm93Om8sY29sOml9fWZ1bmN0aW9uIGQoKXtFLmlzRGlydHk9ITAseD0wLHY9bnVsbH1mdW5jdGlvbiBsKCl7diYmKHdpbmRvdy5jbGVhclRpbWVvdXQodikseCs9MSx2PW51bGwpLHg+MTA/ZCgpOnY9d2luZG93LnNldFRpbWVvdXQoZCw0MDApfWZ1bmN0aW9uIHAoZSxuKXt2YXIgdD13W2UudGV4dHVyZU51bWJlcl0uY2FudmFzLHI9d1tuLnRleHR1cmVOdW1iZXJdLmN0eCxvPW4uY29sKmgsaT1uLnJvdypoO3IuZHJhd0ltYWdlKHQsZS5jb2wqaCxlLnJvdypoLGgsaCxvLGksaCxoKSx3W2UudGV4dHVyZU51bWJlcl0uaXNEaXJ0eT0hMCx3W24udGV4dHVyZU51bWJlcl0uaXNEaXJ0eT0hMH12YXIgdixnPU1hdGguc3FydChlfHwxMDI0KTw8MCxoPWcsbT0xLHk9e30seD0wLHc9W10sYj1bXTtpZighcihlKSl0aHJvdyJUaWxlcyBwZXIgdGV4dHVyZSBzaG91bGQgYmUgcG93ZXIgb2YgdHdvLiI7dmFyIEU9e2lzRGlydHk6ITEsY2xlYXJEaXJ0eTpuLHJlbW92ZTp0LGdldFRleHR1cmVzOmksZ2V0Q29vcmRpbmF0ZXM6YSxsb2FkOnV9O3JldHVybiBFfWZ1bmN0aW9uIHIoZSl7cmV0dXJuIDA9PT0oZSZlLTEpfXZhciBvPWUoIi4vdGV4dHVyZS5qcyIpO24uZXhwb3J0cz10fSx7Ii4vdGV4dHVyZS5qcyI6NTJ9XSw1NTpbZnVuY3Rpb24oZSxuKXtmdW5jdGlvbiB0KGUsbil7cmV0dXJue190ZXh0dXJlOjAsX29mZnNldDowLHNpemU6Im51bWJlciI9PXR5cGVvZiBlP2U6MzIsc3JjOm59fW4uZXhwb3J0cz10fSx7fV0sNTY6W2Z1bmN0aW9uKGUsbil7ZnVuY3Rpb24gdCgpe2Z1bmN0aW9uIGUoZSxuKXtlLm5hdGl2ZU9iamVjdCYmaC5kZWxldGVUZXh0dXJlKGUubmF0aXZlT2JqZWN0KTt2YXIgdD1oLmNyZWF0ZVRleHR1cmUoKTtoLmFjdGl2ZVRleHR1cmUoaFsiVEVYVFVSRSIrbl0pLGguYmluZFRleHR1cmUoaC5URVhUVVJFXzJELHQpLGgudGV4SW1hZ2UyRChoLlRFWFRVUkVfMkQsMCxoLlJHQkEsaC5SR0JBLGguVU5TSUdORURfQllURSxlLmNhbnZhcyksaC50ZXhQYXJhbWV0ZXJpKGguVEVYVFVSRV8yRCxoLlRFWFRVUkVfTUFHX0ZJTFRFUixoLkxJTkVBUiksaC50ZXhQYXJhbWV0ZXJpKGguVEVYVFVSRV8yRCxoLlRFWFRVUkVfTUlOX0ZJTFRFUixoLkxJTkVBUl9NSVBNQVBfTkVBUkVTVCksaC5nZW5lcmF0ZU1pcG1hcChoLlRFWFRVUkVfMkQpLGgudW5pZm9ybTFpKHhbInNhbXBsZXIiK25dLG4pLGUubmF0aXZlT2JqZWN0PXR9ZnVuY3Rpb24gbigpe2lmKHYuaXNEaXJ0eSl7dmFyIG4sdD12LmdldFRleHR1cmVzKCk7Zm9yKG49MDtuPHQubGVuZ3RoOysrbikodFtuXS5pc0RpcnR5fHwhdFtuXS5uYXRpdmVPYmplY3QpJiZlKHRbbl0sbik7di5jbGVhckRpcnR5KCl9fWZ1bmN0aW9uIHQoZSl7aD1lLHk9YShlKSx2PW5ldyBpKEEpLGc9eS5jcmVhdGVQcm9ncmFtKGssTiksaC51c2VQcm9ncmFtKGcpLHg9eS5nZXRMb2NhdGlvbnMoZyxbImFfdmVydGV4UG9zIiwiYV9jdXN0b21BdHRyaWJ1dGVzIiwidV9zY3JlZW5TaXplIiwidV90cmFuc2Zvcm0iLCJ1X3NhbXBsZXIwIiwidV9zYW1wbGVyMSIsInVfc2FtcGxlcjIiLCJ1X3NhbXBsZXIzIiwidV90aWxlc1BlclRleHR1cmUiXSksaC51bmlmb3JtMWYoeC50aWxlc1BlclRleHR1cmUsQSksaC5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheSh4LnZlcnRleFBvcyksaC5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheSh4LmN1c3RvbUF0dHJpYnV0ZXMpLG09aC5jcmVhdGVCdWZmZXIoKX1mdW5jdGlvbiB1KGUsbil7dmFyIHQ9ZS5pZCpQO19bdF09bi54LWUuc2l6ZSxfW3QrMV09bi55LWUuc2l6ZSxfW3QrMl09NCplLl9vZmZzZXQsX1t0KzNdPW4ueCtlLnNpemUsX1t0KzRdPW4ueS1lLnNpemUsX1t0KzVdPTQqZS5fb2Zmc2V0KzEsX1t0KzZdPW4ueC1lLnNpemUsX1t0KzddPW4ueStlLnNpemUsX1t0KzhdPTQqZS5fb2Zmc2V0KzIsX1t0KzldPW4ueC1lLnNpemUsX1t0KzEwXT1uLnkrZS5zaXplLF9bdCsxMV09NCplLl9vZmZzZXQrMixfW3QrMTJdPW4ueCtlLnNpemUsX1t0KzEzXT1uLnktZS5zaXplLF9bdCsxNF09NCplLl9vZmZzZXQrMSxfW3QrMTVdPW4ueCtlLnNpemUsX1t0KzE2XT1uLnkrZS5zaXplLF9bdCsxN109NCplLl9vZmZzZXQrM31mdW5jdGlvbiBzKGUpe189eS5leHRlbmRBcnJheShfLGosUCksais9MTt2YXIgbj12LmdldENvb3JkaW5hdGVzKGUuc3JjKTtuP2UuX29mZnNldD1uLm9mZnNldDooZS5fb2Zmc2V0PTAsdi5sb2FkKGUuc3JjLGZ1bmN0aW9uKG4pe2UuX29mZnNldD1uLm9mZnNldH0pKX1mdW5jdGlvbiBmKGUpe2o+MCYmKGotPTEpLGUuaWQ8aiYmaj4wJiYoZS5zcmMmJnYucmVtb3ZlKGUuc3JjKSx5LmNvcHlBcnJheVBhcnQoXyxlLmlkKlAsaipQLFApKX1mdW5jdGlvbiBjKGUsbil7bi5fb2Zmc2V0PWUuX29mZnNldH1mdW5jdGlvbiBkKGUpe0w9ITAsRT1lfWZ1bmN0aW9uIGwoZSxuKXt3PWUsYj1uLEw9ITB9ZnVuY3Rpb24gcCgpe2gudXNlUHJvZ3JhbShnKSxoLmJpbmRCdWZmZXIoaC5BUlJBWV9CVUZGRVIsbSksaC5idWZmZXJEYXRhKGguQVJSQVlfQlVGRkVSLF8saC5EWU5BTUlDX0RSQVcpLEwmJihMPSExLGgudW5pZm9ybU1hdHJpeDRmdih4LnRyYW5zZm9ybSwhMSxFKSxoLnVuaWZvcm0yZih4LnNjcmVlblNpemUsdyxiKSksaC52ZXJ0ZXhBdHRyaWJQb2ludGVyKHgudmVydGV4UG9zLDIsaC5GTE9BVCwhMSwzKkZsb2F0MzJBcnJheS5CWVRFU19QRVJfRUxFTUVOVCwwKSxoLnZlcnRleEF0dHJpYlBvaW50ZXIoeC5jdXN0b21BdHRyaWJ1dGVzLDEsaC5GTE9BVCwhMSwzKkZsb2F0MzJBcnJheS5CWVRFU19QRVJfRUxFTUVOVCw4KSxuKCksaC5kcmF3QXJyYXlzKGguVFJJQU5HTEVTLDAsNipqKX12YXIgdixnLGgsbSx5LHgsdyxiLEUsTCxQPTE4LE49cigpLGs9bygpLEE9MTAyNCxqPTAsXz1uZXcgRmxvYXQzMkFycmF5KDY0KTtyZXR1cm57bG9hZDp0LHBvc2l0aW9uOnUsY3JlYXRlTm9kZTpzLHJlbW92ZU5vZGU6ZixyZXBsYWNlUHJvcGVydGllczpjLHVwZGF0ZVRyYW5zZm9ybTpkLHVwZGF0ZVNpemU6bCxyZW5kZXI6cH19ZnVuY3Rpb24gcigpe3JldHVyblsicHJlY2lzaW9uIG1lZGl1bXAgZmxvYXQ7IiwidmFyeWluZyB2ZWM0IGNvbG9yOyIsInZhcnlpbmcgdmVjMyB2VGV4dHVyZUNvb3JkOyIsInVuaWZvcm0gc2FtcGxlcjJEIHVfc2FtcGxlcjA7IiwidW5pZm9ybSBzYW1wbGVyMkQgdV9zYW1wbGVyMTsiLCJ1bmlmb3JtIHNhbXBsZXIyRCB1X3NhbXBsZXIyOyIsInVuaWZvcm0gc2FtcGxlcjJEIHVfc2FtcGxlcjM7Iiwidm9pZCBtYWluKHZvaWQpIHsiLCIgICBpZiAodlRleHR1cmVDb29yZC56ID09IDAuKSB7IiwiICAgICBnbF9GcmFnQ29sb3IgPSB0ZXh0dXJlMkQodV9zYW1wbGVyMCwgdlRleHR1cmVDb29yZC54eSk7IiwiICAgfSBlbHNlIGlmICh2VGV4dHVyZUNvb3JkLnogPT0gMS4pIHsiLCIgICAgIGdsX0ZyYWdDb2xvciA9IHRleHR1cmUyRCh1X3NhbXBsZXIxLCB2VGV4dHVyZUNvb3JkLnh5KTsiLCIgICB9IGVsc2UgaWYgKHZUZXh0dXJlQ29vcmQueiA9PSAyLikgeyIsIiAgICAgZ2xfRnJhZ0NvbG9yID0gdGV4dHVyZTJEKHVfc2FtcGxlcjIsIHZUZXh0dXJlQ29vcmQueHkpOyIsIiAgIH0gZWxzZSBpZiAodlRleHR1cmVDb29yZC56ID09IDMuKSB7IiwiICAgICBnbF9GcmFnQ29sb3IgPSB0ZXh0dXJlMkQodV9zYW1wbGVyMywgdlRleHR1cmVDb29yZC54eSk7IiwiICAgfSBlbHNlIHsgZ2xfRnJhZ0NvbG9yID0gdmVjNCgwLCAxLCAwLCAxKTsgfSIsIn0iXS5qb2luKCJcbiIpfWZ1bmN0aW9uIG8oKXtyZXR1cm5bImF0dHJpYnV0ZSB2ZWMyIGFfdmVydGV4UG9zOyIsImF0dHJpYnV0ZSBmbG9hdCBhX2N1c3RvbUF0dHJpYnV0ZXM7IiwidW5pZm9ybSB2ZWMyIHVfc2NyZWVuU2l6ZTsiLCJ1bmlmb3JtIG1hdDQgdV90cmFuc2Zvcm07IiwidW5pZm9ybSBmbG9hdCB1X3RpbGVzUGVyVGV4dHVyZTsiLCJ2YXJ5aW5nIHZlYzMgdlRleHR1cmVDb29yZDsiLCJ2b2lkIG1haW4odm9pZCkgeyIsIiAgIGdsX1Bvc2l0aW9uID0gdV90cmFuc2Zvcm0gKiB2ZWM0KGFfdmVydGV4UG9zL3Vfc2NyZWVuU2l6ZSwgMCwgMSk7IiwiZmxvYXQgY29ybmVyID0gbW9kKGFfY3VzdG9tQXR0cmlidXRlcywgNC4pOyIsImZsb2F0IHRpbGVJbmRleCA9IG1vZChmbG9vcihhX2N1c3RvbUF0dHJpYnV0ZXMgLyA0LiksIHVfdGlsZXNQZXJUZXh0dXJlKTsiLCJmbG9hdCB0aWxlc1BlclJvdyA9IHNxcnQodV90aWxlc1BlclRleHR1cmUpOyIsImZsb2F0IHRpbGVTaXplID0gMS4vdGlsZXNQZXJSb3c7IiwiZmxvYXQgdGlsZUNvbHVtbiA9IG1vZCh0aWxlSW5kZXgsIHRpbGVzUGVyUm93KTsiLCJmbG9hdCB0aWxlUm93ID0gZmxvb3IodGlsZUluZGV4L3RpbGVzUGVyUm93KTsiLCJpZihjb3JuZXIgPT0gMC4wKSB7IiwiICB2VGV4dHVyZUNvb3JkLnh5ID0gdmVjMigwLCAxKTsiLCJ9IGVsc2UgaWYoY29ybmVyID09IDEuMCkgeyIsIiAgdlRleHR1cmVDb29yZC54eSA9IHZlYzIoMSwgMSk7IiwifSBlbHNlIGlmKGNvcm5lciA9PSAyLjApIHsiLCIgIHZUZXh0dXJlQ29vcmQueHkgPSB2ZWMyKDAsIDApOyIsIn0gZWxzZSB7IiwiICB2VGV4dHVyZUNvb3JkLnh5ID0gdmVjMigxLCAwKTsiLCJ9IiwidlRleHR1cmVDb29yZCAqPSB0aWxlU2l6ZTsiLCJ2VGV4dHVyZUNvb3JkLnggKz0gdGlsZUNvbHVtbiAqIHRpbGVTaXplOyIsInZUZXh0dXJlQ29vcmQueSArPSB0aWxlUm93ICogdGlsZVNpemU7IiwidlRleHR1cmVDb29yZC56ID0gZmxvb3IoZmxvb3IoYV9jdXN0b21BdHRyaWJ1dGVzIC8gNC4pL3VfdGlsZXNQZXJUZXh0dXJlKTsiLCJ9Il0uam9pbigiXG4iKX12YXIgaT1lKCIuL3dlYmdsQXRsYXMuanMiKSxhPWUoIi4vd2ViZ2wuanMiKTtuLmV4cG9ydHM9dH0seyIuL3dlYmdsLmpzIjo1MywiLi93ZWJnbEF0bGFzLmpzIjo1NH1dLDU3OltmdW5jdGlvbihlLG4pe2Z1bmN0aW9uIHQoZSl7ZnVuY3Rpb24gbigpe3g9bnVsbH1mdW5jdGlvbiB0KGUpe3g9ZX1mdW5jdGlvbiBvKGUpe3JldHVybiJmdW5jdGlvbiI9PXR5cGVvZiBlJiZrLnB1c2goZSksan1mdW5jdGlvbiBpKGUpe3JldHVybiJmdW5jdGlvbiI9PXR5cGVvZiBlJiZOLnB1c2goZSksan1mdW5jdGlvbiBhKGUpe3JldHVybiJmdW5jdGlvbiI9PXR5cGVvZiBlJiZQLnB1c2goZSksan1mdW5jdGlvbiB1KGUpe3JldHVybiJmdW5jdGlvbiI9PXR5cGVvZiBlJiZMLnB1c2goZSksan1mdW5jdGlvbiBzKGUpe3JldHVybiJmdW5jdGlvbiI9PXR5cGVvZiBlJiZFLnB1c2goZSksan1mdW5jdGlvbiBmKGUpe3JldHVybiJmdW5jdGlvbiI9PXR5cGVvZiBlJiZiLnB1c2goZSksan1mdW5jdGlvbiBjKGUpe3JldHVybiJmdW5jdGlvbiI9PXR5cGVvZiBlJiZ3LnB1c2goZSksan1mdW5jdGlvbiBkKGUsbix0KXtpZihlJiZlLnNpemUpe3ZhciByPWUucG9zaXRpb24sbz1lLnNpemU7cmV0dXJuIHIueC1vPG4mJm48ci54K28mJnIueS1vPHQmJnQ8ci55K299cmV0dXJuITB9ZnVuY3Rpb24gbChuKXtyZXR1cm4gZS5nZXROb2RlQXRDbGllbnRQb3MobixkKX1mdW5jdGlvbiBwKGUpe2Uuc3RvcFByb3BhZ2F0aW9uP2Uuc3RvcFByb3BhZ2F0aW9uKCk6ZS5jYW5jZWxCdWJibGU9ITB9ZnVuY3Rpb24gdihlKXtyZXR1cm4gcChlKSwhMX1mdW5jdGlvbiBnKGUsbil7dmFyIHQscjtmb3IodD0wO3Q8ZS5sZW5ndGg7dCs9MSlpZihyPWVbdF0uYXBwbHkodm9pZCAwLG4pKXJldHVybiEwfWZ1bmN0aW9uIGgoZSl7dmFyIG49e3g6MCx5OjB9LHQ9bnVsbCxvPTEsaT0rbmV3IERhdGUsYT1mdW5jdGlvbihlKXtnKFAsW3QsZV0pLG4ueD1lLmNsaWVudFgsbi55PWUuY2xpZW50WX0sdT1mdW5jdGlvbigpe3Iub2ZmKCJtb3VzZW1vdmUiLGEpLHIub2ZmKCJtb3VzZXVwIix1KX0scz1mdW5jdGlvbigpe3k9ZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKX07d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoInJlc2l6ZSIscykscygpLGUuYWRkRXZlbnRMaXN0ZW5lcigibW91c2Vtb3ZlIixmdW5jdGlvbihlKXtpZigheCl7bysrJTc9PT0wJiYocygpLG89MSk7dmFyIHIsaT0hMTtuLng9ZS5jbGllbnRYLXkubGVmdCxuLnk9ZS5jbGllbnRZLXkudG9wLHI9bChuKSxyJiZ0IT09cj8odD1yLGk9aXx8Zyh3LFt0XSkpOm51bGw9PT1yJiZ0IT09ciYmKGk9aXx8ZyhiLFt0XSksdD1udWxsKSxpJiZwKGUpfX0pLGUuYWRkRXZlbnRMaXN0ZW5lcigibW91c2Vkb3duIixmdW5jdGlvbihlKXt2YXIgbyxpPSExO3MoKSxuLng9ZS5jbGllbnRYLXkubGVmdCxuLnk9ZS5jbGllbnRZLXkudG9wLG89W2wobiksZV0sb1swXT8oaT1nKEUsbyksci5vbigibW91c2Vtb3ZlIixhKSxyLm9uKCJtb3VzZXVwIix1KSxtPXdpbmRvdy5kb2N1bWVudC5vbnNlbGVjdHN0YXJ0LHdpbmRvdy5kb2N1bWVudC5vbnNlbGVjdHN0YXJ0PXYsdD1vWzBdKTp0PW51bGwsaSYmcChlKX0pLGUuYWRkRXZlbnRMaXN0ZW5lcigibW91c2V1cCIsZnVuY3Rpb24oZSl7dmFyIHIsbz0rbmV3IERhdGU7bi54PWUuY2xpZW50WC15LmxlZnQsbi55PWUuY2xpZW50WS15LnRvcCxyPVtsKG4pLGVdLHJbMF0mJih3aW5kb3cuZG9jdW1lbnQub25zZWxlY3RzdGFydD1tLDQwMD5vLWkmJnJbMF09PT10P2coayxyKTpnKE4sciksaT1vLGcoTCxyKSYmcChlKSl9KX1pZihlLndlYmdsSW5wdXRFdmVudHMpcmV0dXJuIGUud2ViZ2xJbnB1dEV2ZW50czt2YXIgbSx5LHg9bnVsbCx3PVtdLGI9W10sRT1bXSxMPVtdLFA9W10sTj1bXSxrPVtdLEE9ZS5nZXRHcmFwaGljc1Jvb3QoKTtoKEEpO3ZhciBqPXttb3VzZUVudGVyOmMsbW91c2VMZWF2ZTpmLG1vdXNlRG93bjpzLG1vdXNlVXA6dSxtb3VzZU1vdmU6YSxjbGljazppLGRibENsaWNrOm8sbW91c2VDYXB0dXJlOnQscmVsZWFzZU1vdXNlQ2FwdHVyZTpufTtyZXR1cm4gZS53ZWJnbElucHV0RXZlbnRzPWosan12YXIgcj1lKCIuLi9VdGlscy9kb2N1bWVudEV2ZW50cy5qcyIpO24uZXhwb3J0cz10fSx7Ii4uL1V0aWxzL2RvY3VtZW50RXZlbnRzLmpzIjo0MH1dLDU4OltmdW5jdGlvbihlLG4pe2Z1bmN0aW9uIHQoZSl7cmV0dXJue2NvbG9yOnIoZSl9fXZhciByPWUoIi4vcGFyc2VDb2xvci5qcyIpO24uZXhwb3J0cz10fSx7Ii4vcGFyc2VDb2xvci5qcyI6NTF9XSw1OTpbZnVuY3Rpb24oZSxuKXtmdW5jdGlvbiB0KCl7dmFyIGUsbix0LG8saSxhLHUscyxmLGMsZD02LGw9MiooMipGbG9hdDMyQXJyYXkuQllURVNfUEVSX0VMRU1FTlQrVWludDMyQXJyYXkuQllURVNfUEVSX0VMRU1FTlQpLHA9WyJwcmVjaXNpb24gbWVkaXVtcCBmbG9hdDsiLCJ2YXJ5aW5nIHZlYzQgY29sb3I7Iiwidm9pZCBtYWluKHZvaWQpIHsiLCIgICBnbF9GcmFnQ29sb3IgPSBjb2xvcjsiLCJ9Il0uam9pbigiXG4iKSx2PVsiYXR0cmlidXRlIHZlYzIgYV92ZXJ0ZXhQb3M7IiwiYXR0cmlidXRlIHZlYzQgYV9jb2xvcjsiLCJ1bmlmb3JtIHZlYzIgdV9zY3JlZW5TaXplOyIsInVuaWZvcm0gbWF0NCB1X3RyYW5zZm9ybTsiLCJ2YXJ5aW5nIHZlYzQgY29sb3I7Iiwidm9pZCBtYWluKHZvaWQpIHsiLCIgICBnbF9Qb3NpdGlvbiA9IHVfdHJhbnNmb3JtICogdmVjNChhX3ZlcnRleFBvcy91X3NjcmVlblNpemUsIDAuMCwgMS4wKTsiLCIgICBjb2xvciA9IGFfY29sb3IuYWJncjsiLCJ9Il0uam9pbigiXG4iKSxnPTAsaD1uZXcgQXJyYXlCdWZmZXIoMTYqbCksbT1uZXcgRmxvYXQzMkFycmF5KGgpLHk9bmV3IFVpbnQzMkFycmF5KGgpLHg9ZnVuY3Rpb24oKXtpZigoZysxKSpsPmguYnl0ZUxlbmd0aCl7dmFyIGU9bmV3IEFycmF5QnVmZmVyKDIqaC5ieXRlTGVuZ3RoKSxuPW5ldyBGbG9hdDMyQXJyYXkoZSksdD1uZXcgVWludDMyQXJyYXkoZSk7dC5zZXQoeSksbT1uLHk9dCxoPWV9fTtyZXR1cm57bG9hZDpmdW5jdGlvbihhKXtuPWEsbz1yKGEpLGU9by5jcmVhdGVQcm9ncmFtKHYscCksbi51c2VQcm9ncmFtKGUpLGk9by5nZXRMb2NhdGlvbnMoZSxbImFfdmVydGV4UG9zIiwiYV9jb2xvciIsInVfc2NyZWVuU2l6ZSIsInVfdHJhbnNmb3JtIl0pLG4uZW5hYmxlVmVydGV4QXR0cmliQXJyYXkoaS52ZXJ0ZXhQb3MpLG4uZW5hYmxlVmVydGV4QXR0cmliQXJyYXkoaS5jb2xvciksdD1uLmNyZWF0ZUJ1ZmZlcigpfSxwb3NpdGlvbjpmdW5jdGlvbihlLG4sdCl7dmFyIHI9ZS5pZCxvPXIqZDttW29dPW4ueCxtW28rMV09bi55LHlbbysyXT1lLmNvbG9yLG1bbyszXT10LngsbVtvKzRdPXQueSx5W28rNV09ZS5jb2xvcn0sY3JlYXRlTGluazpmdW5jdGlvbihlKXt4KCksZys9MSxhPWUuaWR9LHJlbW92ZUxpbms6ZnVuY3Rpb24oZSl7Zz4wJiYoZy09MSksZS5pZDxnJiZnPjAmJm8uY29weUFycmF5UGFydCh5LGUuaWQqZCxnKmQsZCl9LHVwZGF0ZVRyYW5zZm9ybTpmdW5jdGlvbihlKXtjPSEwLGY9ZX0sdXBkYXRlU2l6ZTpmdW5jdGlvbihlLG4pe3U9ZSxzPW4sYz0hMH0scmVuZGVyOmZ1bmN0aW9uKCl7bi51c2VQcm9ncmFtKGUpLG4uYmluZEJ1ZmZlcihuLkFSUkFZX0JVRkZFUix0KSxuLmJ1ZmZlckRhdGEobi5BUlJBWV9CVUZGRVIsaCxuLkRZTkFNSUNfRFJBVyksYyYmKGM9ITEsbi51bmlmb3JtTWF0cml4NGZ2KGkudHJhbnNmb3JtLCExLGYpLG4udW5pZm9ybTJmKGkuc2NyZWVuU2l6ZSx1LHMpKSxuLnZlcnRleEF0dHJpYlBvaW50ZXIoaS52ZXJ0ZXhQb3MsMixuLkZMT0FULCExLDMqRmxvYXQzMkFycmF5LkJZVEVTX1BFUl9FTEVNRU5ULDApLG4udmVydGV4QXR0cmliUG9pbnRlcihpLmNvbG9yLDQsbi5VTlNJR05FRF9CWVRFLCEwLDMqRmxvYXQzMkFycmF5LkJZVEVTX1BFUl9FTEVNRU5ULDgpLG4uZHJhd0FycmF5cyhuLkxJTkVTLDAsMipnKSxhPWctMX0sYnJpbmdUb0Zyb250OmZ1bmN0aW9uKGUpe2E+ZS5pZCYmby5zd2FwQXJyYXlQYXJ0KG0sZS5pZCpkLGEqZCxkKSxhPjAmJihhLT0xKX0sZ2V0RnJvbnRMaW5rSWQ6ZnVuY3Rpb24oKXtyZXR1cm4gYX19fXZhciByPWUoIi4vd2ViZ2wuanMiKTtuLmV4cG9ydHM9dH0seyIuL3dlYmdsLmpzIjo1M31dLDYwOltmdW5jdGlvbihlLG4pe2Z1bmN0aW9uIHQoKXtmdW5jdGlvbiBlKCl7aWYoKGsrMSkqdz49TC5ieXRlTGVuZ3RoKXt2YXIgZT1uZXcgQXJyYXlCdWZmZXIoMipMLmJ5dGVMZW5ndGgpLG49bmV3IEZsb2F0MzJBcnJheShlKSx0PW5ldyBVaW50MzJBcnJheShlKTt0LnNldChOKSxQPW4sTj10LEw9ZX19ZnVuY3Rpb24gbihlKXtkPWUsdj1yKGUpLGM9di5jcmVhdGVQcm9ncmFtKEUsYiksZC51c2VQcm9ncmFtKGMpLHA9di5nZXRMb2NhdGlvbnMoYyxbImFfdmVydGV4UG9zIiwiYV9jb2xvciIsInVfc2NyZWVuU2l6ZSIsInVfdHJhbnNmb3JtIl0pLGQuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkocC52ZXJ0ZXhQb3MpLGQuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkocC5jb2xvciksbD1kLmNyZWF0ZUJ1ZmZlcigpfWZ1bmN0aW9uIHQoZSxuKXt2YXIgdD1lLmlkO1BbdCp4XT1uLngsUFt0KngrMV09bi55LFBbdCp4KzJdPWUuc2l6ZSxOW3QqeCszXT1lLmNvbG9yfWZ1bmN0aW9uIG8oZSl7eT0hMCxtPWV9ZnVuY3Rpb24gaShlLG4pe2c9ZSxoPW4seT0hMH1mdW5jdGlvbiBhKGUpe2s+MCYmKGstPTEpLGUuaWQ8ayYmaz4wJiZ2LmNvcHlBcnJheVBhcnQoTixlLmlkKngsayp4LHgpfWZ1bmN0aW9uIHUoKXtlKCksays9MX1mdW5jdGlvbiBzKCl7fWZ1bmN0aW9uIGYoKXtkLnVzZVByb2dyYW0oYyksZC5iaW5kQnVmZmVyKGQuQVJSQVlfQlVGRkVSLGwpLGQuYnVmZmVyRGF0YShkLkFSUkFZX0JVRkZFUixMLGQuRFlOQU1JQ19EUkFXKSx5JiYoeT0hMSxkLnVuaWZvcm1NYXRyaXg0ZnYocC50cmFuc2Zvcm0sITEsbSksZC51bmlmb3JtMmYocC5zY3JlZW5TaXplLGcsaCkpLGQudmVydGV4QXR0cmliUG9pbnRlcihwLnZlcnRleFBvcywzLGQuRkxPQVQsITEseCpGbG9hdDMyQXJyYXkuQllURVNfUEVSX0VMRU1FTlQsMCksZC52ZXJ0ZXhBdHRyaWJQb2ludGVyKHAuY29sb3IsNCxkLlVOU0lHTkVEX0JZVEUsITAseCpGbG9hdDMyQXJyYXkuQllURVNfUEVSX0VMRU1FTlQsMTIpLGQuZHJhd0FycmF5cyhkLlBPSU5UUywwLGspfXZhciBjLGQsbCxwLHYsZyxoLG0seSx4PTQsdz0zKkZsb2F0MzJBcnJheS5CWVRFU19QRVJfRUxFTUVOVCtVaW50MzJBcnJheS5CWVRFU19QRVJfRUxFTUVOVCxiPVsicHJlY2lzaW9uIG1lZGl1bXAgZmxvYXQ7IiwidmFyeWluZyB2ZWM0IGNvbG9yOyIsInZvaWQgbWFpbih2b2lkKSB7IiwiICAgZ2xfRnJhZ0NvbG9yID0gY29sb3I7IiwifSJdLmpvaW4oIlxuIiksRT1bImF0dHJpYnV0ZSB2ZWMzIGFfdmVydGV4UG9zOyIsImF0dHJpYnV0ZSB2ZWM0IGFfY29sb3I7IiwidW5pZm9ybSB2ZWMyIHVfc2NyZWVuU2l6ZTsiLCJ1bmlmb3JtIG1hdDQgdV90cmFuc2Zvcm07IiwidmFyeWluZyB2ZWM0IGNvbG9yOyIsInZvaWQgbWFpbih2b2lkKSB7IiwiICAgZ2xfUG9zaXRpb24gPSB1X3RyYW5zZm9ybSAqIHZlYzQoYV92ZXJ0ZXhQb3MueHkvdV9zY3JlZW5TaXplLCAwLCAxKTsiLCIgICBnbF9Qb2ludFNpemUgPSBhX3ZlcnRleFBvcy56ICogdV90cmFuc2Zvcm1bMF1bMF07IiwiICAgY29sb3IgPSBhX2NvbG9yLmFiZ3I7IiwifSJdLmpvaW4oIlxuIiksTD1uZXcgQXJyYXlCdWZmZXIoMTYqdyksUD1uZXcgRmxvYXQzMkFycmF5KEwpLE49bmV3IFVpbnQzMkFycmF5KEwpLGs9MDtyZXR1cm57bG9hZDpuLHBvc2l0aW9uOnQsdXBkYXRlVHJhbnNmb3JtOm8sdXBkYXRlU2l6ZTppLHJlbW92ZU5vZGU6YSxjcmVhdGVOb2RlOnUscmVwbGFjZVByb3BlcnRpZXM6cyxyZW5kZXI6Zn19dmFyIHI9ZSgiLi93ZWJnbC5qcyIpO24uZXhwb3J0cz10fSx7Ii4vd2ViZ2wuanMiOjUzfV0sNjE6W2Z1bmN0aW9uKGUsbil7ZnVuY3Rpb24gdChlLG4pe3JldHVybntzaXplOiJudW1iZXIiPT10eXBlb2YgZT9lOjEwLGNvbG9yOnIobil9fXZhciByPWUoIi4vcGFyc2VDb2xvci5qcyIpO24uZXhwb3J0cz10fSx7Ii4vcGFyc2VDb2xvci5qcyI6NTF9XSw2MjpbZnVuY3Rpb24oZSxuKXtuLmV4cG9ydHM9IjAuNy4xMiJ9LHt9XX0se30sWzFdKSgxKX0pOw=="></script>
<script src="data:application/x-javascript;base64,SFRNTFdpZGdldHMud2lkZ2V0KHsKCiAgbmFtZTogJ3ZpdmFncmFwaCcsCgogIHR5cGU6ICdvdXRwdXQnLAoKICBpbml0aWFsaXplOiBmdW5jdGlvbihlbCwgd2lkdGgsIGhlaWdodCl7CgogICAgcmV0dXJuIHsgfTsKCiAgfSwKCiAgcmVuZGVyVmFsdWU6IGZ1bmN0aW9uKGVsLCB4LCBpbnN0YW5jZSl7CgogICAgLy8gY2xlYW4gb3V0IG91ciBlbCBpbiBjYXNlIHdlIGFyZSBpbiBhIGR5bmFtaWMgKFNoaW55KSBzaXR1YXRpb24KICAgIGVsLmlubmVySFRNTCA9ICIiOwogICAgdmFyIHBvc2l0aW9ucyA9IFtdOwoKLy8gICAgdHJ5IHsKICAgICAgLy8gbXVjaCBvZiB0aGlzIGNvZGUgY29waWVkIC8gYWRhcHRlZCBmcm9tIFZpdmFHcmFwaEpTIGV4YW1wbGUgNAogICAgICAvLyAgIGh0dHBzOi8vZ2l0aHViLmNvbS9hbnZha2EvVml2YUdyYXBoSlMvYmxvYi9tYXN0ZXIvZGVtb3MvdHV0b3JpYWxfc3ZnLzA0JTIwLSUyMExpc3RlbiUyMFRvJTIwTW91c2UlMjBFdmVudHMuaHRtbAoKCiAgICAgIC8vIFN0ZXAgMi4gV2UgYWRkIG5vZGVzIGFuZCBlZGdlcyB0byB0aGUgZ3JhcGg6CiAgICAgIGlmICghKHgubmV0d29yayA9PT0gbnVsbCkpewoKICAgICAgICAvLyBTdGVwIDEuIGNyZWF0ZSBhIGdyYXBoIHZhcmlhYmxlCiAgICAgICAgdmFyIGdyYXBoID0gVml2YS5HcmFwaC5ncmFwaCgpLAogICAgICAgICAgICBsYXlvdXQgPSBWaXZhLkdyYXBoLkxheW91dFt4LmxheW91dF0oZ3JhcGgpOwoKICAgICAgICAvLyAgZm9yIGRlZmluZWQgcG9zaXRpb25zIGlmIHByb3ZpZGVkCiAgICAgICAgaWYgKCEoeC5wb3NpdGlvbnMgPT09IG51bGwpICYmIHgubGF5b3V0ID09PSAiY29uc3RhbnQiKXsKCiAgICAgICAgICB4LnBvc2l0aW9ucy54Lm1hcCggZnVuY3Rpb24ocG9zLCBpbmMpewogICAgICAgICAgICBwb3NpdGlvbnMucHVzaCh7CiAgICAgICAgICAgICAgeCA6ICt4LnBvc2l0aW9ucy54W2luY10sCiAgICAgICAgICAgICAgeSA6ICt4LnBvc2l0aW9ucy55W2luY10KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9KTsKCiAgICAgICAgICBsYXlvdXQucGxhY2VOb2RlKGZ1bmN0aW9uKG5vZGUpewogICAgICAgICAgICAvLyBub2RlLmlkIC0gcG9pbnRzIHRvIGl0cyBwb3NpdGlvbiBidXQgeW91IGNhbiBkbyB5b3VyCiAgICAgICAgICAgIC8vIHJhbmRvbSBsb2dpYyBoZXJlLiBFLmcuIHJlYWQgZnJvbSBzcGVjaWZpYyBub2RlLmRhdGEKICAgICAgICAgICAgLy8gYXR0cmlidXRlcy4gVGhpcyBjYWxsYmFjayBpcyBleHBlY3RlZCB0byByZXR1cm4gb2JqZWN0CiAgICAgICAgICAgIC8vIHt4IDogLi4gLCB5IDogLi4gfQogICAgICAgICAgICByZXR1cm4gcG9zaXRpb25zW3gubmV0d29yay5ub2Rlc19kZi5pZC5pbmRleE9mKG5vZGUuaWQpXTsKICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgLy91c2UgSFRNTFdpZGdldHMuZGF0YWZyYW1lVG9EMyB0byBnZXQgZGF0YSBhcyBhcnJheSBvZiBvYmplY3RzCiAgICAgICAgSFRNTFdpZGdldHMuZGF0YWZyYW1lVG9EMyh4Lm5ldHdvcmsubm9kZXNfZGYpLm1hcChmdW5jdGlvbihub2RlKXsKICAgICAgICAgIGdyYXBoLmFkZE5vZGUoCiAgICAgICAgICAgIG5vZGUuaWQsCiAgICAgICAgICAgIG5vZGUKICAgICAgICAgICk7CiAgICAgICAgfSk7CgogICAgICAgIEhUTUxXaWRnZXRzLmRhdGFmcmFtZVRvRDMoeC5uZXR3b3JrLmVkZ2VzX2RmKS5tYXAoZnVuY3Rpb24oZWRnZSl7CiAgICAgICAgICBncmFwaC5hZGRMaW5rKAogICAgICAgICAgICBlZGdlLmZyb20sCiAgICAgICAgICAgIGVkZ2UudG8sCiAgICAgICAgICAgIGVkZ2UKICAgICAgICAgICk7CiAgICAgICAgfSk7CgogICAgICAgIC8vIFN0ZXAgMy4gUmVuZGVyIHRoZSBncmFwaAoKICAgICAgICAvLyBmb3Igbm93IG9ubHkgdXNlIHN2Z0dyYXBoaWNzIFZpZXcKICAgICAgICAvLyAgIGJ1dCBldmVudHVhbGx5IGV4cGFuZCB0byB3ZWJnbCBhbmQgcG9zc2libHkgb3RoZXIgbmdyYXBoIHZpZXdzCiAgICAgICAgdmFyIGdyYXBoaWNzID0gVml2YS5HcmFwaC5WaWV3LnN2Z0dyYXBoaWNzKCksCiAgICAgICAgICAgIG5vZGVTaXplID0gMjQsCiAgICAgICAgICAgIC8vIHdlIHVzZSB0aGlzIG1ldGhvZCB0byBoaWdobGlnaHQgYWxsIHJlYWx0ZWQgbGlua3MKICAgICAgICAgICAgLy8gd2hlbiB1c2VyIGhvdmVycyBtb3VzZSBvdmVyIGEgbm9kZToKICAgICAgICAgICAgaGlnaGxpZ2h0UmVsYXRlZE5vZGVzID0gZnVuY3Rpb24obm9kZUlkLCBpc09uKXsKICAgICAgICAgICAgICAgLy8ganVzdCBlbnVtZXJhdGUgYWxsIHJlYWx0ZWQgbm9kZXMgYW5kIHVwZGF0ZSBsaW5rIGNvbG9yOgogICAgICAgICAgICAgICBncmFwaC5mb3JFYWNoTGlua2VkTm9kZShub2RlSWQsIGZ1bmN0aW9uKG5vZGUsIGxpbmspewogICAgICAgICAgICAgICAgICAgdmFyIGxpbmtVSSA9IGdyYXBoaWNzLmdldExpbmtVSShsaW5rLmlkKTsKICAgICAgICAgICAgICAgICAgIGlmIChsaW5rVUkpewogICAgICAgICAgICAgICAgICAgICAvLyBsaW5rVUkgaXMgYSBVSSBvYmplY3QgY3JlYXRlZCBieSBncmFwaGljcyBiZWxvdwogICAgICAgICAgICAgICAgICAgICBsaW5rVUkuYXR0cignc3Ryb2tlJywgaXNPbiA/ICdyZWQnIDogJ2dyYXknKTsKICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH07CgogICAgICAgIC8vIFNpbmNlIHdlIGFyZSB1c2luZyBTVkcgd2UgY2FuIGVhc2lseSBzdWJzY3JpYmUgdG8gYW55IHN1cHBvcnRlZAogICAgICAgIC8vIGV2ZW50cyAoaHR0cDovL3d3dy53My5vcmcvVFIvU1ZHL2ludGVyYWN0Lmh0bWwjU1ZHRXZlbnRzICksCiAgICAgICAgLy8gaW5jbHVkaW5nIG1vdXNlIGV2ZW50czoKICAgICAgICBncmFwaGljcy5ub2RlKGZ1bmN0aW9uKG5vZGUpewoKICAgICAgICAgICAgdmFyIHVpID0gVml2YS5HcmFwaC5zdmcoJ2cnKTsKCiAgICAgICAgICAgIHZhciBzdmdUZXh0ID0gVml2YS5HcmFwaC5zdmcoJ3RleHQnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ2ZvbnQtZmFtaWx5JywgJ3NhbnMtc2VyaWYnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ2ZvbnQtc2l6ZScsICcxMHB4JykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCd5JywgJy04cHgnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3gnLCAnLThweCcpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGV4dChub2RlLmlkKTsKCiAgICAgICAgICAgIHZhciBpbWcgPSBWaXZhLkdyYXBoLnN2ZygnY2lyY2xlJykKICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3InLCA3KQogICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignc3Ryb2tlJywgJ2dyYXknKQogICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignc3Ryb2tlLXdpZHRoJywgJzFweCcpCiAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdmaWxsJywgJ3B1cnBsZScpOwoKICAgICAgICAgICAgdWkuYXBwZW5kKHN2Z1RleHQpOwogICAgICAgICAgICB1aS5hcHBlbmQoaW1nKTsKCiAgICAgICAgICAgIHVpLm9ubW91c2VvdmVyID0gZnVuY3Rpb24oKSB7IC8vIG1vdXNlIG92ZXIKICAgICAgICAgICAgICAgIGhpZ2hsaWdodFJlbGF0ZWROb2Rlcyhub2RlLmlkLCB0cnVlKTsKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIHVpLm9ubW91c2VvdXQgPSBmdW5jdGlvbigpIHsgLy8gbW91c2Ugb3V0CiAgICAgICAgICAgICAgICBoaWdobGlnaHRSZWxhdGVkTm9kZXMobm9kZS5pZCwgZmFsc2UpOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgcmV0dXJuIHVpOwogICAgICAgIH0pLnBsYWNlTm9kZSgKICAgICAgICAgICAgZnVuY3Rpb24obm9kZVVJLCBwb3MpewogICAgICAgICAgICAgICAgbm9kZVVJLmF0dHIoJ3RyYW5zZm9ybScsICd0cmFuc2xhdGUoJyArIChwb3MueCAtIDApCiAgICAgICAgICAgICAgICAgICAgICAgICsgJywnICsgKHBvcy55IC0gMCkgKyAnKScpOwogICAgICAgICAgICB9CiAgICAgICAgKTsKCiAgICAgICAgZ3JhcGhpY3MubGluayhmdW5jdGlvbihsaW5rKXsKICAgICAgICAgICAgcmV0dXJuIFZpdmEuR3JhcGguc3ZnKCdwYXRoJykKICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdzdHJva2UnLCAnZ3JheScpOwogICAgICAgIH0pLnBsYWNlTGluayhmdW5jdGlvbihsaW5rVUksIGZyb21Qb3MsIHRvUG9zKSB7CiAgICAgICAgICAgIHZhciBkYXRhID0gJ00nICsgZnJvbVBvcy54ICsgJywnICsgZnJvbVBvcy55ICsKICAgICAgICAgICAgICAgICAgICAgICAnTCcgKyB0b1Bvcy54ICsgJywnICsgdG9Qb3MueTsKICAgICAgICAgICAgbGlua1VJLmF0dHIoImQiLCBkYXRhKTsKICAgICAgICB9KTsKCiAgICAgICAgLy8gRmluYWxseSByZW5kZXIgdGhlIGdyYXBoIHdpdGggb3VyIGN1c3RvbWl6ZWQgZ3JhcGhpY3Mgb2JqZWN0OgogICAgICAgIHZhciByZW5kZXJlciA9IFZpdmEuR3JhcGguVmlldy5yZW5kZXJlcihncmFwaCwKICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250YWluZXI6IGVsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGF5b3V0OiBsYXlvdXQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBncmFwaGljczogZ3JhcGhpY3MKICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgcmVuZGVyZXIucnVuKCk7CgogICAgICAgIC8vIHRyeSB0byBoYW5kbGUgQ2hyb21lICJidWciCiAgICAgICAgLy8gc2VlIGlzc3VlIGh0dHBzOi8vZ2l0aHViLmNvbS9hbnZha2EvVml2YUdyYXBoSlMvaXNzdWVzLzEwOAogICAgICAgIC8vIGJ5IGV4cGxpY2l0bHkgc2V0dGluZyBzdmcgaGVpZ2h0IGFuZCB3aWR0aAogICAgICAgIGVsLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJzdmciKVswXS5zdHlsZS53aWR0aD0iMTAwJSI7CiAgICAgICAgZWwuZ2V0RWxlbWVudHNCeVRhZ05hbWUoInN2ZyIpWzBdLnN0eWxlLmhlaWdodD0iMTAwJSI7CgogICAgICAgIC8vICBzZXQgdXAgYSBjb250YWluZXIgZm9yIHRhc2tzIHRvIHBlcmZvcm0gYWZ0ZXIgY29tcGxldGlvbgogICAgICAgIC8vICBvbmUgZXhhbXBsZSB3b3VsZCBiZSBhZGQgY2FsbGJhY2tzIGZvciBldmVudCBoYW5kbGluZwogICAgICAgIC8vICBzdHlsaW5nCiAgICAgICAgaWYgKCEodHlwZW9mIHgudGFza3MgPT09ICJ1bmRlZmluZWQiKSl7CiAgICAgICAgICBpZiAoKHR5cGVvZiB4LnRhc2tzLmxlbmd0aCA9PT0gInVuZGVmaW5lZCIpIHx8CiAgICAgICAgICAgKHR5cGVvZiB4LnRhc2tzID09PSAiZnVuY3Rpb24iKSl7CiAgICAgICAgICAgICAvLyBoYW5kbGUgYSBmdW5jdGlvbiBub3QgZW5jbG9zZWQgaW4gYXJyYXkKICAgICAgICAgICAgIC8vIHNob3VsZCBiZSBhYmxlIHRvIHJlbW92ZSBvbmNlIHVzaW5nIGpzb25saXRlCiAgICAgICAgICAgICB4LnRhc2tzID0gW3gudGFza3NdOwogICAgICAgICAgfQogICAgICAgICAgeC50YXNrcy5tYXAoZnVuY3Rpb24odCl7CiAgICAgICAgICAgIC8vIGZvciBlYWNoIHRhc2tzIGFkZCBpdCB0byB0aGUgbWVybWFpZC50YXNrcyB3aXRoIGVsCiAgICAgICAgICAgIHQuY2FsbChlbCk7CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0KICAgIC8qICB9CgogICAgfSBjYXRjaChlKSB7CiAgICAgICAgLy8gd3JpdGUgdGhlIGVycm9yIGluICBlbCBmb3IgZGVidWdnaW5nCiAgICAgICAgdmFyIHAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJwcmUiKQogICAgICAgIHAuaW5uZXJUZXh0ID0gZTsKICAgICAgICBlbC5hcHBlbmRDaGlsZChwKTsKICAgIH0KICAgICovCiAgfSwKCiAgcmVzaXplOiBmdW5jdGlvbihlbCwgd2lkdGgsIGhlaWdodCwgaW5zdGFuY2UpewoKICB9Cn0pOwo="></script>
</head>
<body style="background-color:white;">
<div id="htmlwidget_container">
<div id="htmlwidget-6196" class="vivagraph html-widget" style="width:960px;height:500px;">

</div>
</div>
<script type="application/json" data-for="htmlwidget-6196">{"x":{"network":{"nodes_df":{"id":["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],"type":["letter","letter","letter","letter","letter","letter","letter","letter","letter","letter","letter","letter","letter","letter","letter","letter","letter","letter","letter","letter","letter","letter","letter","letter","letter","letter"],"label":["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],"shape":["square","square","circle","square","square","square","circle","circle","circle","square","square","circle","square","square","circle","square","square","circle","square","square","circle","square","square","circle","square","square"],"fillcolor":["pink","aqua","lightgreen","orange","aqua","black","lightgreen","orange","lightgreen","pink","orange","yellow","yellow","aqua","pink","pink","pink","pink","aqua","orange","black","black","black","pink","black","black"]},"edges_df":{"from":["V","A","Z","K","J","Y","T","D","H","T","N","N","E","U","A","W","V","D","S","K","T","R","U","G","H","I"],"to":["I","L","M","R","Q","F","Y","R","B","S","N","Q","L","A","W","M","A","N","E","B","C","P","Y","K","P","W"],"rel":["letter_to_letter","letter_to_letter","letter_to_letter","letter_to_letter","letter_to_letter","letter_to_letter","letter_to_letter","letter_to_letter","letter_to_letter","letter_to_letter","letter_to_letter","letter_to_letter","letter_to_letter","letter_to_letter","letter_to_letter","letter_to_letter","letter_to_letter","letter_to_letter","letter_to_letter","letter_to_letter","letter_to_letter","letter_to_letter","letter_to_letter","letter_to_letter","letter_to_letter","letter_to_letter"]}},"layout":"forceDirected","positions":null,"config":null},"evals":[],"jsHooks":[]}</script>
<script type="application/htmlwidget-sizing" data-for="htmlwidget-6196">{"viewer":{"width":450,"height":350,"padding":15,"fill":true},"browser":{"width":960,"height":500,"padding":40,"fill":false}}</script>
</body>
</html>
